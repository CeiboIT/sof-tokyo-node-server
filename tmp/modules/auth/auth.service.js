/// <reference path="../../../typings/tsd.d.ts" />
/// <reference path="../connection/connection.service.ts" />
var connection = require('../connection/connection.service');
var AuthService = (function () {
    function AuthService() {
        this.db = connection.service;
    }
    AuthService.prototype.getNonce = function () {
        return this.db.query('api/get_nonce/?controller=user&method=register');
    };
    AuthService.prototype.register = function (username, email, nonce, display_name) {
        return this.db.query('api/user/register/?username=' + username + '&email=' + email + '&nonce=' + nonce + '&display_name=' + display_name);
    };
    AuthService.prototype.login = function (username, password) {
        return this.db.query('api/user/generate_auth_cookie/?username=' + username + '&password=' + password);
    };
    /*
        fbLogin(access_token): Q.IPromise<{}> {
            return this.db.query('api/user/fb_connect/?access_token=' + access_token)
        }
    */
    AuthService.prototype.isAuthorized = function (cookie) {
        return this.db.query('api/user/validate_auth_cookie/?cookie=' + cookie);
    };
    AuthService.prototype.getUserInfo = function (userId) {
        return this.db.query('api/user/get_userinfo/?user_id=' + userId);
    };
    AuthService.prototype.getUserAvatar = function (userId, type) {
        return this.db.query('api/user/get_avatar/?user_id=' + userId + '&type=' + type);
    };
    AuthService.prototype.resetPassword = function (username) {
        return this.db.query('api/user/retrieve_password/?user_login=' + username);
    };
    return AuthService;
})();
exports.AuthService = AuthService;
;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvYXV0aC9hdXRoLnNlcnZpY2UudHMiXSwibmFtZXMiOlsiQXV0aFNlcnZpY2UiLCJBdXRoU2VydmljZS5jb25zdHJ1Y3RvciIsIkF1dGhTZXJ2aWNlLmdldE5vbmNlIiwiQXV0aFNlcnZpY2UucmVnaXN0ZXIiLCJBdXRoU2VydmljZS5sb2dpbiIsIkF1dGhTZXJ2aWNlLmlzQXV0aG9yaXplZCIsIkF1dGhTZXJ2aWNlLmdldFVzZXJJbmZvIiwiQXV0aFNlcnZpY2UuZ2V0VXNlckF2YXRhciIsIkF1dGhTZXJ2aWNlLnJlc2V0UGFzc3dvcmQiXSwibWFwcGluZ3MiOiJBQUFBLGtEQUFrRDtBQUNsRCw0REFBNEQ7QUFHNUQsSUFBTyxVQUFVLFdBQVcsa0NBQWtDLENBQUMsQ0FBQTtBQWMvRCxJQUFhLFdBQVc7SUFBeEJBLFNBQWFBLFdBQVdBO1FBQ1pDLE9BQUVBLEdBQUdBLFVBQVVBLENBQUNBLE9BQU9BLENBQUNBO0lBbUNwQ0EsQ0FBQ0E7SUFqQ0dELDhCQUFRQSxHQUFSQTtRQUNJRSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxLQUFLQSxDQUFDQSxnREFBZ0RBLENBQUNBLENBQUFBO0lBQzFFQSxDQUFDQTtJQUVERiw4QkFBUUEsR0FBUkEsVUFBU0EsUUFBUUEsRUFBRUEsS0FBS0EsRUFBRUEsS0FBS0EsRUFBRUEsWUFBWUE7UUFDekNHLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLEtBQUtBLENBQUNBLDhCQUE4QkEsR0FBR0EsUUFBUUEsR0FBR0EsU0FBU0EsR0FBR0EsS0FBS0EsR0FBR0EsU0FBU0EsR0FBR0EsS0FBS0EsR0FBR0EsZ0JBQWdCQSxHQUFHQSxZQUFZQSxDQUFDQSxDQUFBQTtJQUM3SUEsQ0FBQ0E7SUFFREgsMkJBQUtBLEdBQUxBLFVBQU1BLFFBQVFBLEVBQUVBLFFBQVFBO1FBQ3BCSSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxLQUFLQSxDQUFDQSwwQ0FBMENBLEdBQUdBLFFBQVFBLEdBQUdBLFlBQVlBLEdBQUdBLFFBQVFBLENBQUNBLENBQUFBO0lBQ3pHQSxDQUFDQTtJQUVMSjs7OztNQUlFQTtJQUVFQSxrQ0FBWUEsR0FBWkEsVUFBYUEsTUFBTUE7UUFDZkssTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsS0FBS0EsQ0FBQ0Esd0NBQXdDQSxHQUFHQSxNQUFNQSxDQUFDQSxDQUFBQTtJQUMzRUEsQ0FBQ0E7SUFFREwsaUNBQVdBLEdBQVhBLFVBQVlBLE1BQU1BO1FBQ2RNLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLEtBQUtBLENBQUNBLGlDQUFpQ0EsR0FBR0EsTUFBTUEsQ0FBQ0EsQ0FBQUE7SUFDcEVBLENBQUNBO0lBRUROLG1DQUFhQSxHQUFiQSxVQUFjQSxNQUFNQSxFQUFFQSxJQUFJQTtRQUN0Qk8sTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsK0JBQStCQSxHQUFHQSxNQUFNQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxDQUFDQSxDQUFBQTtJQUNwRkEsQ0FBQ0E7SUFFRFAsbUNBQWFBLEdBQWJBLFVBQWNBLFFBQVFBO1FBQ2xCUSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxLQUFLQSxDQUFDQSx5Q0FBeUNBLEdBQUdBLFFBQVFBLENBQUNBLENBQUFBO0lBQzlFQSxDQUFDQTtJQUNMUixrQkFBQ0E7QUFBREEsQ0FwQ0EsQUFvQ0NBLElBQUE7QUFwQ1ksbUJBQVcsR0FBWCxXQW9DWixDQUFBO0FBQUEsQ0FBQyIsImZpbGUiOiJtb2R1bGVzL2F1dGgvYXV0aC5zZXJ2aWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvdHNkLmQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL2Nvbm5lY3Rpb24vY29ubmVjdGlvbi5zZXJ2aWNlLnRzXCIgLz5cblxuaW1wb3J0IFEgPSByZXF1aXJlKFwicVwiKTtcbmltcG9ydCBjb25uZWN0aW9uID0gcmVxdWlyZSgnLi4vY29ubmVjdGlvbi9jb25uZWN0aW9uLnNlcnZpY2UnKVxuXG5leHBvcnQgaW50ZXJmYWNlIElBdXRoU2VydmljZSB7XG4gICAgZ2V0Tm9uY2UoKTogUS5JUHJvbWlzZTx7fT47XG4gICAgcmVnaXN0ZXIodXNlcm5hbWUsIGVtYWlsLCBub25jZSwgZGlzcGxheV9uYW1lKTogUS5JUHJvbWlzZTx7fT47XG4gICAgbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTogUS5JUHJvbWlzZTx7fT47XG4vLyAgICBmYkxvZ2luKGFjY2Vzc190b2tlbik6IFEuSVByb21pc2U8e30+O1xuICAgIGlzQXV0aG9yaXplZChjb29raWUpOiBRLklQcm9taXNlPHt9PjtcbiAgICBnZXRVc2VySW5mbyh1c2VySWQpOiBRLklQcm9taXNlPHt9PjtcbiAgICBnZXRVc2VyQXZhdGFyKHVzZXJJZCwgdHlwZSk6IFEuSVByb21pc2U8e30+O1xuICAgIHJlc2V0UGFzc3dvcmQodXNlcm5hbWUpOiBRLklQcm9taXNlPHt9Pjtcbn1cblxuXG5leHBvcnQgY2xhc3MgQXV0aFNlcnZpY2UgaW1wbGVtZW50cyBJQXV0aFNlcnZpY2Uge1xuICAgIHByaXZhdGUgZGIgPSBjb25uZWN0aW9uLnNlcnZpY2U7XG5cbiAgICBnZXROb25jZSgpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLnF1ZXJ5KCdhcGkvZ2V0X25vbmNlLz9jb250cm9sbGVyPXVzZXImbWV0aG9kPXJlZ2lzdGVyJylcbiAgICB9XG5cbiAgICByZWdpc3Rlcih1c2VybmFtZSwgZW1haWwsIG5vbmNlLCBkaXNwbGF5X25hbWUpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLnF1ZXJ5KCdhcGkvdXNlci9yZWdpc3Rlci8/dXNlcm5hbWU9JyArIHVzZXJuYW1lICsgJyZlbWFpbD0nICsgZW1haWwgKyAnJm5vbmNlPScgKyBub25jZSArICcmZGlzcGxheV9uYW1lPScgKyBkaXNwbGF5X25hbWUpXG4gICAgfVxuXG4gICAgbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5xdWVyeSgnYXBpL3VzZXIvZ2VuZXJhdGVfYXV0aF9jb29raWUvP3VzZXJuYW1lPScgKyB1c2VybmFtZSArICcmcGFzc3dvcmQ9JyArIHBhc3N3b3JkKVxuICAgIH1cblxuLypcbiAgICBmYkxvZ2luKGFjY2Vzc190b2tlbik6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIucXVlcnkoJ2FwaS91c2VyL2ZiX2Nvbm5lY3QvP2FjY2Vzc190b2tlbj0nICsgYWNjZXNzX3Rva2VuKVxuICAgIH1cbiovXG5cbiAgICBpc0F1dGhvcml6ZWQoY29va2llKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5xdWVyeSgnYXBpL3VzZXIvdmFsaWRhdGVfYXV0aF9jb29raWUvP2Nvb2tpZT0nICsgY29va2llKVxuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKHVzZXJJZCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIucXVlcnkoJ2FwaS91c2VyL2dldF91c2VyaW5mby8/dXNlcl9pZD0nICsgdXNlcklkKVxuICAgIH1cblxuICAgIGdldFVzZXJBdmF0YXIodXNlcklkLCB0eXBlKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5xdWVyeSgnYXBpL3VzZXIvZ2V0X2F2YXRhci8/dXNlcl9pZD0nICsgdXNlcklkICsgJyZ0eXBlPScgKyB0eXBlKVxuICAgIH1cblxuICAgIHJlc2V0UGFzc3dvcmQodXNlcm5hbWUpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLnF1ZXJ5KCdhcGkvdXNlci9yZXRyaWV2ZV9wYXNzd29yZC8/dXNlcl9sb2dpbj0nICsgdXNlcm5hbWUpXG4gICAgfVxufTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==