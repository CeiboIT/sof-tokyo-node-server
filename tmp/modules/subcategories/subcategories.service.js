/// <reference path="../../../typings/tsd.d.ts" />
/// <reference path="../connection/connection.service.ts" />
var Q = require("q");
var connection = require('../connection/connection.service');
var SubcategoriesService = (function () {
    function SubcategoriesService() {
        this.db = connection.service;
    }
    SubcategoriesService.prototype.getSubcategoriesList = function () {
        var _listPromise = Q.defer();
        this.db.query_db("SELECT DISTINCT meta_key, meta_value FROM wp2_postmeta WHERE meta_key LIKE 'sofbackend__sof_work_meta__category_%'").then(function (data) {
            _listPromise.resolve(data);
        });
        return _listPromise.promise;
    };
    SubcategoriesService.prototype.getSubcategoryByProductId = function (productId) {
        var _promise = Q.defer();
        this.db.query_db("SELECT meta_key, meta_value FROM wp2_postmeta WHERE post_id=" + productId + " AND meta_key LIKE 'sofbackend__sof_work_meta__category_%'").then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    return SubcategoriesService;
})();
exports.SubcategoriesService = SubcategoriesService;
;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvc3ViY2F0ZWdvcmllcy9zdWJjYXRlZ29yaWVzLnNlcnZpY2UudHMiXSwibmFtZXMiOlsiU3ViY2F0ZWdvcmllc1NlcnZpY2UiLCJTdWJjYXRlZ29yaWVzU2VydmljZS5jb25zdHJ1Y3RvciIsIlN1YmNhdGVnb3JpZXNTZXJ2aWNlLmdldFN1YmNhdGVnb3JpZXNMaXN0IiwiU3ViY2F0ZWdvcmllc1NlcnZpY2UuZ2V0U3ViY2F0ZWdvcnlCeVByb2R1Y3RJZCJdLCJtYXBwaW5ncyI6IkFBQUEsa0RBQWtEO0FBQ2xELDREQUE0RDtBQUU1RCxJQUFPLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztBQUN4QixJQUFPLFVBQVUsV0FBVyxrQ0FBa0MsQ0FBQyxDQUFBO0FBUy9ELElBQWEsb0JBQW9CO0lBQWpDQSxTQUFhQSxvQkFBb0JBO1FBQ3JCQyxPQUFFQSxHQUFHQSxVQUFVQSxDQUFDQSxPQUFPQSxDQUFDQTtJQW9CcENBLENBQUNBO0lBbEJHRCxtREFBb0JBLEdBQXBCQTtRQUNJRSxJQUFJQSxZQUFZQSxHQUFHQSxDQUFDQSxDQUFDQSxLQUFLQSxFQUFFQSxDQUFDQTtRQUM3QkEsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsUUFBUUEsQ0FBQ0Esb0hBQW9IQSxDQUFDQSxDQUNqSUEsSUFBSUEsQ0FBQ0EsVUFBQ0EsSUFBSUE7WUFDUEEsWUFBWUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDL0JBLENBQUNBLENBQUNBLENBQUFBO1FBQ05BLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBLE9BQU9BLENBQUNBO0lBQ2hDQSxDQUFDQTtJQUVERix3REFBeUJBLEdBQXpCQSxVQUEwQkEsU0FBU0E7UUFDL0JHLElBQUlBLFFBQVFBLEdBQUdBLENBQUNBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBO1FBQ3pCQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxRQUFRQSxDQUFDQSw4REFBOERBLEdBQUdBLFNBQVNBLEdBQzFFQSw0REFBNERBLENBQUNBLENBQ3pFQSxJQUFJQSxDQUFDQSxVQUFDQSxJQUFJQTtZQUNQQSxRQUFRQSxDQUFDQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUMzQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQUE7UUFDTkEsTUFBTUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7SUFDNUJBLENBQUNBO0lBQ0xILDJCQUFDQTtBQUFEQSxDQXJCQSxBQXFCQ0EsSUFBQTtBQXJCWSw0QkFBb0IsR0FBcEIsb0JBcUJaLENBQUE7QUFBQSxDQUFDIiwiZmlsZSI6Im1vZHVsZXMvc3ViY2F0ZWdvcmllcy9zdWJjYXRlZ29yaWVzLnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29ubmVjdGlvbi9jb25uZWN0aW9uLnNlcnZpY2UudHNcIiAvPlxuXG5pbXBvcnQgUSA9IHJlcXVpcmUoXCJxXCIpO1xuaW1wb3J0IGNvbm5lY3Rpb24gPSByZXF1aXJlKCcuLi9jb25uZWN0aW9uL2Nvbm5lY3Rpb24uc2VydmljZScpXG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN1YmNhdGVnb3JpZXNTZXJ2aWNlIHtcbiAgICAvLyBHRVRcbiAgICBnZXRTdWJjYXRlZ29yaWVzTGlzdCgpOiBRLklQcm9taXNlPHt9PjtcbiAgICBnZXRTdWJjYXRlZ29yeUJ5UHJvZHVjdElkKHByb2R1Y3RJZCk6IFEuSVByb21pc2U8e30+O1xufVxuXG5cbmV4cG9ydCBjbGFzcyBTdWJjYXRlZ29yaWVzU2VydmljZSBpbXBsZW1lbnRzIElTdWJjYXRlZ29yaWVzU2VydmljZSB7XG4gICAgcHJpdmF0ZSBkYiA9IGNvbm5lY3Rpb24uc2VydmljZTtcblxuICAgIGdldFN1YmNhdGVnb3JpZXNMaXN0KCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9saXN0UHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihcIlNFTEVDVCBESVNUSU5DVCBtZXRhX2tleSwgbWV0YV92YWx1ZSBGUk9NIHdwMl9wb3N0bWV0YSBXSEVSRSBtZXRhX2tleSBMSUtFICdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19jYXRlZ29yeV8lJ1wiKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBfbGlzdFByb21pc2UucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHJldHVybiBfbGlzdFByb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbiAgICBnZXRTdWJjYXRlZ29yeUJ5UHJvZHVjdElkKHByb2R1Y3RJZCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9wcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICB0aGlzLmRiLnF1ZXJ5X2RiKFwiU0VMRUNUIG1ldGFfa2V5LCBtZXRhX3ZhbHVlIEZST00gd3AyX3Bvc3RtZXRhIFdIRVJFIHBvc3RfaWQ9XCIgKyBwcm9kdWN0SWQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgIFwiIEFORCBtZXRhX2tleSBMSUtFICdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19jYXRlZ29yeV8lJ1wiKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBfcHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIF9wcm9taXNlLnByb21pc2U7XG4gICAgfVxufTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==