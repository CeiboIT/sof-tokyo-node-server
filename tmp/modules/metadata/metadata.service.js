/// <reference path="../../../typings/tsd.d.ts" />
/// <reference path="../connection/connection.service.ts" />
var Q = require("q");
var connection = require('../connection/connection.service');
var _ = require('lodash');
var MetadataService = (function () {
    function MetadataService() {
        this.db = connection.service;
    }
    MetadataService.prototype.getSubcategoriesList = function () {
        var _this = this;
        var _promise = Q.defer();
        this.getSubcategories0List().then(function (subcat0) {
            _this.getSubcategories1List().then(function (subcat1) {
                var _groupedSubcategories = _.groupBy(subcat1, 'parent');
                subcat0.forEach(function (parentCategory) {
                    parentCategory['childs'] = _groupedSubcategories[parentCategory['id']];
                });
                _promise.resolve(subcat0);
            });
        });
        return _promise.promise;
    };
    MetadataService.prototype.getSubcategories0List = function () {
        var _listPromise = Q.defer();
        var subcategories0 = [
            { id: 1, name: 'tops', trad: 'トップス' },
            { id: 2, name: 'jacket_outer', trad: 'ジャケット/アウター' },
            { id: 3, name: 'pants', trad: 'パンツ' },
            { id: 4, name: 'skirt', trad: 'スカート' },
            { id: 5, name: 'onepiece', trad: 'ワンピース/ドレス' },
            { id: 6, name: 'setup', trad: 'セットアップ' },
            { id: 7, name: 'total_code', trad: 'トータルコーデ' },
            { id: 8, name: 'shoes', trad: 'シューズ' },
            { id: 9, name: 'goods', trad: 'ファッショングッズ' }
        ];
        _listPromise.resolve(subcategories0);
        /*
                this.db.query_db("SELECT DISTINCT meta_value AS value FROM wp2_postmeta WHERE meta_key = 'sofbackend__sof_work_meta__category_0'")
                    .then((data) => {
                        _listPromise.resolve(data);
                    })
        */
        return _listPromise.promise;
    };
    MetadataService.prototype.getSubcategories1List = function () {
        var _listPromise = Q.defer();
        var subcategories1 = [
            { id: 1, parent: 1, name: 't_shirt', trad: 'Tシャツ/カットソー' },
            { id: 2, parent: 1, name: 'shirt', trad: 'シャツ/ブラウス' },
            { id: 3, parent: 1, name: 'proshirt', trad: 'ポロシャツ' },
            { id: 4, parent: 1, name: 'knit', trad: 'ニット/セーター' },
            { id: 5, parent: 1, name: 'vest', trad: 'ベスト' },
            { id: 6, parent: 1, name: 'parka', trad: 'パーカー' },
            { id: 7, parent: 1, name: 'sweat', trad: 'スウェット' },
            { id: 8, parent: 1, name: 'cardigan', trad: 'カーディガン' },
            { id: 9, parent: 1, name: 'tank_tops', trad: 'タンクトップ' },
            { id: 10, parent: 1, name: 'other_tops', trad: 'その他のトップス' },
            { id: 11, parent: 2, name: 'jacket', trad: 'ジャケット' },
            { id: 12, parent: 2, name: 'leather_jacket', trad: 'レザージャケット' },
            { id: 13, parent: 2, name: 'military_jacket', trad: 'ミリタリージャケット' },
            { id: 14, parent: 2, name: 'blouson', trad: 'ブルゾン' },
            { id: 15, parent: 2, name: 'chester_coat', trad: 'チェスターコート' },
            { id: 16, parent: 2, name: 'trench_coat', trad: 'トレンチコート' },
            { id: 17, parent: 2, name: 'stand-collar_coat', trad: 'ステンカラーコート' },
            { id: 18, parent: 2, name: 'mods_coat', trad: 'モッズコート' },
            { id: 19, parent: 2, name: 'pea_coat', trad: 'ピーコート' },
            { id: 20, parent: 2, name: 'duffle_coat', trad: 'ダッフルコート' },
            { id: 21, parent: 2, name: 'down_jacket', trad: 'ダウンジャケット' },
            { id: 22, parent: 2, name: 'other_jacket_outer', trad: 'その他のジャケット/アウター' },
            { id: 23, parent: 3, name: 'pants', trad: 'パンツ' },
            { id: 24, parent: 3, name: 'wide_pants', trad: 'ワイドパンツ' },
            { id: 25, parent: 3, name: 'slim_pants', trad: 'スリムパンツ' },
            { id: 26, parent: 3, name: 'slax', trad: 'スラックス' },
            { id: 27, parent: 3, name: 'denim', trad: 'デニム' },
            { id: 28, parent: 3, name: 'short_pants', trad: 'ショートパンツ' },
            { id: 29, parent: 3, name: 'leather_pants', trad: 'レザーパンツ' },
            { id: 30, parent: 3, name: 'chino_pants', trad: 'チノパンツ' },
            { id: 31, parent: 3, name: 'other_pants', trad: 'その他のパンツ' },
            { id: 32, parent: 4, name: 'skirt', trad: 'スカート' },
            { id: 33, parent: 4, name: 'tight_skirt', trad: 'タイトスカート' },
            { id: 34, parent: 4, name: 'long_skirt', trad: 'ロングスカート' },
            { id: 35, parent: 4, name: 'flare_skirt', trad: 'フレアスカート' },
            { id: 36, parent: 4, name: 'peplum_skirt', trad: 'ペプラムスカート' },
            { id: 37, parent: 4, name: 'pleats_skirt', trad: 'プリーツスカート' },
            { id: 38, parent: 4, name: 'culottes_skirt', trad: 'キュロットスカート' },
            { id: 39, parent: 4, name: 'gored_skirt', trad: 'ゴアードスカート' },
            { id: 40, parent: 4, name: 'tiered_skirt', trad: 'ティアードスカート' },
            { id: 41, parent: 4, name: 'other_skirt', trad: 'その他のスカート' },
            { id: 42, parent: 5, name: 'onepiece', trad: 'ワンピース' },
            { id: 43, parent: 5, name: 'shirt_onepiece', trad: 'シャツワンピース' },
            { id: 44, parent: 5, name: 'maxi_onepiece', trad: 'マキシワンピース' },
            { id: 45, parent: 5, name: 'tunic', trad: 'チュニック' },
            { id: 46, parent: 5, name: 'dress', trad: 'ドレス' },
            { id: 47, parent: 5, name: 'wedding_dress', trad: 'ウェディングドレス' },
            { id: 48, parent: 5, name: 'other_onepiece', trad: 'その他のワンピース/ドレス' },
            { id: 49, parent: 6, name: 'setup', trad: 'セットアップ' },
            { id: 50, parent: 7, name: 'total_code', trad: 'トータルコーデ' },
            { id: 51, parent: 8, name: 'sneaker', trad: 'スニーカー' },
            { id: 52, parent: 8, name: 'dress_shoes', trad: 'ドレスシューズ' },
            { id: 53, parent: 8, name: 'pumps', trad: 'パンプス' },
            { id: 54, parent: 8, name: 'boots', trad: 'ブーツ' },
            { id: 55, parent: 8, name: 'long_boots', trad: 'ロングブーツ' },
            { id: 56, parent: 8, name: 'sandal', trad: 'サンダル' },
            { id: 57, parent: 8, name: 'rain_shoes', trad: 'レインシューズ' },
            { id: 58, parent: 8, name: 'other_shoes', trad: 'その他のシューズ' },
            { id: 59, parent: 9, name: 'hat', trad: '帽子' },
            { id: 60, parent: 9, name: 'watch', trad: '時計' },
            { id: 61, parent: 9, name: 'bag', trad: 'バッグ' },
            { id: 62, parent: 9, name: 'totes_bag', trad: 'トートバッグ' },
            { id: 63, parent: 9, name: 'backpack', trad: 'バックパック/リュック' },
            { id: 64, parent: 9, name: 'boston_bag', trad: 'ボストンバッグ' },
            { id: 65, parent: 9, name: 'clutch_bag', trad: 'クラッチバッグ' },
            { id: 66, parent: 9, name: 'west_bag', trad: 'ウエストバッグ' },
            { id: 67, parent: 9, name: 'jewelry', trad: 'ジュエリー' }
        ];
        _listPromise.resolve(subcategories1);
        /*
                this.db.query_db("SELECT DISTINCT meta_value AS value FROM wp2_postmeta WHERE meta_key = 'sofbackend__sof_work_meta__category_1'")
                    .then((data) => {
                        _listPromise.resolve(data);
                    })
        */
        return _listPromise.promise;
    };
    MetadataService.prototype.getSchoolsList = function () {
        var _listPromise = Q.defer();
        this.db.query_db("SELECT DISTINCT value FROM wp2_bp_xprofile_data WHERE field_id=4").then(function (data) {
            _listPromise.resolve(data);
        });
        return _listPromise.promise;
    };
    MetadataService.prototype.getStylesList = function () {
        var _listPromise = Q.defer();
        var styles = [
            { id: 1, name: "simple", trad: "シンプル" },
            { id: 2, name: "casual", trad: "カジュアル" },
            { id: 3, name: "feminine", trad: "フェミニン" },
            { id: 4, name: "mode", trad: "モード" },
            { id: 5, name: "street", trad: "ストリート" },
            { id: 6, name: "art", trad: "アート" },
            { id: 7, name: "elegance", trad: "エレガンス" },
            { id: 8, name: "classic", trad: "クラシック" },
            { id: 9, name: "sporty", trad: "スポーティ" },
            { id: 10, name: "oriental", trad: "オリエンタル" },
            { id: 11, name: "decora", trad: "デコラ" },
            { id: 12, name: "hippy_country", trad: "ヒッピー/カントリー" },
            { id: 13, name: "x_gender", trad: "クロスジェンダー" },
            { id: 14, name: "manish", trad: "マニッシュ" },
            { id: 15, name: "preppy", trad: "フレッピー" },
            { id: 16, name: "military", trad: "ミリタリー" },
            { id: 17, name: "rock", trad: "ロック" },
            { id: 18, name: "lolita", trad: "ロリータ" },
            { id: 19, name: "sexy_dandy", trad: "セクシィ/ダンディ" },
            { id: 20, name: "ethnic", trad: "エスニック" },
            { id: 21, name: "future", trad: "フューチャー" },
            { id: 22, name: "other", trad: "該当なし" }
        ];
        _listPromise.resolve(styles);
        /*
                this.db.query_db("SELECT DISTINCT meta_value AS value FROM wp2_postmeta WHERE meta_key = 'sofbackend__sof_work_meta__style'")
                    .then((data) => {
                        _listPromise.resolve(data);
                    })
        */
        return _listPromise.promise;
    };
    MetadataService.prototype.getSchoolByMemberId = function (memberId) {
        var _promise = Q.defer();
        this.db.query_db("SELECT value FROM wp2_bp_xprofile_data WHERE field_id=4 AND user_id=" + memberId).then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    MetadataService.prototype.getProductMetadata = function (productId) {
        var _this = this;
        var _promise = Q.defer();
        var getMetadata = Q.defer();
        var getSubcategories0 = Q.defer();
        var getSubcategories1 = Q.defer();
        var getStyles = Q.defer();
        var _otherPromises = [getMetadata.promise, getSubcategories0.promise, getSubcategories1.promise, getStyles.promise];
        var query = "(SELECT A.meta_key AS field, A.meta_value AS value " + "FROM wp2_postmeta A " + "WHERE A.post_id=" + productId + " AND A.meta_key <> 'visit') " + "UNION " + "(SELECT B.meta_key AS field, COUNT(DISTINCT B.meta_value) AS value " + "FROM wp2_postmeta B " + "WHERE B.meta_key = 'visit' AND B.post_id=" + productId + ")";
        this.db.query_db(query).then(function (data) {
            var dataJson = JSON.parse(JSON.stringify(data));
            getMetadata.resolve(data);
            // get subcategories0 translations
            _this.getSubcategories0List().then(function (subcategories0) {
                getSubcategories0.resolve(data);
                // get subcategories1 translations
                _this.getSubcategories1List().then(function (subcategories1) {
                    getSubcategories1.resolve(data);
                    // get styles translations
                    _this.getStylesList().then(function (styles) {
                        getStyles.resolve(data);
                        // populate translations
                        _.forEach(dataJson, function (value, key) {
                            //console.log("record");
                            if (value.field == 'sofbackend__sof_work_meta__category_0') {
                                value.trad = _.result(_.find(subcategories0, function (obj) {
                                    return obj.name === value.value;
                                }), 'trad');
                            }
                            ;
                            if (value.field == 'sofbackend__sof_work_meta__category_1') {
                                value.trad = _.result(_.find(subcategories1, function (obj) {
                                    return obj.name === value.value;
                                }), 'trad');
                            }
                            ;
                            if (value.field == 'sofbackend__sof_work_meta__style') {
                                value.trad = _.result(_.find(styles, function (obj) {
                                    return obj.name === value.value;
                                }), 'trad');
                            }
                            ;
                        });
                    });
                });
            });
            Q.all(_otherPromises).then(function (values) {
                _promise.resolve(dataJson);
            });
        });
        return _promise.promise;
    };
    MetadataService.prototype.createProductLike = function (productId) {
        var _promise = Q.defer();
        this.db.query_db("UPDATE wp2_postmeta SET meta_value = meta_value + 1 WHERE meta_key='_item_likes' AND post_id=" + productId).then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    MetadataService.prototype.getProductVisits = function (productId) {
        var _promise = Q.defer();
        this.db.query_db("SELECT id AS post_id, count AS visits FROM wp2_post_views WHERE id=" + productId).then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    MetadataService.prototype.createProductImage = function (productId, field, value) {
        var _promise = Q.defer();
        this.db.query_db("INSERT INTO wp2_postmeta (meta_id, post_id, meta_key, meta_value) VALUES (NULL," + productId + ",'" + field + "','" + value + "')").then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    return MetadataService;
})();
exports.MetadataService = MetadataService;
;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvbWV0YWRhdGEvbWV0YWRhdGEuc2VydmljZS50cyJdLCJuYW1lcyI6WyJNZXRhZGF0YVNlcnZpY2UiLCJNZXRhZGF0YVNlcnZpY2UuY29uc3RydWN0b3IiLCJNZXRhZGF0YVNlcnZpY2UuZ2V0U3ViY2F0ZWdvcmllc0xpc3QiLCJNZXRhZGF0YVNlcnZpY2UuZ2V0U3ViY2F0ZWdvcmllczBMaXN0IiwiTWV0YWRhdGFTZXJ2aWNlLmdldFN1YmNhdGVnb3JpZXMxTGlzdCIsIk1ldGFkYXRhU2VydmljZS5nZXRTY2hvb2xzTGlzdCIsIk1ldGFkYXRhU2VydmljZS5nZXRTdHlsZXNMaXN0IiwiTWV0YWRhdGFTZXJ2aWNlLmdldFNjaG9vbEJ5TWVtYmVySWQiLCJNZXRhZGF0YVNlcnZpY2UuZ2V0UHJvZHVjdE1ldGFkYXRhIiwiTWV0YWRhdGFTZXJ2aWNlLmNyZWF0ZVByb2R1Y3RMaWtlIiwiTWV0YWRhdGFTZXJ2aWNlLmdldFByb2R1Y3RWaXNpdHMiLCJNZXRhZGF0YVNlcnZpY2UuY3JlYXRlUHJvZHVjdEltYWdlIl0sIm1hcHBpbmdzIjoiQUFBQSxrREFBa0Q7QUFDbEQsNERBQTREO0FBRTVELElBQU8sQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO0FBQ3hCLElBQU8sVUFBVSxXQUFXLGtDQUFrQyxDQUFDLENBQUE7QUFFL0QsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBbUIxQixJQUFhLGVBQWU7SUFBNUJBLFNBQWFBLGVBQWVBO1FBQ2hCQyxPQUFFQSxHQUFHQSxVQUFVQSxDQUFDQSxPQUFPQSxDQUFDQTtJQXdScENBLENBQUNBO0lBdFJHRCw4Q0FBb0JBLEdBQXBCQTtRQUFBRSxpQkFtQkNBO1FBbEJHQSxJQUFJQSxRQUFRQSxHQUFHQSxDQUFDQSxDQUFDQSxLQUFLQSxFQUFFQSxDQUFDQTtRQUV6QkEsSUFBSUEsQ0FBQ0EscUJBQXFCQSxFQUFFQSxDQUN2QkEsSUFBSUEsQ0FBQ0EsVUFBQ0EsT0FBY0E7WUFFakJB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QUNBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ25EQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxNQUFNQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFDQTtZQUNsREEsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBRUEsSUFBSUEsRUFBRUEsS0FBS0EsRUFBQ0E7WUFDN0NBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUNBO1lBQy9DQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUNoREEsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBQ0E7WUFDcERBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFdBQVdBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUNBO1lBQ3JEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFDQTtZQUN6REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7WUFDbERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGdCQUFnQkEsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBQ0E7WUFDN0RBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGlCQUFpQkEsRUFBRUEsSUFBSUEsRUFBRUEsWUFBWUEsRUFBQ0E7WUFDaEVBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUNBO1lBQ2xEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxjQUFjQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFDQTtZQUMzREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBQ0E7WUFDekRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLG1CQUFtQkEsRUFBRUEsSUFBSUEsRUFBRUEsV0FBV0EsRUFBQ0E7WUFDakVBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFdBQVdBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUNBO1lBQ3REQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUNwREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBQ0E7WUFDekRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGFBQWFBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUNBO1lBQzFEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxvQkFBb0JBLEVBQUVBLElBQUlBLEVBQUVBLGdCQUFnQkEsRUFBQ0E7WUFDdkVBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLEtBQUtBLEVBQUNBO1lBQy9DQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFDQTtZQUN2REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsWUFBWUEsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBQ0E7WUFDdkRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ2hEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFFQSxJQUFJQSxFQUFFQSxLQUFLQSxFQUFDQTtZQUMvQ0EsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBQ0E7WUFDekRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGVBQWVBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUNBO1lBQzFEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxhQUFhQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUN2REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBQ0E7WUFDekRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUNBO1lBQ2hEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxhQUFhQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUN6REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsWUFBWUEsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBQ0E7WUFDeERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGFBQWFBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUNBO1lBQ3pEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxjQUFjQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFDQTtZQUMzREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsY0FBY0EsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBQ0E7WUFDM0RBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGdCQUFnQkEsRUFBRUEsSUFBSUEsRUFBRUEsV0FBV0EsRUFBQ0E7WUFDOURBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGFBQWFBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUNBO1lBQzFEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxjQUFjQSxFQUFFQSxJQUFJQSxFQUFFQSxXQUFXQSxFQUFDQTtZQUM1REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBQ0E7WUFDMURBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ3BEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxnQkFBZ0JBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUNBO1lBQzdEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxlQUFlQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFDQTtZQUM1REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7WUFDakRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLEtBQUtBLEVBQUNBO1lBQy9DQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxlQUFlQSxFQUFFQSxJQUFJQSxFQUFFQSxXQUFXQSxFQUFDQTtZQUM3REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsZ0JBQWdCQSxFQUFFQSxJQUFJQSxFQUFFQSxlQUFlQSxFQUFDQTtZQUNsRUEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBQ0E7WUFDbERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFlBQVlBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUNBO1lBQ3hEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUNuREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBQ0E7WUFDekRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUNBO1lBQ2hEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFFQSxJQUFJQSxFQUFFQSxLQUFLQSxFQUFDQTtZQUMvQ0EsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsWUFBWUEsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBQ0E7WUFDdkRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUNBO1lBQ2pEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUN4REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBQ0E7WUFDMURBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLEtBQUtBLEVBQUVBLElBQUlBLEVBQUVBLElBQUlBLEVBQUNBO1lBQzVDQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFFQSxJQUFJQSxFQUFFQSxJQUFJQSxFQUFDQTtZQUM5Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsS0FBS0EsRUFBRUEsSUFBSUEsRUFBRUEsS0FBS0EsRUFBQ0E7WUFDN0NBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFdBQVdBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUNBO1lBQ3REQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFFQSxJQUFJQSxFQUFFQSxhQUFhQSxFQUFDQTtZQUMxREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsWUFBWUEsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBQ0E7WUFDeERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFlBQVlBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUNBO1lBQ3hEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUN0REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7U0FDdERBLENBQUNBO1FBQ0ZBLFlBQVlBLENBQUNBLE9BQU9BLENBQUNBLGNBQWNBLENBQUNBLENBQUNBO1FBQzdDQSxBQU1RQTs7Ozs7VUFETkE7UUFDTUEsTUFBTUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7SUFDaENBLENBQUNBO0lBRURKLHdDQUFjQSxHQUFkQTtRQUNJSyxJQUFJQSxZQUFZQSxHQUFHQSxDQUFDQSxDQUFDQSxLQUFLQSxFQUFFQSxDQUFDQTtRQUM3QkEsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsUUFBUUEsQ0FBQ0Esa0VBQWtFQSxDQUFDQSxDQUMvRUEsSUFBSUEsQ0FBQ0EsVUFBQ0EsSUFBSUE7WUFDUEEsWUFBWUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDL0JBLENBQUNBLENBQUNBLENBQUFBO1FBQ05BLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBLE9BQU9BLENBQUNBO0lBQ2hDQSxDQUFDQTtJQUVETCx1Q0FBYUEsR0FBYkE7UUFDSU0sSUFBSUEsWUFBWUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0E7UUFFN0JBLElBQUlBLE1BQU1BLEdBQUdBO1lBQ1RBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUNBO1lBQ3JDQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUN0Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7WUFDeENBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUVBLElBQUlBLEVBQUVBLEtBQUtBLEVBQUNBO1lBQ2xDQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUN0Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsS0FBS0EsRUFBRUEsSUFBSUEsRUFBRUEsS0FBS0EsRUFBQ0E7WUFDakNBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ3hDQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUN2Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7WUFDdENBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUNBO1lBQzFDQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFFQSxJQUFJQSxFQUFFQSxLQUFLQSxFQUFDQTtZQUNyQ0EsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsSUFBSUEsRUFBRUEsZUFBZUEsRUFBRUEsSUFBSUEsRUFBRUEsWUFBWUEsRUFBQ0E7WUFDbkRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUNBO1lBQzVDQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUN2Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7WUFDdkNBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ3pDQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxJQUFJ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QUF5UkNBLElBQUE7QUF6UlksdUJBQWUsR0FBZixlQXlSWixDQUFBO0FBQUEsQ0FBQyIsImZpbGUiOiJtb2R1bGVzL21ldGFkYXRhL21ldGFkYXRhLnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vY29ubmVjdGlvbi9jb25uZWN0aW9uLnNlcnZpY2UudHNcIiAvPlxuXG5pbXBvcnQgUSA9IHJlcXVpcmUoXCJxXCIpO1xuaW1wb3J0IGNvbm5lY3Rpb24gPSByZXF1aXJlKCcuLi9jb25uZWN0aW9uL2Nvbm5lY3Rpb24uc2VydmljZScpXG5cbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1ldGFkYXRhU2VydmljZSB7XG4gICAgLy8gR0VUXG4gICAgZ2V0U3ViY2F0ZWdvcmllc0xpc3QoKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0U3ViY2F0ZWdvcmllczBMaXN0KCk6IFEuSVByb21pc2U8e30+O1xuICAgIGdldFN1YmNhdGVnb3JpZXMxTGlzdCgpOiBRLklQcm9taXNlPHt9PjtcbiAgICBnZXRTY2hvb2xzTGlzdCgpOiBRLklQcm9taXNlPHt9PjtcbiAgICBnZXRTdHlsZXNMaXN0KCk6IFEuSVByb21pc2U8e30+O1xuICAgIGdldFNjaG9vbEJ5TWVtYmVySWQobWVtYmVySWQpOiBRLklQcm9taXNlPHt9PjtcbiAgICBnZXRQcm9kdWN0TWV0YWRhdGEocHJvZHVjdElkKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0UHJvZHVjdFZpc2l0cyhwcm9kdWN0SWQpOiBRLklQcm9taXNlPHt9PjtcblxuICAgIC8vIFBPU1RcbiAgICBjcmVhdGVQcm9kdWN0TGlrZShwcm9kdWN0SWQpOiBRLklQcm9taXNlPHt9PjtcbiAgICBjcmVhdGVQcm9kdWN0SW1hZ2UocHJvZHVjdElkLCBmaWVsZCwgdmFsdWUpOiBRLklQcm9taXNlPHt9Pjtcbn1cblxuXG5leHBvcnQgY2xhc3MgTWV0YWRhdGFTZXJ2aWNlIGltcGxlbWVudHMgSU1ldGFkYXRhU2VydmljZSB7XG4gICAgcHJpdmF0ZSBkYiA9IGNvbm5lY3Rpb24uc2VydmljZTtcblxuICAgIGdldFN1YmNhdGVnb3JpZXNMaXN0KCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9wcm9taXNlID0gUS5kZWZlcigpO1xuXG4gICAgICAgIHRoaXMuZ2V0U3ViY2F0ZWdvcmllczBMaXN0KClcbiAgICAgICAgICAgIC50aGVuKChzdWJjYXQwOiBhbnlbXSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTdWJjYXRlZ29yaWVzMUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoc3ViY2F0MTogYW55W10pID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIOKAi19ncm91cGVkU3ViY2F0ZWdvcmllcyA9IF/igIsuZ3JvdXBCeShzdWJjYXQxLCAncGFyZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXQwLmZvckVhY2goKHBhcmVudENhdGVnb3J5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Q2F0ZWdvcnlbJ2NoaWxkcyddID0gX2dyb3VwZWRTdWJjYXRlZ29yaWVzW3BhcmVudENhdGVnb3J5WydpZCddXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfcHJvbWlzZS5yZXNvbHZlKHN1YmNhdDApO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcblxuICAgICAgICByZXR1cm4gX3Byb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbiAgICBnZXRTdWJjYXRlZ29yaWVzMExpc3QoKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX2xpc3RQcm9taXNlID0gUS5kZWZlcigpO1xuXG4gICAgICAgIHZhciBzdWJjYXRlZ29yaWVzMCA9IFtcbiAgICAgICAgICAgIHtpZDogMSwgbmFtZTogJ3RvcHMnLCB0cmFkOiAn44OI44OD44OX44K5J30sXG4gICAgICAgICAgICB7aWQ6IDIsIG5hbWU6ICdqYWNrZXRfb3V0ZXInLCB0cmFkOiAn44K444Oj44Kx44OD44OIL+OCouOCpuOCv+ODvCd9LFxuICAgICAgICAgICAge2lkOiAzLCBuYW1lOiAncGFudHMnLCB0cmFkOiAn44OR44Oz44OEJ30sXG4gICAgICAgICAgICB7aWQ6IDQsIG5hbWU6ICdza2lydCcsIHRyYWQ6ICfjgrnjgqvjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogNSwgbmFtZTogJ29uZXBpZWNlJywgdHJhZDogJ+ODr+ODs+ODlOODvOOCuS/jg4njg6zjgrknfSxcbiAgICAgICAgICAgIHtpZDogNiwgbmFtZTogJ3NldHVwJywgdHJhZDogJ+OCu+ODg+ODiOOCouODg+ODlyd9LFxuICAgICAgICAgICAge2lkOiA3LCBuYW1lOiAndG90YWxfY29kZScsIHRyYWQ6ICfjg4jjg7zjgr/jg6vjgrPjg7zjg4cnfSxcbiAgICAgICAgICAgIHtpZDogOCwgbmFtZTogJ3Nob2VzJywgdHJhZDogJ+OCt+ODpeODvOOCuid9LFxuICAgICAgICAgICAge2lkOiA5LCBuYW1lOiAnZ29vZHMnLCB0cmFkOiAn44OV44Kh44OD44K344On44Oz44Kw44OD44K6J31cbiAgICAgICAgXTtcbiAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUoc3ViY2F0ZWdvcmllczApO1xuLypcbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihcIlNFTEVDVCBESVNUSU5DVCBtZXRhX3ZhbHVlIEFTIHZhbHVlIEZST00gd3AyX3Bvc3RtZXRhIFdIRVJFIG1ldGFfa2V5ID0gJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX2NhdGVnb3J5XzAnXCIpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIF9saXN0UHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSlcbiovXG4gICAgICAgIHJldHVybiBfbGlzdFByb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbiAgICBnZXRTdWJjYXRlZ29yaWVzMUxpc3QoKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX2xpc3RQcm9taXNlID0gUS5kZWZlcigpO1xuXG4gICAgICAgIHZhciBzdWJjYXRlZ29yaWVzMSA9IFtcbiAgICAgICAgICAgIHtpZDogMSwgcGFyZW50OiAxLCBuYW1lOiAndF9zaGlydCcsIHRyYWQ6ICdU44K344Oj44OEL+OCq+ODg+ODiOOCveODvCd9LFxuICAgICAgICAgICAge2lkOiAyLCBwYXJlbnQ6IDEsIG5hbWU6ICdzaGlydCcsIHRyYWQ6ICfjgrfjg6Pjg4Qv44OW44Op44Km44K5J30sXG4gICAgICAgICAgICB7aWQ6IDMsIHBhcmVudDogMSwgbmFtZTogJ3Byb3NoaXJ0JywgdHJhZDogJ+ODneODreOCt+ODo+ODhCd9LFxuICAgICAgICAgICAge2lkOiA0LCBwYXJlbnQ6IDEsIG5hbWU6ICdrbml0JywgdHJhZDogJ+ODi+ODg+ODiC/jgrvjg7zjgr/jg7wnfSxcbiAgICAgICAgICAgIHtpZDogNSwgcGFyZW50OiAxLCBuYW1lOiAndmVzdCcsIHRyYWQ6ICfjg5njgrnjg4gnfSxcbiAgICAgICAgICAgIHtpZDogNiwgcGFyZW50OiAxLCBuYW1lOiAncGFya2EnLCB0cmFkOiAn44OR44O844Kr44O8J30sXG4gICAgICAgICAgICB7aWQ6IDcsIHBhcmVudDogMSwgbmFtZTogJ3N3ZWF0JywgdHJhZDogJ+OCueOCpuOCp+ODg+ODiCd9LFxuICAgICAgICAgICAge2lkOiA4LCBwYXJlbnQ6IDEsIG5hbWU6ICdjYXJkaWdhbicsIHRyYWQ6ICfjgqvjg7zjg4fjgqPjgqzjg7MnfSxcbiAgICAgICAgICAgIHtpZDogOSwgcGFyZW50OiAxLCBuYW1lOiAndGFua190b3BzJywgdHJhZDogJ+OCv+ODs+OCr+ODiOODg+ODlyd9LFxuICAgICAgICAgICAge2lkOiAxMCwgcGFyZW50OiAxLCBuYW1lOiAnb3RoZXJfdG9wcycsIHRyYWQ6ICfjgZ3jga7ku5bjga7jg4jjg4Pjg5fjgrknfSxcbiAgICAgICAgICAgIHtpZDogMTEsIHBhcmVudDogMiwgbmFtZTogJ2phY2tldCcsIHRyYWQ6ICfjgrjjg6PjgrHjg4Pjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMTIsIHBhcmVudDogMiwgbmFtZTogJ2xlYXRoZXJfamFja2V0JywgdHJhZDogJ+ODrOOCtuODvOOCuOODo+OCseODg+ODiCd9LFxuICAgICAgICAgICAge2lkOiAxMywgcGFyZW50OiAyLCBuYW1lOiAnbWlsaXRhcnlfamFja2V0JywgdHJhZDogJ+ODn+ODquOCv+ODquODvOOCuOODo+OCseODg+ODiCd9LFxuICAgICAgICAgICAge2lkOiAxNCwgcGFyZW50OiAyLCBuYW1lOiAnYmxvdXNvbicsIHRyYWQ6ICfjg5bjg6vjgr7jg7MnfSxcbiAgICAgICAgICAgIHtpZDogMTUsIHBhcmVudDogMiwgbmFtZTogJ2NoZXN0ZXJfY29hdCcsIHRyYWQ6ICfjg4Hjgqfjgrnjgr/jg7zjgrPjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMTYsIHBhcmVudDogMiwgbmFtZTogJ3RyZW5jaF9jb2F0JywgdHJhZDogJ+ODiOODrOODs+ODgeOCs+ODvOODiCd9LFxuICAgICAgICAgICAge2lkOiAxNywgcGFyZW50OiAyLCBuYW1lOiAnc3RhbmQtY29sbGFyX2NvYXQnLCB0cmFkOiAn44K544OG44Oz44Kr44Op44O844Kz44O844OIJ30sXG4gICAgICAgICAgICB7aWQ6IDE4LCBwYXJlbnQ6IDIsIG5hbWU6ICdtb2RzX2NvYXQnLCB0cmFkOiAn44Oi44OD44K644Kz44O844OIJ30sXG4gICAgICAgICAgICB7aWQ6IDE5LCBwYXJlbnQ6IDIsIG5hbWU6ICdwZWFfY29hdCcsIHRyYWQ6ICfjg5Tjg7zjgrPjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMjAsIHBhcmVudDogMiwgbmFtZTogJ2R1ZmZsZV9jb2F0JywgdHJhZDogJ+ODgOODg+ODleODq+OCs+ODvOODiCd9LFxuICAgICAgICAgICAge2lkOiAyMSwgcGFyZW50OiAyLCBuYW1lOiAnZG93bl9qYWNrZXQnLCB0cmFkOiAn44OA44Km44Oz44K444Oj44Kx44OD44OIJ30sXG4gICAgICAgICAgICB7aWQ6IDIyLCBwYXJlbnQ6IDIsIG5hbWU6ICdvdGhlcl9qYWNrZXRfb3V0ZXInLCB0cmFkOiAn44Gd44Gu5LuW44Gu44K444Oj44Kx44OD44OIL+OCouOCpuOCv+ODvCd9LFxuICAgICAgICAgICAge2lkOiAyMywgcGFyZW50OiAzLCBuYW1lOiAncGFudHMnLCB0cmFkOiAn44OR44Oz44OEJ30sXG4gICAgICAgICAgICB7aWQ6IDI0LCBwYXJlbnQ6IDMsIG5hbWU6ICd3aWRlX3BhbnRzJywgdHJhZDogJ+ODr+OCpOODieODkeODs+ODhCd9LFxuICAgICAgICAgICAge2lkOiAyNSwgcGFyZW50OiAzLCBuYW1lOiAnc2xpbV9wYW50cycsIHRyYWQ6ICfjgrnjg6rjg6Djg5Hjg7Pjg4QnfSxcbiAgICAgICAgICAgIHtpZDogMjYsIHBhcmVudDogMywgbmFtZTogJ3NsYXgnLCB0cmFkOiAn44K544Op44OD44Kv44K5J30sXG4gICAgICAgICAgICB7aWQ6IDI3LCBwYXJlbnQ6IDMsIG5hbWU6ICdkZW5pbScsIHRyYWQ6ICfjg4fjg4vjg6AnfSxcbiAgICAgICAgICAgIHtpZDogMjgsIHBhcmVudDogMywgbmFtZTogJ3Nob3J0X3BhbnRzJywgdHJhZDogJ+OCt+ODp+ODvOODiOODkeODs+ODhCd9LFxuICAgICAgICAgICAge2lkOiAyOSwgcGFyZW50OiAzLCBuYW1lOiAnbGVhdGhlcl9wYW50cycsIHRyYWQ6ICfjg6zjgrbjg7zjg5Hjg7Pjg4QnfSxcbiAgICAgICAgICAgIHtpZDogMzAsIHBhcmVudDogMywgbmFtZTogJ2NoaW5vX3BhbnRzJywgdHJhZDogJ+ODgeODjuODkeODs+ODhCd9LFxuICAgICAgICAgICAge2lkOiAzMSwgcGFyZW50OiAzLCBuYW1lOiAnb3RoZXJfcGFudHMnLCB0cmFkOiAn44Gd44Gu5LuW44Gu44OR44Oz44OEJ30sXG4gICAgICAgICAgICB7aWQ6IDMyLCBwYXJlbnQ6IDQsIG5hbWU6ICdza2lydCcsIHRyYWQ6ICfjgrnjgqvjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMzMsIHBhcmVudDogNCwgbmFtZTogJ3RpZ2h0X3NraXJ0JywgdHJhZDogJ+OCv+OCpOODiOOCueOCq+ODvOODiCd9LFxuICAgICAgICAgICAge2lkOiAzNCwgcGFyZW50OiA0LCBuYW1lOiAnbG9uZ19za2lydCcsIHRyYWQ6ICfjg63jg7PjgrDjgrnjgqvjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMzUsIHBhcmVudDogNCwgbmFtZTogJ2ZsYXJlX3NraXJ0JywgdHJhZDogJ+ODleODrOOCouOCueOCq+ODvOODiCd9LFxuICAgICAgICAgICAge2lkOiAzNiwgcGFyZW50OiA0LCBuYW1lOiAncGVwbHVtX3NraXJ0JywgdHJhZDogJ+ODmuODl+ODqeODoOOCueOCq+ODvOODiCd9LFxuICAgICAgICAgICAge2lkOiAzNywgcGFyZW50OiA0LCBuYW1lOiAncGxlYXRzX3NraXJ0JywgdHJhZDogJ+ODl+ODquODvOODhOOCueOCq+ODvOODiCd9LFxuICAgICAgICAgICAge2lkOiAzOCwgcGFyZW50OiA0LCBuYW1lOiAnY3Vsb3R0ZXNfc2tpcnQnLCB0cmFkOiAn44Kt44Ol44Ot44OD44OI44K544Kr44O844OIJ30sXG4gICAgICAgICAgICB7aWQ6IDM5LCBwYXJlbnQ6IDQsIG5hbWU6ICdnb3JlZF9za2lydCcsIHRyYWQ6ICfjgrTjgqLjg7zjg4njgrnjgqvjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogNDAsIHBhcmVudDogNCwgbmFtZTogJ3RpZXJlZF9za2lydCcsIHRyYWQ6ICfjg4bjgqPjgqLjg7zjg4njgrnjgqvjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogNDEsIHBhcmVudDogNCwgbmFtZTogJ290aGVyX3NraXJ0JywgdHJhZDogJ+OBneOBruS7luOBruOCueOCq+ODvOODiCd9LFxuICAgICAgICAgICAge2lkOiA0MiwgcGFyZW50OiA1LCBuYW1lOiAnb25lcGllY2UnLCB0cmFkOiAn44Ov44Oz44OU44O844K5J30sXG4gICAgICAgICAgICB7aWQ6IDQzLCBwYXJlbnQ6IDUsIG5hbWU6ICdzaGlydF9vbmVwaWVjZScsIHRyYWQ6ICfjgrfjg6Pjg4Tjg6/jg7Pjg5Tjg7zjgrknfSxcbiAgICAgICAgICAgIHtpZDogNDQsIHBhcmVudDogNSwgbmFtZTogJ21heGlfb25lcGllY2UnLCB0cmFkOiAn44Oe44Kt44K344Ov44Oz44OU44O844K5J30sXG4gICAgICAgICAgICB7aWQ6IDQ1LCBwYXJlbnQ6IDUsIG5hbWU6ICd0dW5pYycsIHRyYWQ6ICfjg4Hjg6Xjg4vjg4Pjgq8nfSxcbiAgICAgICAgICAgIHtpZDogNDYsIHBhcmVudDogNSwgbmFtZTogJ2RyZXNzJywgdHJhZDogJ+ODieODrOOCuSd9LFxuICAgICAgICAgICAge2lkOiA0NywgcGFyZW50OiA1LCBuYW1lOiAnd2VkZGluZ19kcmVzcycsIHRyYWQ6ICfjgqbjgqfjg4fjgqPjg7PjgrDjg4njg6zjgrknfSxcbiAgICAgICAgICAgIHtpZDogNDgsIHBhcmVudDogNSwgbmFtZTogJ290aGVyX29uZXBpZWNlJywgdHJhZDogJ+OBneOBruS7luOBruODr+ODs+ODlOODvOOCuS/jg4njg6zjgrknfSxcbiAgICAgICAgICAgIHtpZDogNDksIHBhcmVudDogNiwgbmFtZTogJ3NldHVwJywgdHJhZDogJ+OCu+ODg+ODiOOCouODg+ODlyd9LFxuICAgICAgICAgICAge2lkOiA1MCwgcGFyZW50OiA3LCBuYW1lOiAndG90YWxfY29kZScsIHRyYWQ6ICfjg4jjg7zjgr/jg6vjgrPjg7zjg4cnfSxcbiAgICAgICAgICAgIHtpZDogNTEsIHBhcmVudDogOCwgbmFtZTogJ3NuZWFrZXInLCB0cmFkOiAn44K544OL44O844Kr44O8J30sXG4gICAgICAgICAgICB7aWQ6IDUyLCBwYXJlbnQ6IDgsIG5hbWU6ICdkcmVzc19zaG9lcycsIHRyYWQ6ICfjg4njg6zjgrnjgrfjg6Xjg7zjgronfSxcbiAgICAgICAgICAgIHtpZDogNTMsIHBhcmVudDogOCwgbmFtZTogJ3B1bXBzJywgdHJhZDogJ+ODkeODs+ODl+OCuSd9LFxuICAgICAgICAgICAge2lkOiA1NCwgcGFyZW50OiA4LCBuYW1lOiAnYm9vdHMnLCB0cmFkOiAn44OW44O844OEJ30sXG4gICAgICAgICAgICB7aWQ6IDU1LCBwYXJlbnQ6IDgsIG5hbWU6ICdsb25nX2Jvb3RzJywgdHJhZDogJ+ODreODs+OCsOODluODvOODhCd9LFxuICAgICAgICAgICAge2lkOiA1NiwgcGFyZW50OiA4LCBuYW1lOiAnc2FuZGFsJywgdHJhZDogJ+OCteODs+ODgOODqyd9LFxuICAgICAgICAgICAge2lkOiA1NywgcGFyZW50OiA4LCBuYW1lOiAncmFpbl9zaG9lcycsIHRyYWQ6ICfjg6zjgqTjg7Pjgrfjg6Xjg7zjgronfSxcbiAgICAgICAgICAgIHtpZDogNTgsIHBhcmVudDogOCwgbmFtZTogJ290aGVyX3Nob2VzJywgdHJhZDogJ+OBneOBruS7luOBruOCt+ODpeODvOOCuid9LFxuICAgICAgICAgICAge2lkOiA1OSwgcGFyZW50OiA5LCBuYW1lOiAnaGF0JywgdHJhZDogJ+W4veWtkCd9LFxuICAgICAgICAgICAge2lkOiA2MCwgcGFyZW50OiA5LCBuYW1lOiAnd2F0Y2gnLCB0cmFkOiAn5pmC6KiIJ30sXG4gICAgICAgICAgICB7aWQ6IDYxLCBwYXJlbnQ6IDksIG5hbWU6ICdiYWcnLCB0cmFkOiAn44OQ44OD44KwJ30sXG4gICAgICAgICAgICB7aWQ6IDYyLCBwYXJlbnQ6IDksIG5hbWU6ICd0b3Rlc19iYWcnLCB0cmFkOiAn44OI44O844OI44OQ44OD44KwJ30sXG4gICAgICAgICAgICB7aWQ6IDYzLCBwYXJlbnQ6IDksIG5hbWU6ICdiYWNrcGFjaycsIHRyYWQ6ICfjg5Djg4Pjgq/jg5Hjg4Pjgq8v44Oq44Ol44OD44KvJ30sXG4gICAgICAgICAgICB7aWQ6IDY0LCBwYXJlbnQ6IDksIG5hbWU6ICdib3N0b25fYmFnJywgdHJhZDogJ+ODnOOCueODiOODs+ODkOODg+OCsCd9LFxuICAgICAgICAgICAge2lkOiA2NSwgcGFyZW50OiA5LCBuYW1lOiAnY2x1dGNoX2JhZycsIHRyYWQ6ICfjgq/jg6njg4Pjg4Hjg5Djg4PjgrAnfSxcbiAgICAgICAgICAgIHtpZDogNjYsIHBhcmVudDogOSwgbmFtZTogJ3dlc3RfYmFnJywgdHJhZDogJ+OCpuOCqOOCueODiOODkOODg+OCsCd9LFxuICAgICAgICAgICAge2lkOiA2NywgcGFyZW50OiA5LCBuYW1lOiAnamV3ZWxyeScsIHRyYWQ6ICfjgrjjg6Xjgqjjg6rjg7wnfVxuICAgICAgICBdO1xuICAgICAgICBfbGlzdFByb21pc2UucmVzb2x2ZShzdWJjYXRlZ29yaWVzMSk7XG4vKlxuICAgICAgICB0aGlzLmRiLnF1ZXJ5X2RiKFwiU0VMRUNUIERJU1RJTkNUIG1ldGFfdmFsdWUgQVMgdmFsdWUgRlJPTSB3cDJfcG9zdG1ldGEgV0hFUkUgbWV0YV9rZXkgPSAnc29mYmFja2VuZF9fc29mX3dvcmtfbWV0YV9fY2F0ZWdvcnlfMSdcIilcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KVxuKi9cbiAgICAgICAgcmV0dXJuIF9saXN0UHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGdldFNjaG9vbHNMaXN0KCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9saXN0UHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihcIlNFTEVDVCBESVNUSU5DVCB2YWx1ZSBGUk9NIHdwMl9icF94cHJvZmlsZV9kYXRhIFdIRVJFIGZpZWxkX2lkPTRcIilcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gX2xpc3RQcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZ2V0U3R5bGVzTGlzdCgpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHZhciBfbGlzdFByb21pc2UgPSBRLmRlZmVyKCk7XG5cbiAgICAgICAgdmFyIHN0eWxlcyA9IFtcbiAgICAgICAgICAgIHtpZDogMSwgbmFtZTogXCJzaW1wbGVcIiwgdHJhZDogXCLjgrfjg7Pjg5fjg6tcIn0sXG4gICAgICAgICAgICB7aWQ6IDIsIG5hbWU6IFwiY2FzdWFsXCIsIHRyYWQ6IFwi44Kr44K444Ol44Ki44OrXCJ9LFxuICAgICAgICAgICAge2lkOiAzLCBuYW1lOiBcImZlbWluaW5lXCIsIHRyYWQ6IFwi44OV44Kn44Of44OL44OzXCJ9LFxuICAgICAgICAgICAge2lkOiA0LCBuYW1lOiBcIm1vZGVcIiwgdHJhZDogXCLjg6Ljg7zjg4lcIn0sXG4gICAgICAgICAgICB7aWQ6IDUsIG5hbWU6IFwic3RyZWV0XCIsIHRyYWQ6IFwi44K544OI44Oq44O844OIXCJ9LFxuICAgICAgICAgICAge2lkOiA2LCBuYW1lOiBcImFydFwiLCB0cmFkOiBcIuOCouODvOODiFwifSxcbiAgICAgICAgICAgIHtpZDogNywgbmFtZTogXCJlbGVnYW5jZVwiLCB0cmFkOiBcIuOCqOODrOOCrOODs+OCuVwifSxcbiAgICAgICAgICAgIHtpZDogOCwgbmFtZTogXCJjbGFzc2ljXCIsIHRyYWQ6IFwi44Kv44Op44K344OD44KvXCJ9LFxuICAgICAgICAgICAge2lkOiA5LCBuYW1lOiBcInNwb3J0eVwiLCB0cmFkOiBcIuOCueODneODvOODhuOCo1wifSxcbiAgICAgICAgICAgIHtpZDogMTAsIG5hbWU6IFwib3JpZW50YWxcIiwgdHJhZDogXCLjgqrjg6rjgqjjg7Pjgr/jg6tcIn0sXG4gICAgICAgICAgICB7aWQ6IDExLCBuYW1lOiBcImRlY29yYVwiLCB0cmFkOiBcIuODh+OCs+ODqVwifSxcbiAgICAgICAgICAgIHtpZDogMTIsIG5hbWU6IFwiaGlwcHlfY291bnRyeVwiLCB0cmFkOiBcIuODkuODg+ODlOODvC/jgqvjg7Pjg4jjg6rjg7xcIn0sXG4gICAgICAgICAgICB7aWQ6IDEzLCBuYW1lOiBcInhfZ2VuZGVyXCIsIHRyYWQ6IFwi44Kv44Ot44K544K444Kn44Oz44OA44O8XCJ9LFxuICAgICAgICAgICAge2lkOiAxNCwgbmFtZTogXCJtYW5pc2hcIiwgdHJhZDogXCLjg57jg4vjg4Pjgrfjg6VcIn0sXG4gICAgICAgICAgICB7aWQ6IDE1LCBuYW1lOiBcInByZXBweVwiLCB0cmFkOiBcIuODleODrOODg+ODlOODvFwifSxcbiAgICAgICAgICAgIHtpZDogMTYsIG5hbWU6IFwibWlsaXRhcnlcIiwgdHJhZDogXCLjg5/jg6rjgr/jg6rjg7xcIn0sXG4gICAgICAgICAgICB7aWQ6IDE3LCBuYW1lOiBcInJvY2tcIiwgdHJhZDogXCLjg63jg4Pjgq9cIn0sXG4gICAgICAgICAgICB7aWQ6IDE4LCBuYW1lOiBcImxvbGl0YVwiLCB0cmFkOiBcIuODreODquODvOOCv1wifSxcbiAgICAgICAgICAgIHtpZDogMTksIG5hbWU6IFwic2V4eV9kYW5keVwiLCB0cmFkOiBcIuOCu+OCr+OCt+OCoy/jg4Djg7Pjg4fjgqNcIn0sXG4gICAgICAgICAgICB7aWQ6IDIwLCBuYW1lOiBcImV0aG5pY1wiLCB0cmFkOiBcIuOCqOOCueODi+ODg+OCr1wifSxcbiAgICAgICAgICAgIHtpZDogMjEsIG5hbWU6IFwiZnV0dXJlXCIsIHRyYWQ6IFwi44OV44Ol44O844OB44Oj44O8XCJ9LFxuICAgICAgICAgICAge2lkOiAyMiwgbmFtZTogXCJvdGhlclwiLCB0cmFkOiBcIuipsuW9k+OBquOBl1wifVxuICAgICAgICBdO1xuICAgICAgICBfbGlzdFByb21pc2UucmVzb2x2ZShzdHlsZXMpO1xuLypcbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihcIlNFTEVDVCBESVNUSU5DVCBtZXRhX3ZhbHVlIEFTIHZhbHVlIEZST00gd3AyX3Bvc3RtZXRhIFdIRVJFIG1ldGFfa2V5ID0gJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3N0eWxlJ1wiKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBfbGlzdFByb21pc2UucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pXG4qL1xuICAgICAgICByZXR1cm4gX2xpc3RQcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZ2V0U2Nob29sQnlNZW1iZXJJZChtZW1iZXJJZCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9wcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICB0aGlzLmRiLnF1ZXJ5X2RiKFwiU0VMRUNUIHZhbHVlIEZST00gd3AyX2JwX3hwcm9maWxlX2RhdGEgV0hFUkUgZmllbGRfaWQ9NCBBTkQgdXNlcl9pZD1cIiArIG1lbWJlcklkKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBfcHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIF9wcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZ2V0UHJvZHVjdE1ldGFkYXRhKHByb2R1Y3RJZCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9wcm9taXNlID0gUS5kZWZlcigpO1xuXG4gICAgICAgIHZhciBnZXRNZXRhZGF0YSA9IFEuZGVmZXIoKTtcbiAgICAgICAgdmFyIGdldFN1YmNhdGVnb3JpZXMwID0gUS5kZWZlcigpO1xuICAgICAgICB2YXIgZ2V0U3ViY2F0ZWdvcmllczEgPSBRLmRlZmVyKCk7XG4gICAgICAgIHZhciBnZXRTdHlsZXMgPSBRLmRlZmVyKCk7XG4gICAgICAgIHZhciBfb3RoZXJQcm9taXNlcyA9IFtnZXRNZXRhZGF0YS5wcm9taXNlLCBnZXRTdWJjYXRlZ29yaWVzMC5wcm9taXNlLCBnZXRTdWJjYXRlZ29yaWVzMS5wcm9taXNlLCBnZXRTdHlsZXMucHJvbWlzZV07XG5cbiAgICAgICAgdmFyIHF1ZXJ5ID0gXCIoU0VMRUNUIEEubWV0YV9rZXkgQVMgZmllbGQsIEEubWV0YV92YWx1ZSBBUyB2YWx1ZSBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiRlJPTSB3cDJfcG9zdG1ldGEgQSBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgQS5wb3N0X2lkPVwiICsgcHJvZHVjdElkICsgXCIgQU5EIEEubWV0YV9rZXkgPD4gJ3Zpc2l0JykgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIlVOSU9OIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCIoU0VMRUNUIEIubWV0YV9rZXkgQVMgZmllbGQsIENPVU5UKERJU1RJTkNUIEIubWV0YV92YWx1ZSkgQVMgdmFsdWUgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkZST00gd3AyX3Bvc3RtZXRhIEIgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIldIRVJFIEIubWV0YV9rZXkgPSAndmlzaXQnIEFORCBCLnBvc3RfaWQ9XCIgKyBwcm9kdWN0SWQgKyBcIilcIjtcbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihxdWVyeSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFKc29uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICAgICAgICAgICAgZ2V0TWV0YWRhdGEucmVzb2x2ZShkYXRhKTtcblxuICAgICAgICAgICAgICAgIC8vIGdldCBzdWJjYXRlZ29yaWVzMCB0cmFuc2xhdGlvbnNcbiAgICAgICAgICAgICAgICB0aGlzLmdldFN1YmNhdGVnb3JpZXMwTGlzdCgpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChzdWJjYXRlZ29yaWVzMCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U3ViY2F0ZWdvcmllczAucmVzb2x2ZShkYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHN1YmNhdGVnb3JpZXMxIHRyYW5zbGF0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTdWJjYXRlZ29yaWVzMUxpc3QoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChzdWJjYXRlZ29yaWVzMSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRTdWJjYXRlZ29yaWVzMS5yZXNvbHZlKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBzdHlsZXMgdHJhbnNsYXRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3R5bGVzTGlzdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoc3R5bGVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U3R5bGVzLnJlc29sdmUoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3B1bGF0ZSB0cmFuc2xhdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goZGF0YUpzb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInJlY29yZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmZpZWxkID09ICdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19jYXRlZ29yeV8wJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUudHJhZCA9IF8ucmVzdWx0KF8uZmluZChzdWJjYXRlZ29yaWVzMCwgZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai5uYW1lID09PSB2YWx1ZS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCAndHJhZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5maWVsZCA9PSAnc29mYmFja2VuZF9fc29mX3dvcmtfbWV0YV9fY2F0ZWdvcnlfMScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnRyYWQgPSBfLnJlc3VsdChfLmZpbmQoc3ViY2F0ZWdvcmllczEsIGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoubmFtZSA9PT0gdmFsdWUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgJ3RyYWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuZmllbGQgPT0gJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3N0eWxlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUudHJhZCA9IF8ucmVzdWx0KF8uZmluZChzdHlsZXMsIGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoubmFtZSA9PT0gdmFsdWUudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgJ3RyYWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBRLmFsbChfb3RoZXJQcm9taXNlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCh2YWx1ZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcHJvbWlzZS5yZXNvbHZlKGRhdGFKc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIF9wcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgY3JlYXRlUHJvZHVjdExpa2UocHJvZHVjdElkKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX3Byb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHRoaXMuZGIucXVlcnlfZGIoXCJVUERBVEUgd3AyX3Bvc3RtZXRhIFNFVCBtZXRhX3ZhbHVlID0gbWV0YV92YWx1ZSArIDEgV0hFUkUgbWV0YV9rZXk9J19pdGVtX2xpa2VzJyBBTkQgcG9zdF9pZD1cIiArIHByb2R1Y3RJZClcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgX3Byb21pc2UucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHJldHVybiBfcHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGdldFByb2R1Y3RWaXNpdHMocHJvZHVjdElkKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX3Byb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHRoaXMuZGIucXVlcnlfZGIoXCJTRUxFQ1QgaWQgQVMgcG9zdF9pZCwgY291bnQgQVMgdmlzaXRzIEZST00gd3AyX3Bvc3Rfdmlld3MgV0hFUkUgaWQ9XCIgKyBwcm9kdWN0SWQpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIF9wcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gX3Byb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbiAgICBjcmVhdGVQcm9kdWN0SW1hZ2UocHJvZHVjdElkLCBmaWVsZCwgdmFsdWUpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHZhciBfcHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihcIklOU0VSVCBJTlRPIHdwMl9wb3N0bWV0YSAobWV0YV9pZCwgcG9zdF9pZCwgbWV0YV9rZXksIG1ldGFfdmFsdWUpIFZBTFVFUyAoTlVMTCxcIiArIHByb2R1Y3RJZCArIFwiLCdcIiArIGZpZWxkICsgXCInLCdcIiArIHZhbHVlICsgXCInKVwiKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBfcHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIF9wcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG59O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9