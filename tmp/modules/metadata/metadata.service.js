/// <reference path="../../../typings/tsd.d.ts" />
/// <reference path="../connection/connection.service.ts" />
var Q = require("q");
var connection = require('../connection/connection.service');
var _ = require('lodash');
var MetadataService = (function () {
    function MetadataService() {
        this.db = connection.service;
    }
    MetadataService.prototype.getSubcategories0List = function () {
        var _listPromise = Q.defer();
        var subcategories0 = [
            { id: 1, name: 'tops', trad: 'トップス' },
            { id: 2, name: 'jacket_outer', trad: 'ジャケット/アウター' },
            { id: 3, name: 'pants', trad: 'パンツ' },
            { id: 4, name: 'skirt', trad: 'スカート' },
            { id: 5, name: 'onepiece', trad: 'ワンピース/ドレス' },
            { id: 6, name: 'setup', trad: 'セットアップ' },
            { id: 7, name: 'total_code', trad: 'トータルコーデ' },
            { id: 8, name: 'shoes', trad: 'シューズ' },
            { id: 9, name: 'goods', trad: 'ファッショングッズ' }
        ];
        _listPromise.resolve(subcategories0);
        /*
                this.db.query_db("SELECT DISTINCT meta_value AS value FROM wp2_postmeta WHERE meta_key = 'sofbackend__sof_work_meta__category_0'")
                    .then((data) => {
                        _listPromise.resolve(data);
                    })
        */
        return _listPromise.promise;
    };
    MetadataService.prototype.getSubcategories1List = function () {
        var _listPromise = Q.defer();
        var subcategories1 = [
            { id: 1, parent: 1, name: 't_shirt', trad: 'Tシャツ/カットソー' },
            { id: 2, parent: 1, name: 'shirt', trad: 'シャツ/ブラウス' },
            { id: 3, parent: 1, name: 'proshirt', trad: 'ポロシャツ' },
            { id: 4, parent: 1, name: 'knit', trad: 'ニット/セーター' },
            { id: 5, parent: 1, name: 'vest', trad: 'ベスト' },
            { id: 6, parent: 1, name: 'parka', trad: 'パーカー' },
            { id: 7, parent: 1, name: 'sweat', trad: 'スウェット' },
            { id: 8, parent: 1, name: 'cardigan', trad: 'カーディガン' },
            { id: 9, parent: 1, name: 'tank_tops', trad: 'タンクトップ' },
            { id: 10, parent: 1, name: 'other_tops', trad: 'その他のトップス' },
            { id: 11, parent: 2, name: 'jacket', trad: 'ジャケット' },
            { id: 12, parent: 2, name: 'leather_jacket', trad: 'レザージャケット' },
            { id: 13, parent: 2, name: 'military_jacket', trad: 'ミリタリージャケット' },
            { id: 14, parent: 2, name: 'blouson', trad: 'ブルゾン' },
            { id: 15, parent: 2, name: 'chester_coat', trad: 'チェスターコート' },
            { id: 16, parent: 2, name: 'trench_coat', trad: 'トレンチコート' },
            { id: 17, parent: 2, name: 'stand-collar_coat', trad: 'ステンカラーコート' },
            { id: 18, parent: 2, name: 'mods_coat', trad: 'モッズコート' },
            { id: 19, parent: 2, name: 'pea_coat', trad: 'ピーコート' },
            { id: 20, parent: 2, name: 'duffle_coat', trad: 'ダッフルコート' },
            { id: 21, parent: 2, name: 'down_jacket', trad: 'ダウンジャケット' },
            { id: 22, parent: 2, name: 'other_jacket_outer', trad: 'その他のジャケット/アウター' },
            { id: 23, parent: 3, name: 'pants', trad: 'パンツ' },
            { id: 24, parent: 3, name: 'wide_pants', trad: 'ワイドパンツ' },
            { id: 25, parent: 3, name: 'slim_pants', trad: 'スリムパンツ' },
            { id: 26, parent: 3, name: 'slax', trad: 'スラックス' },
            { id: 27, parent: 3, name: 'denim', trad: 'デニム' },
            { id: 28, parent: 3, name: 'short_pants', trad: 'ショートパンツ' },
            { id: 29, parent: 3, name: 'leather_pants', trad: 'レザーパンツ' },
            { id: 30, parent: 3, name: 'chino_pants', trad: 'チノパンツ' },
            { id: 31, parent: 3, name: 'other_pants', trad: 'その他のパンツ' },
            { id: 32, parent: 4, name: 'skirt', trad: 'スカート' },
            { id: 33, parent: 4, name: 'tight_skirt', trad: 'タイトスカート' },
            { id: 34, parent: 4, name: 'long_skirt', trad: 'ロングスカート' },
            { id: 35, parent: 4, name: 'flare_skirt', trad: 'フレアスカート' },
            { id: 36, parent: 4, name: 'peplum_skirt', trad: 'ペプラムスカート' },
            { id: 37, parent: 4, name: 'pleats_skirt', trad: 'プリーツスカート' },
            { id: 38, parent: 4, name: 'culottes_skirt', trad: 'キュロットスカート' },
            { id: 39, parent: 4, name: 'gored_skirt', trad: 'ゴアードスカート' },
            { id: 40, parent: 4, name: 'tiered_skirt', trad: 'ティアードスカート' },
            { id: 41, parent: 4, name: 'other_skirt', trad: 'その他のスカート' },
            { id: 42, parent: 5, name: 'onepiece', trad: 'ワンピース' },
            { id: 43, parent: 5, name: 'shirt_onepiece', trad: 'シャツワンピース' },
            { id: 44, parent: 5, name: 'maxi_onepiece', trad: 'マキシワンピース' },
            { id: 45, parent: 5, name: 'tunic', trad: 'チュニック' },
            { id: 46, parent: 5, name: 'dress', trad: 'ドレス' },
            { id: 47, parent: 5, name: 'wedding_dress', trad: 'ウェディングドレス' },
            { id: 48, parent: 5, name: 'other_onepiece', trad: 'その他のワンピース/ドレス' },
            { id: 49, parent: 6, name: 'setup', trad: 'セットアップ' },
            { id: 50, parent: 7, name: 'total_code', trad: 'トータルコーデ' },
            { id: 51, parent: 8, name: 'sneaker', trad: 'スニーカー' },
            { id: 52, parent: 8, name: 'dress_shoes', trad: 'ドレスシューズ' },
            { id: 53, parent: 8, name: 'pumps', trad: 'パンプス' },
            { id: 54, parent: 8, name: 'boots', trad: 'ブーツ' },
            { id: 55, parent: 8, name: 'long_boots', trad: 'ロングブーツ' },
            { id: 56, parent: 8, name: 'sandal', trad: 'サンダル' },
            { id: 57, parent: 8, name: 'rain_shoes', trad: 'レインシューズ' },
            { id: 58, parent: 8, name: 'other_shoes', trad: 'その他のシューズ' },
            { id: 59, parent: 9, name: 'hat', trad: '帽子' },
            { id: 60, parent: 9, name: 'watch', trad: '時計' },
            { id: 61, parent: 9, name: 'bag', trad: 'バッグ' },
            { id: 62, parent: 9, name: 'totes_bag', trad: 'トートバッグ' },
            { id: 63, parent: 9, name: 'backpack', trad: 'バックパック/リュック' },
            { id: 64, parent: 9, name: 'boston_bag', trad: 'ボストンバッグ' },
            { id: 65, parent: 9, name: 'clutch_bag', trad: 'クラッチバッグ' },
            { id: 66, parent: 9, name: 'west_bag', trad: 'ウエストバッグ' },
            { id: 67, parent: 9, name: 'jewelry', trad: 'ジュエリー' }
        ];
        _listPromise.resolve(subcategories1);
        /*
                this.db.query_db("SELECT DISTINCT meta_value AS value FROM wp2_postmeta WHERE meta_key = 'sofbackend__sof_work_meta__category_1'")
                    .then((data) => {
                        _listPromise.resolve(data);
                    })
        */
        return _listPromise.promise;
    };
    MetadataService.prototype.getSchoolsList = function () {
        var _listPromise = Q.defer();
        this.db.query_db("SELECT DISTINCT value FROM wp2_bp_xprofile_data WHERE field_id=4").then(function (data) {
            _listPromise.resolve(data);
        });
        return _listPromise.promise;
    };
    MetadataService.prototype.getStylesList = function () {
        var _listPromise = Q.defer();
        var styles = [
            { id: 1, name: "simple", trad: "シンプル" },
            { id: 2, name: "casual", trad: "カジュアル" },
            { id: 3, name: "feminine", trad: "フェミニン" },
            { id: 4, name: "mode", trad: "モード" },
            { id: 5, name: "street", trad: "ストリート" },
            { id: 6, name: "art", trad: "アート" },
            { id: 7, name: "elegance", trad: "エレガンス" },
            { id: 8, name: "classic", trad: "クラシック" },
            { id: 9, name: "sporty", trad: "スポーティ" },
            { id: 10, name: "oriental", trad: "オリエンタル" },
            { id: 11, name: "decora", trad: "デコラ" },
            { id: 12, name: "hippy_country", trad: "ヒッピー/カントリー" },
            { id: 13, name: "x_gender", trad: "クロスジェンダー" },
            { id: 14, name: "manish", trad: "マニッシュ" },
            { id: 15, name: "preppy", trad: "フレッピー" },
            { id: 16, name: "military", trad: "ミリタリー" },
            { id: 17, name: "rock", trad: "ロック" },
            { id: 18, name: "lolita", trad: "ロリータ" },
            { id: 19, name: "sexy_dandy", trad: "セクシィ/ダンディ" },
            { id: 20, name: "ethnic", trad: "エスニック" },
            { id: 21, name: "future", trad: "フューチャー" },
            { id: 22, name: "other", trad: "該当なし" }
        ];
        _listPromise.resolve(styles);
        /*
                this.db.query_db("SELECT DISTINCT meta_value AS value FROM wp2_postmeta WHERE meta_key = 'sofbackend__sof_work_meta__style'")
                    .then((data) => {
                        _listPromise.resolve(data);
                    })
        */
        return _listPromise.promise;
    };
    MetadataService.prototype.getSchoolByMemberId = function (memberId) {
        var _promise = Q.defer();
        this.db.query_db("SELECT value FROM wp2_bp_xprofile_data WHERE field_id=4 AND user_id=" + memberId).then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    MetadataService.prototype.getProductMetadata = function (productId) {
        var _this = this;
        var _promise = Q.defer();
        var getMetadata = Q.defer();
        var getSubcategories0 = Q.defer();
        var getSubcategories1 = Q.defer();
        var getStyles = Q.defer();
        var _otherPromises = [getMetadata.promise, getSubcategories0.promise, getSubcategories1.promise, getStyles.promise];
        var query = "(SELECT A.meta_key AS field, A.meta_value AS value " + "FROM wp2_postmeta A " + "WHERE A.post_id=" + productId + " AND A.meta_key <> 'visit') " + "UNION " + "(SELECT B.meta_key AS field, COUNT(DISTINCT B.meta_value) AS value " + "FROM wp2_postmeta B " + "WHERE B.meta_key = 'visit' AND B.post_id=" + productId + ")";
        this.db.query_db(query).then(function (data) {
            var dataJson = JSON.parse(JSON.stringify(data));
            getMetadata.resolve(data);
            console.log("DATA");
            // get subcategories0 translations
            _this.getSubcategories0List().then(function (subcategories0) {
                getSubcategories0.resolve(data);
                console.log("su0");
                // get subcategories1 translations
                _this.getSubcategories1List().then(function (subcategories1) {
                    getSubcategories1.resolve(data);
                    console.log("su1");
                    // get styles translations
                    _this.getStylesList().then(function (styles) {
                        getStyles.resolve(data);
                        console.log("st");
                        // populate translations
                        _.forEach(dataJson, function (value, key) {
                            console.log("record");
                            if (value.field == 'sofbackend__sof_work_meta__category_0') {
                                console.log(value.value);
                            }
                            ;
                            if (value.field == 'sofbackend__sof_work_meta__category_1') {
                                console.log(value.value);
                            }
                            ;
                            if (value.field == 'sofbackend__sof_work_meta__style') {
                                console.log(value.value);
                            }
                            ;
                        });
                    });
                });
            });
            Q.all(_otherPromises).then(function (values) {
                _promise.resolve(data);
            });
        });
        return _promise.promise;
    };
    MetadataService.prototype.createProductLike = function (productId) {
        var _promise = Q.defer();
        this.db.query_db("UPDATE wp2_postmeta SET meta_value = meta_value + 1 WHERE meta_key='_item_likes' AND post_id=" + productId).then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    MetadataService.prototype.getProductUniqueVisits = function (productId) {
        var _promise = Q.defer();
        this.db.query_db("SELECT COUNT(DISTINCT meta_value) AS value FROM wp2_postmeta WHERE meta_key = 'visit' AND post_id=" + productId).then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    MetadataService.prototype.getProductTotalVisits = function (productId) {
        var _promise = Q.defer();
        this.db.query_db("SELECT COUNT(meta_value) AS value FROM wp2_postmeta WHERE meta_key = 'visit' AND post_id=" + productId).then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    MetadataService.prototype.createProductImage = function (productId, field, value) {
        var _promise = Q.defer();
        this.db.query_db("INSERT INTO wp2_postmeta (meta_id, post_id, meta_key, meta_value) VALUES (NULL," + productId + ",'" + field + "','" + value + "')").then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    return MetadataService;
})();
exports.MetadataService = MetadataService;
;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvbWV0YWRhdGEvbWV0YWRhdGEuc2VydmljZS50cyJdLCJuYW1lcyI6WyJNZXRhZGF0YVNlcnZpY2UiLCJNZXRhZGF0YVNlcnZpY2UuY29uc3RydWN0b3IiLCJNZXRhZGF0YVNlcnZpY2UuZ2V0U3ViY2F0ZWdvcmllczBMaXN0IiwiTWV0YWRhdGFTZXJ2aWNlLmdldFN1YmNhdGVnb3JpZXMxTGlzdCIsIk1ldGFkYXRhU2VydmljZS5nZXRTY2hvb2xzTGlzdCIsIk1ldGFkYXRhU2VydmljZS5nZXRTdHlsZXNMaXN0IiwiTWV0YWRhdGFTZXJ2aWNlLmdldFNjaG9vbEJ5TWVtYmVySWQiLCJNZXRhZGF0YVNlcnZpY2UuZ2V0UHJvZHVjdE1ldGFkYXRhIiwiTWV0YWRhdGFTZXJ2aWNlLmNyZWF0ZVByb2R1Y3RMaWtlIiwiTWV0YWRhdGFTZXJ2aWNlLmdldFByb2R1Y3RVbmlxdWVWaXNpdHMiLCJNZXRhZGF0YVNlcnZpY2UuZ2V0UHJvZHVjdFRvdGFsVmlzaXRzIiwiTWV0YWRhdGFTZXJ2aWNlLmNyZWF0ZVByb2R1Y3RJbWFnZSJdLCJtYXBwaW5ncyI6IkFBQUEsa0RBQWtEO0FBQ2xELDREQUE0RDtBQUU1RCxJQUFPLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztBQUN4QixJQUFPLFVBQVUsV0FBVyxrQ0FBa0MsQ0FBQyxDQUFBO0FBRS9ELElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQW1CMUIsSUFBYSxlQUFlO0lBQTVCQSxTQUFhQSxlQUFlQTtRQUNoQkMsT0FBRUEsR0FBR0EsVUFBVUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7SUEwUXBDQSxDQUFDQTtJQXhRR0QsK0NBQXFCQSxHQUFyQkE7UUFDSUUsSUFBSUEsWUFBWUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0E7UUFFN0JBLElBQUlBLGNBQWNBLEdBQUdBO1lBQ2pCQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxNQUFNQSxFQUFFQSxJQUFJQSxFQUFFQSxNQUFNQSxFQUFDQTtZQUNuQ0EsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsY0FBY0EsRUFBRUEsSUFBSUEsRUFBRUEsWUFBWUEsRUFBQ0E7WUFDakRBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLEtBQUtBLEVBQUNBO1lBQ25DQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFFQSxJQUFJQSxFQUFFQSxNQUFNQSxFQUFDQTtZQUNwQ0EsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsRUFBRUEsV0FBV0EsRUFBQ0E7WUFDNUNBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUNBO1lBQ3RDQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUM1Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBQ0E7WUFDcENBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLFdBQVdBLEVBQUNBO1NBQzVDQSxDQUFDQTtRQUNGQSxZQUFZQSxDQUFDQSxPQUFPQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQTtRQUM3Q0EsQUFNUUE7Ozs7O1VBRE5BO1FBQ01BLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBLE9BQU9BLENBQUNBO0lBQ2hDQSxDQUFDQTtJQUVERiwrQ0FBcUJBLEdBQXJCQTtRQUNJRyxJQUFJQSxZQUFZQSxHQUFHQSxDQUFDQSxDQUFDQSxLQUFLQSxFQUFFQSxDQUFDQTtRQUU3QkEsSUFBSUEsY0FBY0EsR0FBR0E7WUFDakJBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUVBLElBQUlBLEVBQUVBLFlBQVlBLEVBQUNBO1lBQ3ZEQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFDQTtZQUNuREEsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7WUFDbkRBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUNBO1lBQ2xEQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxNQUFNQSxFQUFFQSxJQUFJQSxFQUFFQSxLQUFLQSxFQUFDQTtZQUM3Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBQ0E7WUFDL0NBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ2hEQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFDQTtZQUNwREEsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsV0FBV0EsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBQ0E7WUFDckRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFlBQVlBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUNBO1lBQ3pEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUNsREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsZ0JBQWdCQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFDQTtZQUM3REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsaUJBQWlCQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFDQTtZQUNoRUEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBQ0E7WUFDbERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGNBQWNBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUNBO1lBQzNEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxhQUFhQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUN6REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsbUJBQW1CQSxFQUFFQSxJQUFJQSxFQUFFQSxXQUFXQSxFQUFDQTtZQUNqRUEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsV0FBV0EsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBQ0E7WUFDdERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ3BEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxhQUFhQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUN6REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBQ0E7WUFDMURBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLG9CQUFvQkEsRUFBRUEsSUFBSUEsRUFBRUEsZ0JBQWdCQSxFQUFDQTtZQUN2RUEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUEsSUFBSUEsRUFBRUEsS0FBS0EsRUFBQ0E7WUFDL0NBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFlBQVlBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUNBO1lBQ3ZEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFDQTtZQUN2REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7WUFDaERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLEtBQUtBLEVBQUNBO1lBQy9DQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxhQUFhQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUN6REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsZUFBZUEsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBQ0E7WUFDMURBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGFBQWFBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ3ZEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxhQUFhQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUN6REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBQ0E7WUFDaERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGFBQWFBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUNBO1lBQ3pEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUN4REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBQ0E7WUFDekRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGNBQWNBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUNBO1lBQzNEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxjQUFjQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFDQTtZQUMzREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsZ0JBQWdCQSxFQUFFQSxJQUFJQSxFQUFFQSxXQUFXQSxFQUFDQTtZQUM5REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBQ0E7WUFDMURBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGNBQWNBLEVBQUVBLElBQUlBLEVBQUVBLFdBQVdBLEVBQUNBO1lBQzVEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxhQUFhQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFDQTtZQUMxREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7WUFDcERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGdCQUFnQkEsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBQ0E7WUFDN0RBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGVBQWVBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUNBO1lBQzVEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUNqREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUEsSUFBSUEsRUFBRUEsS0FBS0EsRUFBQ0E7WUFDL0NBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLGVBQWVBLEVBQUVBLElBQUlBLEVBQUVBLFdBQVdBLEVBQUNBO1lBQzdEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxnQkFBZ0JBLEVBQUVBLElBQUlBLEVBQUVBLGVBQWVBLEVBQUNBO1lBQ2xFQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFDQTtZQUNsREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsWUFBWUEsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBQ0E7WUFDeERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ25EQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxhQUFhQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUN6REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBQ0E7WUFDaERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLEtBQUtBLEVBQUNBO1lBQy9DQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFDQTtZQUN2REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBQ0E7WUFDakRBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFlBQVlBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUNBO1lBQ3hEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxhQUFhQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFDQTtZQUMxREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsS0FBS0EsRUFBRUEsSUFBSUEsRUFBRUEsSUFBSUEsRUFBQ0E7WUFDNUNBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUVBLElBQUlBLEVBQUVBLElBQUlBLEVBQUNBO1lBQzlDQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxLQUFLQSxFQUFFQSxJQUFJQSxFQUFFQSxLQUFLQSxFQUFDQTtZQUM3Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsV0FBV0EsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBQ0E7WUFDdERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLEVBQUVBLGFBQWFBLEVBQUNBO1lBQzFEQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFDQTtZQUN4REEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsWUFBWUEsRUFBRUEsSUFBSUEsRUFBRUEsU0FBU0EsRUFBQ0E7WUFDeERBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUNBO1lBQ3REQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxTQUFTQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtTQUN0REEsQ0FBQ0E7UUFDRkEsWUFBWUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsY0FBY0EsQ0FBQ0EsQ0FBQ0E7UUFDN0NBLEFBTVFBOzs7OztVQUROQTtRQUNNQSxNQUFNQSxDQUFDQSxZQUFZQSxDQUFDQSxPQUFPQSxDQUFDQTtJQUNoQ0EsQ0FBQ0E7SUFFREgsd0NBQWNBLEdBQWRBO1FBQ0lJLElBQUlBLFlBQVlBLEdBQUdBLENBQUNBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBO1FBQzdCQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxRQUFRQSxDQUFDQSxrRUFBa0VBLENBQUNBLENBQy9FQSxJQUFJQSxDQUFDQSxVQUFDQSxJQUFJQTtZQUNQQSxZQUFZQSxDQUFDQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUMvQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQUE7UUFDTkEsTUFBTUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7SUFDaENBLENBQUNBO0lBRURKLHVDQUFhQSxHQUFiQTtRQUNJSyxJQUFJQSxZQUFZQSxHQUFHQSxDQUFDQSxDQUFDQSxLQUFLQSxFQUFFQSxDQUFDQTtRQUU3QkEsSUFBSUEsTUFBTUEsR0FBR0E7WUFDVEEsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBQ0E7WUFDckNBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ3RDQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxVQUFVQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUN4Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBRUEsSUFBSUEsRUFBRUEsS0FBS0EsRUFBQ0E7WUFDbENBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ3RDQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxLQUFLQSxFQUFFQSxJQUFJQSxFQUFFQSxLQUFLQSxFQUFDQTtZQUNqQ0EsRUFBQ0EsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7WUFDeENBLEVBQUNBLEVBQUVBLEVBQUVBLENBQUNBLEVBQUVBLElBQUlBLEVBQUVBLFNBQVNBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ3ZDQSxFQUFDQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUN0Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsRUFBRUEsUUFBUUEsRUFBQ0E7WUFDMUNBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUVBLElBQUlBLEVBQUVBLEtBQUtBLEVBQUNBO1lBQ3JDQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxJQUFJQSxFQUFFQSxlQUFlQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFDQTtZQUNuREEsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBQ0E7WUFDNUNBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ3ZDQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFFQSxJQUFJQSxFQUFFQSxPQUFPQSxFQUFDQTtZQUN2Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsSUFBSUEsRUFBRUEsVUFBVUEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0E7WUFDekNBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLElBQUlBLEVBQUVBLE1BQU1BLEVBQUVBLElBQUlBLEVBQUVBLEtBQUtBLEVBQUNBO1lBQ25DQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFFQSxJQUFJQSxFQUFFQSxNQUFNQSxFQUFDQTtZQUN0Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsSUFBSUEsRUFBRUEsWUFBWUEsRUFBRUEsSUFBSUEsRUFBRUEsV0FBV0EsRUFBQ0E7WUFDL0NBLEVBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLElBQUlBLEVBQUVBLFFBQVFBLEVBQUVBLElBQUlBLEVBQUVBLE9BQU9BLEVBQUNBO1lBQ3ZDQSxFQUFDQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFFQSxJQUFJQSxFQUFFQSxRQUFRQSxFQUFDQTtZQUN4Q0EsRUFBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsSUFBSUEsRUFBRUEsT0FBT0EsRUFBRUEsSUFBSUEsRUFBRUEsTUFBTUEsRUFBQ0E7U0FDeENBLENBQUNBO1FBQ0ZBLFlBQVlBLENBQUNBLE9BQU9BLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBQ3JDQSxBQU1RQTs7Ozs7VUFETkE7UUFDTUEsTUFBTUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7SUFDaENBLENB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T0EsQ0FBQ0E7SUFDNUJBLENBQUNBO0lBRURWLDRDQUFrQkEsR0FBbEJBLFVBQW1CQSxTQUFTQSxFQUFFQSxLQUFLQSxFQUFFQSxLQUFLQTtRQUN0Q1csSUFBSUEsUUFBUUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0E7UUFDekJBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLFFBQVFBLENBQUNBLGlGQUFpRkEsR0FBR0EsU0FBU0EsR0FBR0EsSUFBSUEsR0FBR0EsS0FBS0EsR0FBR0EsS0FBS0EsR0FBR0EsS0FBS0EsR0FBR0EsSUFBSUEsQ0FBQ0EsQ0FDaEpBLElBQUlBLENBQUNBLFVBQUNBLElBQUlBO1lBQ1BBLFFBQVFBLENBQUNBLE9BQU9BLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1FBQzNCQSxDQUFDQSxDQUFDQSxDQUFBQTtRQUNOQSxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQSxPQUFPQSxDQUFDQTtJQUM1QkEsQ0FBQ0E7SUFFTFgsc0JBQUNBO0FBQURBLENBM1FBLEFBMlFDQSxJQUFBO0FBM1FZLHVCQUFlLEdBQWYsZUEyUVosQ0FBQTtBQUFBLENBQUMiLCJmaWxlIjoibW9kdWxlcy9tZXRhZGF0YS9tZXRhZGF0YS5zZXJ2aWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvdHNkLmQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL2Nvbm5lY3Rpb24vY29ubmVjdGlvbi5zZXJ2aWNlLnRzXCIgLz5cblxuaW1wb3J0IFEgPSByZXF1aXJlKFwicVwiKTtcbmltcG9ydCBjb25uZWN0aW9uID0gcmVxdWlyZSgnLi4vY29ubmVjdGlvbi9jb25uZWN0aW9uLnNlcnZpY2UnKVxuXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG5leHBvcnQgaW50ZXJmYWNlIElNZXRhZGF0YVNlcnZpY2Uge1xuICAgIC8vIEdFVFxuICAgIGdldFN1YmNhdGVnb3JpZXMwTGlzdCgpOiBRLklQcm9taXNlPHt9PjtcbiAgICBnZXRTdWJjYXRlZ29yaWVzMUxpc3QoKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0U2Nob29sc0xpc3QoKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0U3R5bGVzTGlzdCgpOiBRLklQcm9taXNlPHt9PjtcbiAgICBnZXRTY2hvb2xCeU1lbWJlcklkKG1lbWJlcklkKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0UHJvZHVjdE1ldGFkYXRhKHByb2R1Y3RJZCk6IFEuSVByb21pc2U8e30+O1xuICAgIGdldFByb2R1Y3RVbmlxdWVWaXNpdHMocHJvZHVjdElkKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0UHJvZHVjdFRvdGFsVmlzaXRzKHByb2R1Y3RJZCk6IFEuSVByb21pc2U8e30+O1xuXG4gICAgLy8gUE9TVFxuICAgIGNyZWF0ZVByb2R1Y3RMaWtlKHByb2R1Y3RJZCk6IFEuSVByb21pc2U8e30+O1xuICAgIGNyZWF0ZVByb2R1Y3RJbWFnZShwcm9kdWN0SWQsIGZpZWxkLCB2YWx1ZSk6IFEuSVByb21pc2U8e30+O1xufVxuXG5cbmV4cG9ydCBjbGFzcyBNZXRhZGF0YVNlcnZpY2UgaW1wbGVtZW50cyBJTWV0YWRhdGFTZXJ2aWNlIHtcbiAgICBwcml2YXRlIGRiID0gY29ubmVjdGlvbi5zZXJ2aWNlO1xuXG4gICAgZ2V0U3ViY2F0ZWdvcmllczBMaXN0KCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9saXN0UHJvbWlzZSA9IFEuZGVmZXIoKTtcblxuICAgICAgICB2YXIgc3ViY2F0ZWdvcmllczAgPSBbXG4gICAgICAgICAgICB7aWQ6IDEsIG5hbWU6ICd0b3BzJywgdHJhZDogJ+ODiOODg+ODl+OCuSd9LFxuICAgICAgICAgICAge2lkOiAyLCBuYW1lOiAnamFja2V0X291dGVyJywgdHJhZDogJ+OCuOODo+OCseODg+ODiC/jgqLjgqbjgr/jg7wnfSxcbiAgICAgICAgICAgIHtpZDogMywgbmFtZTogJ3BhbnRzJywgdHJhZDogJ+ODkeODs+ODhCd9LFxuICAgICAgICAgICAge2lkOiA0LCBuYW1lOiAnc2tpcnQnLCB0cmFkOiAn44K544Kr44O844OIJ30sXG4gICAgICAgICAgICB7aWQ6IDUsIG5hbWU6ICdvbmVwaWVjZScsIHRyYWQ6ICfjg6/jg7Pjg5Tjg7zjgrkv44OJ44Os44K5J30sXG4gICAgICAgICAgICB7aWQ6IDYsIG5hbWU6ICdzZXR1cCcsIHRyYWQ6ICfjgrvjg4Pjg4jjgqLjg4Pjg5cnfSxcbiAgICAgICAgICAgIHtpZDogNywgbmFtZTogJ3RvdGFsX2NvZGUnLCB0cmFkOiAn44OI44O844K/44Or44Kz44O844OHJ30sXG4gICAgICAgICAgICB7aWQ6IDgsIG5hbWU6ICdzaG9lcycsIHRyYWQ6ICfjgrfjg6Xjg7zjgronfSxcbiAgICAgICAgICAgIHtpZDogOSwgbmFtZTogJ2dvb2RzJywgdHJhZDogJ+ODleOCoeODg+OCt+ODp+ODs+OCsOODg+OCuid9XG4gICAgICAgIF07XG4gICAgICAgIF9saXN0UHJvbWlzZS5yZXNvbHZlKHN1YmNhdGVnb3JpZXMwKTtcbi8qXG4gICAgICAgIHRoaXMuZGIucXVlcnlfZGIoXCJTRUxFQ1QgRElTVElOQ1QgbWV0YV92YWx1ZSBBUyB2YWx1ZSBGUk9NIHdwMl9wb3N0bWV0YSBXSEVSRSBtZXRhX2tleSA9ICdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19jYXRlZ29yeV8wJ1wiKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBfbGlzdFByb21pc2UucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pXG4qL1xuICAgICAgICByZXR1cm4gX2xpc3RQcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZ2V0U3ViY2F0ZWdvcmllczFMaXN0KCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9saXN0UHJvbWlzZSA9IFEuZGVmZXIoKTtcblxuICAgICAgICB2YXIgc3ViY2F0ZWdvcmllczEgPSBbXG4gICAgICAgICAgICB7aWQ6IDEsIHBhcmVudDogMSwgbmFtZTogJ3Rfc2hpcnQnLCB0cmFkOiAnVOOCt+ODo+ODhC/jgqvjg4Pjg4jjgr3jg7wnfSxcbiAgICAgICAgICAgIHtpZDogMiwgcGFyZW50OiAxLCBuYW1lOiAnc2hpcnQnLCB0cmFkOiAn44K344Oj44OEL+ODluODqeOCpuOCuSd9LFxuICAgICAgICAgICAge2lkOiAzLCBwYXJlbnQ6IDEsIG5hbWU6ICdwcm9zaGlydCcsIHRyYWQ6ICfjg53jg63jgrfjg6Pjg4QnfSxcbiAgICAgICAgICAgIHtpZDogNCwgcGFyZW50OiAxLCBuYW1lOiAna25pdCcsIHRyYWQ6ICfjg4vjg4Pjg4gv44K744O844K/44O8J30sXG4gICAgICAgICAgICB7aWQ6IDUsIHBhcmVudDogMSwgbmFtZTogJ3Zlc3QnLCB0cmFkOiAn44OZ44K544OIJ30sXG4gICAgICAgICAgICB7aWQ6IDYsIHBhcmVudDogMSwgbmFtZTogJ3BhcmthJywgdHJhZDogJ+ODkeODvOOCq+ODvCd9LFxuICAgICAgICAgICAge2lkOiA3LCBwYXJlbnQ6IDEsIG5hbWU6ICdzd2VhdCcsIHRyYWQ6ICfjgrnjgqbjgqfjg4Pjg4gnfSxcbiAgICAgICAgICAgIHtpZDogOCwgcGFyZW50OiAxLCBuYW1lOiAnY2FyZGlnYW4nLCB0cmFkOiAn44Kr44O844OH44Kj44Ks44OzJ30sXG4gICAgICAgICAgICB7aWQ6IDksIHBhcmVudDogMSwgbmFtZTogJ3RhbmtfdG9wcycsIHRyYWQ6ICfjgr/jg7Pjgq/jg4jjg4Pjg5cnfSxcbiAgICAgICAgICAgIHtpZDogMTAsIHBhcmVudDogMSwgbmFtZTogJ290aGVyX3RvcHMnLCB0cmFkOiAn44Gd44Gu5LuW44Gu44OI44OD44OX44K5J30sXG4gICAgICAgICAgICB7aWQ6IDExLCBwYXJlbnQ6IDIsIG5hbWU6ICdqYWNrZXQnLCB0cmFkOiAn44K444Oj44Kx44OD44OIJ30sXG4gICAgICAgICAgICB7aWQ6IDEyLCBwYXJlbnQ6IDIsIG5hbWU6ICdsZWF0aGVyX2phY2tldCcsIHRyYWQ6ICfjg6zjgrbjg7zjgrjjg6PjgrHjg4Pjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMTMsIHBhcmVudDogMiwgbmFtZTogJ21pbGl0YXJ5X2phY2tldCcsIHRyYWQ6ICfjg5/jg6rjgr/jg6rjg7zjgrjjg6PjgrHjg4Pjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMTQsIHBhcmVudDogMiwgbmFtZTogJ2Jsb3Vzb24nLCB0cmFkOiAn44OW44Or44K+44OzJ30sXG4gICAgICAgICAgICB7aWQ6IDE1LCBwYXJlbnQ6IDIsIG5hbWU6ICdjaGVzdGVyX2NvYXQnLCB0cmFkOiAn44OB44Kn44K544K/44O844Kz44O844OIJ30sXG4gICAgICAgICAgICB7aWQ6IDE2LCBwYXJlbnQ6IDIsIG5hbWU6ICd0cmVuY2hfY29hdCcsIHRyYWQ6ICfjg4jjg6zjg7Pjg4HjgrPjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMTcsIHBhcmVudDogMiwgbmFtZTogJ3N0YW5kLWNvbGxhcl9jb2F0JywgdHJhZDogJ+OCueODhuODs+OCq+ODqeODvOOCs+ODvOODiCd9LFxuICAgICAgICAgICAge2lkOiAxOCwgcGFyZW50OiAyLCBuYW1lOiAnbW9kc19jb2F0JywgdHJhZDogJ+ODouODg+OCuuOCs+ODvOODiCd9LFxuICAgICAgICAgICAge2lkOiAxOSwgcGFyZW50OiAyLCBuYW1lOiAncGVhX2NvYXQnLCB0cmFkOiAn44OU44O844Kz44O844OIJ30sXG4gICAgICAgICAgICB7aWQ6IDIwLCBwYXJlbnQ6IDIsIG5hbWU6ICdkdWZmbGVfY29hdCcsIHRyYWQ6ICfjg4Djg4Pjg5Xjg6vjgrPjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMjEsIHBhcmVudDogMiwgbmFtZTogJ2Rvd25famFja2V0JywgdHJhZDogJ+ODgOOCpuODs+OCuOODo+OCseODg+ODiCd9LFxuICAgICAgICAgICAge2lkOiAyMiwgcGFyZW50OiAyLCBuYW1lOiAnb3RoZXJfamFja2V0X291dGVyJywgdHJhZDogJ+OBneOBruS7luOBruOCuOODo+OCseODg+ODiC/jgqLjgqbjgr/jg7wnfSxcbiAgICAgICAgICAgIHtpZDogMjMsIHBhcmVudDogMywgbmFtZTogJ3BhbnRzJywgdHJhZDogJ+ODkeODs+ODhCd9LFxuICAgICAgICAgICAge2lkOiAyNCwgcGFyZW50OiAzLCBuYW1lOiAnd2lkZV9wYW50cycsIHRyYWQ6ICfjg6/jgqTjg4njg5Hjg7Pjg4QnfSxcbiAgICAgICAgICAgIHtpZDogMjUsIHBhcmVudDogMywgbmFtZTogJ3NsaW1fcGFudHMnLCB0cmFkOiAn44K544Oq44Og44OR44Oz44OEJ30sXG4gICAgICAgICAgICB7aWQ6IDI2LCBwYXJlbnQ6IDMsIG5hbWU6ICdzbGF4JywgdHJhZDogJ+OCueODqeODg+OCr+OCuSd9LFxuICAgICAgICAgICAge2lkOiAyNywgcGFyZW50OiAzLCBuYW1lOiAnZGVuaW0nLCB0cmFkOiAn44OH44OL44OgJ30sXG4gICAgICAgICAgICB7aWQ6IDI4LCBwYXJlbnQ6IDMsIG5hbWU6ICdzaG9ydF9wYW50cycsIHRyYWQ6ICfjgrfjg6fjg7zjg4jjg5Hjg7Pjg4QnfSxcbiAgICAgICAgICAgIHtpZDogMjksIHBhcmVudDogMywgbmFtZTogJ2xlYXRoZXJfcGFudHMnLCB0cmFkOiAn44Os44K244O844OR44Oz44OEJ30sXG4gICAgICAgICAgICB7aWQ6IDMwLCBwYXJlbnQ6IDMsIG5hbWU6ICdjaGlub19wYW50cycsIHRyYWQ6ICfjg4Hjg47jg5Hjg7Pjg4QnfSxcbiAgICAgICAgICAgIHtpZDogMzEsIHBhcmVudDogMywgbmFtZTogJ290aGVyX3BhbnRzJywgdHJhZDogJ+OBneOBruS7luOBruODkeODs+ODhCd9LFxuICAgICAgICAgICAge2lkOiAzMiwgcGFyZW50OiA0LCBuYW1lOiAnc2tpcnQnLCB0cmFkOiAn44K544Kr44O844OIJ30sXG4gICAgICAgICAgICB7aWQ6IDMzLCBwYXJlbnQ6IDQsIG5hbWU6ICd0aWdodF9za2lydCcsIHRyYWQ6ICfjgr/jgqTjg4jjgrnjgqvjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMzQsIHBhcmVudDogNCwgbmFtZTogJ2xvbmdfc2tpcnQnLCB0cmFkOiAn44Ot44Oz44Kw44K544Kr44O844OIJ30sXG4gICAgICAgICAgICB7aWQ6IDM1LCBwYXJlbnQ6IDQsIG5hbWU6ICdmbGFyZV9za2lydCcsIHRyYWQ6ICfjg5Xjg6zjgqLjgrnjgqvjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMzYsIHBhcmVudDogNCwgbmFtZTogJ3BlcGx1bV9za2lydCcsIHRyYWQ6ICfjg5rjg5fjg6njg6Djgrnjgqvjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMzcsIHBhcmVudDogNCwgbmFtZTogJ3BsZWF0c19za2lydCcsIHRyYWQ6ICfjg5fjg6rjg7zjg4Tjgrnjgqvjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogMzgsIHBhcmVudDogNCwgbmFtZTogJ2N1bG90dGVzX3NraXJ0JywgdHJhZDogJ+OCreODpeODreODg+ODiOOCueOCq+ODvOODiCd9LFxuICAgICAgICAgICAge2lkOiAzOSwgcGFyZW50OiA0LCBuYW1lOiAnZ29yZWRfc2tpcnQnLCB0cmFkOiAn44K044Ki44O844OJ44K544Kr44O844OIJ30sXG4gICAgICAgICAgICB7aWQ6IDQwLCBwYXJlbnQ6IDQsIG5hbWU6ICd0aWVyZWRfc2tpcnQnLCB0cmFkOiAn44OG44Kj44Ki44O844OJ44K544Kr44O844OIJ30sXG4gICAgICAgICAgICB7aWQ6IDQxLCBwYXJlbnQ6IDQsIG5hbWU6ICdvdGhlcl9za2lydCcsIHRyYWQ6ICfjgZ3jga7ku5bjga7jgrnjgqvjg7zjg4gnfSxcbiAgICAgICAgICAgIHtpZDogNDIsIHBhcmVudDogNSwgbmFtZTogJ29uZXBpZWNlJywgdHJhZDogJ+ODr+ODs+ODlOODvOOCuSd9LFxuICAgICAgICAgICAge2lkOiA0MywgcGFyZW50OiA1LCBuYW1lOiAnc2hpcnRfb25lcGllY2UnLCB0cmFkOiAn44K344Oj44OE44Ov44Oz44OU44O844K5J30sXG4gICAgICAgICAgICB7aWQ6IDQ0LCBwYXJlbnQ6IDUsIG5hbWU6ICdtYXhpX29uZXBpZWNlJywgdHJhZDogJ+ODnuOCreOCt+ODr+ODs+ODlOODvOOCuSd9LFxuICAgICAgICAgICAge2lkOiA0NSwgcGFyZW50OiA1LCBuYW1lOiAndHVuaWMnLCB0cmFkOiAn44OB44Ol44OL44OD44KvJ30sXG4gICAgICAgICAgICB7aWQ6IDQ2LCBwYXJlbnQ6IDUsIG5hbWU6ICdkcmVzcycsIHRyYWQ6ICfjg4njg6zjgrknfSxcbiAgICAgICAgICAgIHtpZDogNDcsIHBhcmVudDogNSwgbmFtZTogJ3dlZGRpbmdfZHJlc3MnLCB0cmFkOiAn44Km44Kn44OH44Kj44Oz44Kw44OJ44Os44K5J30sXG4gICAgICAgICAgICB7aWQ6IDQ4LCBwYXJlbnQ6IDUsIG5hbWU6ICdvdGhlcl9vbmVwaWVjZScsIHRyYWQ6ICfjgZ3jga7ku5bjga7jg6/jg7Pjg5Tjg7zjgrkv44OJ44Os44K5J30sXG4gICAgICAgICAgICB7aWQ6IDQ5LCBwYXJlbnQ6IDYsIG5hbWU6ICdzZXR1cCcsIHRyYWQ6ICfjgrvjg4Pjg4jjgqLjg4Pjg5cnfSxcbiAgICAgICAgICAgIHtpZDogNTAsIHBhcmVudDogNywgbmFtZTogJ3RvdGFsX2NvZGUnLCB0cmFkOiAn44OI44O844K/44Or44Kz44O844OHJ30sXG4gICAgICAgICAgICB7aWQ6IDUxLCBwYXJlbnQ6IDgsIG5hbWU6ICdzbmVha2VyJywgdHJhZDogJ+OCueODi+ODvOOCq+ODvCd9LFxuICAgICAgICAgICAge2lkOiA1MiwgcGFyZW50OiA4LCBuYW1lOiAnZHJlc3Nfc2hvZXMnLCB0cmFkOiAn44OJ44Os44K544K344Ol44O844K6J30sXG4gICAgICAgICAgICB7aWQ6IDUzLCBwYXJlbnQ6IDgsIG5hbWU6ICdwdW1wcycsIHRyYWQ6ICfjg5Hjg7Pjg5fjgrknfSxcbiAgICAgICAgICAgIHtpZDogNTQsIHBhcmVudDogOCwgbmFtZTogJ2Jvb3RzJywgdHJhZDogJ+ODluODvOODhCd9LFxuICAgICAgICAgICAge2lkOiA1NSwgcGFyZW50OiA4LCBuYW1lOiAnbG9uZ19ib290cycsIHRyYWQ6ICfjg63jg7PjgrDjg5bjg7zjg4QnfSxcbiAgICAgICAgICAgIHtpZDogNTYsIHBhcmVudDogOCwgbmFtZTogJ3NhbmRhbCcsIHRyYWQ6ICfjgrXjg7Pjg4Djg6snfSxcbiAgICAgICAgICAgIHtpZDogNTcsIHBhcmVudDogOCwgbmFtZTogJ3JhaW5fc2hvZXMnLCB0cmFkOiAn44Os44Kk44Oz44K344Ol44O844K6J30sXG4gICAgICAgICAgICB7aWQ6IDU4LCBwYXJlbnQ6IDgsIG5hbWU6ICdvdGhlcl9zaG9lcycsIHRyYWQ6ICfjgZ3jga7ku5bjga7jgrfjg6Xjg7zjgronfSxcbiAgICAgICAgICAgIHtpZDogNTksIHBhcmVudDogOSwgbmFtZTogJ2hhdCcsIHRyYWQ6ICfluL3lrZAnfSxcbiAgICAgICAgICAgIHtpZDogNjAsIHBhcmVudDogOSwgbmFtZTogJ3dhdGNoJywgdHJhZDogJ+aZguioiCd9LFxuICAgICAgICAgICAge2lkOiA2MSwgcGFyZW50OiA5LCBuYW1lOiAnYmFnJywgdHJhZDogJ+ODkOODg+OCsCd9LFxuICAgICAgICAgICAge2lkOiA2MiwgcGFyZW50OiA5LCBuYW1lOiAndG90ZXNfYmFnJywgdHJhZDogJ+ODiOODvOODiOODkOODg+OCsCd9LFxuICAgICAgICAgICAge2lkOiA2MywgcGFyZW50OiA5LCBuYW1lOiAnYmFja3BhY2snLCB0cmFkOiAn44OQ44OD44Kv44OR44OD44KvL+ODquODpeODg+OCryd9LFxuICAgICAgICAgICAge2lkOiA2NCwgcGFyZW50OiA5LCBuYW1lOiAnYm9zdG9uX2JhZycsIHRyYWQ6ICfjg5zjgrnjg4jjg7Pjg5Djg4PjgrAnfSxcbiAgICAgICAgICAgIHtpZDogNjUsIHBhcmVudDogOSwgbmFtZTogJ2NsdXRjaF9iYWcnLCB0cmFkOiAn44Kv44Op44OD44OB44OQ44OD44KwJ30sXG4gICAgICAgICAgICB7aWQ6IDY2LCBwYXJlbnQ6IDksIG5hbWU6ICd3ZXN0X2JhZycsIHRyYWQ6ICfjgqbjgqjjgrnjg4jjg5Djg4PjgrAnfSxcbiAgICAgICAgICAgIHtpZDogNjcsIHBhcmVudDogOSwgbmFtZTogJ2pld2VscnknLCB0cmFkOiAn44K444Ol44Ko44Oq44O8J31cbiAgICAgICAgXTtcbiAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUoc3ViY2F0ZWdvcmllczEpO1xuLypcbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihcIlNFTEVDVCBESVNUSU5DVCBtZXRhX3ZhbHVlIEFTIHZhbHVlIEZST00gd3AyX3Bvc3RtZXRhIFdIRVJFIG1ldGFfa2V5ID0gJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX2NhdGVnb3J5XzEnXCIpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIF9saXN0UHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSlcbiovXG4gICAgICAgIHJldHVybiBfbGlzdFByb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbiAgICBnZXRTY2hvb2xzTGlzdCgpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHZhciBfbGlzdFByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHRoaXMuZGIucXVlcnlfZGIoXCJTRUxFQ1QgRElTVElOQ1QgdmFsdWUgRlJPTSB3cDJfYnBfeHByb2ZpbGVfZGF0YSBXSEVSRSBmaWVsZF9pZD00XCIpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIF9saXN0UHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIF9saXN0UHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGdldFN0eWxlc0xpc3QoKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX2xpc3RQcm9taXNlID0gUS5kZWZlcigpO1xuXG4gICAgICAgIHZhciBzdHlsZXMgPSBbXG4gICAgICAgICAgICB7aWQ6IDEsIG5hbWU6IFwic2ltcGxlXCIsIHRyYWQ6IFwi44K344Oz44OX44OrXCJ9LFxuICAgICAgICAgICAge2lkOiAyLCBuYW1lOiBcImNhc3VhbFwiLCB0cmFkOiBcIuOCq+OCuOODpeOCouODq1wifSxcbiAgICAgICAgICAgIHtpZDogMywgbmFtZTogXCJmZW1pbmluZVwiLCB0cmFkOiBcIuODleOCp+ODn+ODi+ODs1wifSxcbiAgICAgICAgICAgIHtpZDogNCwgbmFtZTogXCJtb2RlXCIsIHRyYWQ6IFwi44Oi44O844OJXCJ9LFxuICAgICAgICAgICAge2lkOiA1LCBuYW1lOiBcInN0cmVldFwiLCB0cmFkOiBcIuOCueODiOODquODvOODiFwifSxcbiAgICAgICAgICAgIHtpZDogNiwgbmFtZTogXCJhcnRcIiwgdHJhZDogXCLjgqLjg7zjg4hcIn0sXG4gICAgICAgICAgICB7aWQ6IDcsIG5hbWU6IFwiZWxlZ2FuY2VcIiwgdHJhZDogXCLjgqjjg6zjgqzjg7PjgrlcIn0sXG4gICAgICAgICAgICB7aWQ6IDgsIG5hbWU6IFwiY2xhc3NpY1wiLCB0cmFkOiBcIuOCr+ODqeOCt+ODg+OCr1wifSxcbiAgICAgICAgICAgIHtpZDogOSwgbmFtZTogXCJzcG9ydHlcIiwgdHJhZDogXCLjgrnjg53jg7zjg4bjgqNcIn0sXG4gICAgICAgICAgICB7aWQ6IDEwLCBuYW1lOiBcIm9yaWVudGFsXCIsIHRyYWQ6IFwi44Kq44Oq44Ko44Oz44K/44OrXCJ9LFxuICAgICAgICAgICAge2lkOiAxMSwgbmFtZTogXCJkZWNvcmFcIiwgdHJhZDogXCLjg4fjgrPjg6lcIn0sXG4gICAgICAgICAgICB7aWQ6IDEyLCBuYW1lOiBcImhpcHB5X2NvdW50cnlcIiwgdHJhZDogXCLjg5Ljg4Pjg5Tjg7wv44Kr44Oz44OI44Oq44O8XCJ9LFxuICAgICAgICAgICAge2lkOiAxMywgbmFtZTogXCJ4X2dlbmRlclwiLCB0cmFkOiBcIuOCr+ODreOCueOCuOOCp+ODs+ODgOODvFwifSxcbiAgICAgICAgICAgIHtpZDogMTQsIG5hbWU6IFwibWFuaXNoXCIsIHRyYWQ6IFwi44Oe44OL44OD44K344OlXCJ9LFxuICAgICAgICAgICAge2lkOiAxNSwgbmFtZTogXCJwcmVwcHlcIiwgdHJhZDogXCLjg5Xjg6zjg4Pjg5Tjg7xcIn0sXG4gICAgICAgICAgICB7aWQ6IDE2LCBuYW1lOiBcIm1pbGl0YXJ5XCIsIHRyYWQ6IFwi44Of44Oq44K/44Oq44O8XCJ9LFxuICAgICAgICAgICAge2lkOiAxNywgbmFtZTogXCJyb2NrXCIsIHRyYWQ6IFwi44Ot44OD44KvXCJ9LFxuICAgICAgICAgICAge2lkOiAxOCwgbmFtZTogXCJsb2xpdGFcIiwgdHJhZDogXCLjg63jg6rjg7zjgr9cIn0sXG4gICAgICAgICAgICB7aWQ6IDE5LCBuYW1lOiBcInNleHlfZGFuZHlcIiwgdHJhZDogXCLjgrvjgq/jgrfjgqMv44OA44Oz44OH44KjXCJ9LFxuICAgICAgICAgICAge2lkOiAyMCwgbmFtZTogXCJldGhuaWNcIiwgdHJhZDogXCLjgqjjgrnjg4vjg4Pjgq9cIn0sXG4gICAgICAgICAgICB7aWQ6IDIxLCBuYW1lOiBcImZ1dHVyZVwiLCB0cmFkOiBcIuODleODpeODvOODgeODo+ODvFwifSxcbiAgICAgICAgICAgIHtpZDogMjIsIG5hbWU6IFwib3RoZXJcIiwgdHJhZDogXCLoqbLlvZPjgarjgZdcIn1cbiAgICAgICAgXTtcbiAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUoc3R5bGVzKTtcbi8qXG4gICAgICAgIHRoaXMuZGIucXVlcnlfZGIoXCJTRUxFQ1QgRElTVElOQ1QgbWV0YV92YWx1ZSBBUyB2YWx1ZSBGUk9NIHdwMl9wb3N0bWV0YSBXSEVSRSBtZXRhX2tleSA9ICdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19zdHlsZSdcIilcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KVxuKi9cbiAgICAgICAgcmV0dXJuIF9saXN0UHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGdldFNjaG9vbEJ5TWVtYmVySWQobWVtYmVySWQpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHZhciBfcHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihcIlNFTEVDVCB2YWx1ZSBGUk9NIHdwMl9icF94cHJvZmlsZV9kYXRhIFdIRVJFIGZpZWxkX2lkPTQgQU5EIHVzZXJfaWQ9XCIgKyBtZW1iZXJJZClcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgX3Byb21pc2UucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHJldHVybiBfcHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGdldFByb2R1Y3RNZXRhZGF0YShwcm9kdWN0SWQpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHZhciBfcHJvbWlzZSA9IFEuZGVmZXIoKTtcblxuICAgICAgICB2YXIgZ2V0TWV0YWRhdGEgPSBRLmRlZmVyKCk7XG4gICAgICAgIHZhciBnZXRTdWJjYXRlZ29yaWVzMCA9IFEuZGVmZXIoKTtcbiAgICAgICAgdmFyIGdldFN1YmNhdGVnb3JpZXMxID0gUS5kZWZlcigpO1xuICAgICAgICB2YXIgZ2V0U3R5bGVzID0gUS5kZWZlcigpO1xuICAgICAgICB2YXIgX290aGVyUHJvbWlzZXMgPSBbZ2V0TWV0YWRhdGEucHJvbWlzZSwgZ2V0U3ViY2F0ZWdvcmllczAucHJvbWlzZSwgZ2V0U3ViY2F0ZWdvcmllczEucHJvbWlzZSwgZ2V0U3R5bGVzLnByb21pc2VdO1xuXG4gICAgICAgIHZhciBxdWVyeSA9IFwiKFNFTEVDVCBBLm1ldGFfa2V5IEFTIGZpZWxkLCBBLm1ldGFfdmFsdWUgQVMgdmFsdWUgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkZST00gd3AyX3Bvc3RtZXRhIEEgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIldIRVJFIEEucG9zdF9pZD1cIiArIHByb2R1Y3RJZCArIFwiIEFORCBBLm1ldGFfa2V5IDw+ICd2aXNpdCcpIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJVTklPTiBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiKFNFTEVDVCBCLm1ldGFfa2V5IEFTIGZpZWxkLCBDT1VOVChESVNUSU5DVCBCLm1ldGFfdmFsdWUpIEFTIHZhbHVlIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJGUk9NIHdwMl9wb3N0bWV0YSBCIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJXSEVSRSBCLm1ldGFfa2V5ID0gJ3Zpc2l0JyBBTkQgQi5wb3N0X2lkPVwiICsgcHJvZHVjdElkICsgXCIpXCI7XG4gICAgICAgIHRoaXMuZGIucXVlcnlfZGIocXVlcnkpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhSnNvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGdldE1ldGFkYXRhLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEQVRBXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gZ2V0IHN1YmNhdGVnb3JpZXMwIHRyYW5zbGF0aW9uc1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3ViY2F0ZWdvcmllczBMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHN1YmNhdGVnb3JpZXMwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRTdWJjYXRlZ29yaWVzMC5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdTBcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBzdWJjYXRlZ29yaWVzMSB0cmFuc2xhdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3ViY2F0ZWdvcmllczFMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoc3ViY2F0ZWdvcmllczEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U3ViY2F0ZWdvcmllczEucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdTFcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHN0eWxlcyB0cmFuc2xhdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTdHlsZXNMaXN0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChzdHlsZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRTdHlsZXMucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN0XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgdHJhbnNsYXRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKGRhdGFKc29uLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVjb3JkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuZmllbGQgPT0gJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX2NhdGVnb3J5XzAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmZpZWxkID09ICdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19jYXRlZ29yeV8xJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWUudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5maWVsZCA9PSAnc29mYmFja2VuZF9fc29mX3dvcmtfbWV0YV9fc3R5bGUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgUS5hbGwoX290aGVyUHJvbWlzZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigodmFsdWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Byb21pc2UucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIF9wcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgY3JlYXRlUHJvZHVjdExpa2UocHJvZHVjdElkKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX3Byb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHRoaXMuZGIucXVlcnlfZGIoXCJVUERBVEUgd3AyX3Bvc3RtZXRhIFNFVCBtZXRhX3ZhbHVlID0gbWV0YV92YWx1ZSArIDEgV0hFUkUgbWV0YV9rZXk9J19pdGVtX2xpa2VzJyBBTkQgcG9zdF9pZD1cIiArIHByb2R1Y3RJZClcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgX3Byb21pc2UucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHJldHVybiBfcHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGdldFByb2R1Y3RVbmlxdWVWaXNpdHMocHJvZHVjdElkKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX3Byb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHRoaXMuZGIucXVlcnlfZGIoXCJTRUxFQ1QgQ09VTlQoRElTVElOQ1QgbWV0YV92YWx1ZSkgQVMgdmFsdWUgRlJPTSB3cDJfcG9zdG1ldGEgV0hFUkUgbWV0YV9rZXkgPSAndmlzaXQnIEFORCBwb3N0X2lkPVwiICsgcHJvZHVjdElkKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBfcHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIF9wcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZ2V0UHJvZHVjdFRvdGFsVmlzaXRzKHByb2R1Y3RJZCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9wcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICB0aGlzLmRiLnF1ZXJ5X2RiKFwiU0VMRUNUIENPVU5UKG1ldGFfdmFsdWUpIEFTIHZhbHVlIEZST00gd3AyX3Bvc3RtZXRhIFdIRVJFIG1ldGFfa2V5ID0gJ3Zpc2l0JyBBTkQgcG9zdF9pZD1cIiArIHByb2R1Y3RJZClcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgX3Byb21pc2UucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHJldHVybiBfcHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGNyZWF0ZVByb2R1Y3RJbWFnZShwcm9kdWN0SWQsIGZpZWxkLCB2YWx1ZSk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9wcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICB0aGlzLmRiLnF1ZXJ5X2RiKFwiSU5TRVJUIElOVE8gd3AyX3Bvc3RtZXRhIChtZXRhX2lkLCBwb3N0X2lkLCBtZXRhX2tleSwgbWV0YV92YWx1ZSkgVkFMVUVTIChOVUxMLFwiICsgcHJvZHVjdElkICsgXCIsJ1wiICsgZmllbGQgKyBcIicsJ1wiICsgdmFsdWUgKyBcIicpXCIpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIF9wcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gX3Byb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbn07XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=