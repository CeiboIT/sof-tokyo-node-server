///<reference path='../../../typings/tsd.d.ts' />
'use strict';
var q = require("q");
var request = require("request");
var ConnectionService = (function () {
    function ConnectionService() {
    }
    ConnectionService.prototype.query = function (params) {
        var _queryPromise = q.defer();
        request('http://sof.tokyo/api/' + params, function (error, response, body) {
            if (!error && response.statusCode == 200) {
                _queryPromise.resolve(JSON.parse(body)); // Show the HTML for the Google homepage.
            }
            else {
                _queryPromise.resolve(JSON.parse(body));
            }
        });
        return _queryPromise.promise;
    };
    return ConnectionService;
})();
exports.ConnectionService = ConnectionService;
exports.service = new ConnectionService();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvY29ubmVjdGlvbi9jb25uZWN0aW9uLnNlcnZpY2UudHMiXSwibmFtZXMiOlsiQ29ubmVjdGlvblNlcnZpY2UiLCJDb25uZWN0aW9uU2VydmljZS5jb25zdHJ1Y3RvciIsIkNvbm5lY3Rpb25TZXJ2aWNlLnF1ZXJ5Il0sIm1hcHBpbmdzIjoiQUFBQSxBQUNBLGlEQURpRDtBQUNqRCxZQUFZLENBQUM7QUFHYixJQUFPLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztBQUN4QixJQUFPLE9BQU8sV0FBVyxTQUFTLENBQUMsQ0FBQztBQU1wQyxJQUFhLGlCQUFpQjtJQUcxQkEsU0FIU0EsaUJBQWlCQTtJQUdWQyxDQUFDQTtJQUVqQkQsaUNBQUtBLEdBQUxBLFVBQU1BLE1BQU1BO1FBQ1JFLElBQUlBLGFBQWFBLEdBQUdBLENBQUNBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBO1FBQzlCQSxPQUFPQSxDQUFDQSx1QkFBdUJBLEdBQUdBLE1BQU1BLEVBQUVBLFVBQVNBLEtBQUtBLEVBQUVBLFFBQVFBLEVBQUVBLElBQUlBO1lBQ3BFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLFFBQVEsQ0FBQyxVQUFVLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDdkMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUMseUNBQXlDO1lBQ3JGLENBQUMsR0FEMEM7WUFDekMsSUFBSSxDQUFDLENBQUM7Z0JBQ0osYUFBYSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUE7WUFDM0MsQ0FBQztRQUNMLENBQUMsQ0FBQ0EsQ0FBQUE7UUFFRkEsTUFBTUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsT0FBT0EsQ0FBQ0E7SUFDakNBLENBQUNBO0lBRUxGLHdCQUFDQTtBQUFEQSxDQWxCQSxBQWtCQ0EsSUFBQTtBQWxCWSx5QkFBaUIsR0FBakIsaUJBa0JaLENBQUE7QUFFVSxlQUFPLEdBQUcsSUFBSSxpQkFBaUIsRUFBRSxDQUFDIiwiZmlsZSI6Im1vZHVsZXMvY29ubmVjdGlvbi9jb25uZWN0aW9uLnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3MvdHNkLmQudHMnIC8+XG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBteXNxbCA9IHJlcXVpcmUoXCJteXNxbFwiKTtcbmltcG9ydCBxID0gcmVxdWlyZShcInFcIik7XG5pbXBvcnQgcmVxdWVzdCA9IHJlcXVpcmUoXCJyZXF1ZXN0XCIpO1xuXG5leHBvcnQgaW50ZXJmYWNlIElDb25uZWN0aW9uU2VydmljZSB7XG4gICAgcXVlcnkocGFyYW1zKTogcS5JUHJvbWlzZTx7fT5cbn1cblxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25TZXJ2aWNlIGltcGxlbWVudHMgSUNvbm5lY3Rpb25TZXJ2aWNlIHtcbiAgICBwcml2YXRlIGNvbm5lY3Rpb25TdHJlYW07XG4gICAgcHJpdmF0ZSBvcHRpb25zO1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgICBxdWVyeShwYXJhbXMpOiBxLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHZhciBfcXVlcnlQcm9taXNlID0gcS5kZWZlcigpO1xuICAgICAgICByZXF1ZXN0KCdodHRwOi8vc29mLnRva3lvL2FwaS8nICsgcGFyYW1zLCBmdW5jdGlvbihlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgIGlmICghZXJyb3IgJiYgcmVzcG9uc2Uuc3RhdHVzQ29kZSA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICBfcXVlcnlQcm9taXNlLnJlc29sdmUoSlNPTi5wYXJzZShib2R5KSkgLy8gU2hvdyB0aGUgSFRNTCBmb3IgdGhlIEdvb2dsZSBob21lcGFnZS5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3F1ZXJ5UHJvbWlzZS5yZXNvbHZlKEpTT04ucGFyc2UoYm9keSkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIF9xdWVyeVByb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IHZhciBzZXJ2aWNlID0gbmV3IENvbm5lY3Rpb25TZXJ2aWNlKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=