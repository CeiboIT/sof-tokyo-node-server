/// <reference path="../../../typings/tsd.d.ts" />
/// <reference path="../connection/connection.service.ts" />
var Q = require("q");
var connection = require('../connection/connection.service');
var auth = require("../auth/auth.service");
var metadata = require("../metadata/metadata.service");
var images = require("../images/images.service");
var authServ = new auth.AuthService();
var metadataServ = new metadata.MetadataService();
var imagesServ = new images.ImagesService();
var inArray = function (myArray, myValue) {
    var inArray = false;
    myArray.map(function (key) {
        if (key === myValue) {
            inArray = true;
        }
    });
    return inArray;
};
var ProductsService = (function () {
    function ProductsService() {
        this.db = connection.service;
    }
    ProductsService.prototype.getProductsNew = function (page) {
        var _listPromise = Q.defer();
        this.db.query('core/?json=get_recent_posts&count=10&page=' + page).then(function (results) {
            var _postAuthorPopulate = [];
            var _postMetadataPopulate = [];
            results['posts'].forEach(function (result) {
                var authorPromise = Q.defer();
                var metadataPromise = Q.defer();
                _postAuthorPopulate.push(authorPromise.promise);
                _postMetadataPopulate.push(metadataPromise.promise);
                // populate author's avatar
                authServ.getUserAvatar(result.author.id, "thumb").then(function (data) {
                    result['author']['avatar'] = data['avatar'];
                    authorPromise.resolve(data);
                    // populate metadata
                    metadataServ.getProductMetadata(result.id).then(function (data2) {
                        result['metadata'] = data2;
                        metadataPromise.resolve(data2);
                    });
                });
            });
            Q.all(_postAuthorPopulate.concat(_postMetadataPopulate)).then(function (values) {
                _listPromise.resolve(results);
            });
        });
        return _listPromise.promise;
    };
    ProductsService.prototype.getProductsList = function (page) {
        var _listPromise = Q.defer();
        var count = 10;
        this.db.query('core/?json=get_posts&count=' + count + '&page=' + page).then(function (results) {
            function shuffle(o) {
                for (var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x)
                    ;
                return o;
            }
            var shuffled = shuffle(results['posts']);
            results['posts'] = shuffled;
            var _postAuthorPopulate = [];
            var _postMetadataPopulate = [];
            results['posts'].forEach(function (result) {
                var authorPromise = Q.defer();
                var metadataPromise = Q.defer();
                _postAuthorPopulate.push(authorPromise.promise);
                _postMetadataPopulate.push(metadataPromise.promise);
                // populate author's avatar
                authServ.getUserAvatar(result.author.id, "thumb").then(function (data) {
                    result['author']['avatar'] = data['avatar'];
                    authorPromise.resolve(data);
                    // populate metadatagi
                    metadataServ.getProductMetadata(result.id).then(function (data2) {
                        result['metadata'] = data2;
                        metadataPromise.resolve(data2);
                    });
                });
            });
            Q.all(_postAuthorPopulate.concat(_postMetadataPopulate)).then(function (values) {
                _listPromise.resolve(results);
            });
        });
        return _listPromise.promise;
    };
    ProductsService.prototype.getProductById = function (productId) {
        var _this = this;
        var _productPromise = Q.defer();
        this.db.query('core/get_post/?id=' + productId).then(function (result) {
            var _promises = [];
            // save visit
            var saveVisitPromise = Q.defer();
            _promises.push(saveVisitPromise.promise);
            var visitQuery = "INSERT INTO wp2_post_views (id, type, period, count) " + "VALUES (" + productId + ",4,'total',1) " + "ON DUPLICATE KEY UPDATE count=count+1";
            _this.db.query_db(visitQuery).then(function () {
                saveVisitPromise.resolve(undefined);
            });
            // populate product visits
            var viewVisitsPromise = Q.defer();
            _promises.push(viewVisitsPromise.promise);
            var visitQuery = "SELECT count FROM wp2_post_views " + "WHERE id=" + productId + " AND type=4 AND period='total'";
            _this.db.query_db(visitQuery).then(function (data) {
                result['post']['visits'] = data[0]['count'];
                viewVisitsPromise.resolve(undefined);
            });
            // populate author's avatar
            authServ.getUserAvatar(result['post']['author']['id'], "thumb").then(function (data) {
                var authorPromise = Q.defer();
                _promises.push(authorPromise.promise);
                result['post']['author']['avatar'] = data['avatar'];
                authorPromise.resolve(data);
            });
            if (result['post']['comments'] && result['post']['comments'].length) {
                // for each comment
                result['post']['comments'].forEach(function (comment) {
                    var commentPromise = Q.defer();
                    _promises.push(commentPromise.promise);
                    // populate comments avatar
                    authServ.getUserAvatar(comment.author.id, "thumb").then(function (avatar) {
                        comment['author']['avatar'] = avatar['avatar'];
                        commentPromise.resolve(avatar);
                    });
                });
            }
            // populate metadata
            metadataServ.getProductMetadata(result['post']['id']).then(function (metadata) {
                var metadataPromise = Q.defer();
                _promises.push(metadataPromise.promise);
                result['post']['metadata'] = metadata;
                metadataPromise.resolve(metadata);
            });
            Q.all(_promises).then(function (values) {
                _productPromise.resolve(result);
            });
        });
        return _productPromise.promise;
    };
    ProductsService.prototype.getProductsByAuthor = function (authorId) {
        var _promise = Q.defer();
        this.db.query('core/get_author_posts/?count=10&id=' + authorId).then(function (results) {
            var _postAuthorPopulate = [];
            var _postMetadataPopulate = [];
            var headerPromise = Q.defer();
            _postAuthorPopulate.push(headerPromise.promise);
            // populate header avatar
            authServ.getUserAvatar(results['author']['id'], "thumb").then(function (data) {
                results['author']['avatar'] = data['avatar'];
                headerPromise.resolve(data);
                results['posts'].forEach(function (result) {
                    var authorPromise = Q.defer();
                    var metadataPromise = Q.defer();
                    _postAuthorPopulate.push(authorPromise.promise);
                    _postMetadataPopulate.push(metadataPromise.promise);
                    // populate author's avatar
                    result['author']['avatar'] = data['avatar'];
                    authorPromise.resolve(data);
                    // populate metadata
                    metadataServ.getProductMetadata(result.id).then(function (data2) {
                        result['metadata'] = data2;
                        metadataPromise.resolve(data2);
                    });
                });
                Q.all(_postAuthorPopulate.concat(_postMetadataPopulate)).then(function (values) {
                    _promise.resolve(results);
                });
            });
        });
        return _promise.promise;
    };
    ProductsService.prototype.getProductsBySchool = function (schoolId, page) {
        var _this = this;
        var _listPromise = Q.defer();
        var _postAuthorPopulate = [];
        var _postMetadataPopulate = [];
        this.db.query('core/?json=get_posts&count=200').then(function (results) {
            var posts = results['posts'];
            _this.db.query_db("SELECT user_id FROM wp2_bp_xprofile_data WHERE value='" + schoolId + "' AND field_id=4").then(function (data) {
                var userIds = [];
                for (var i in data) {
                    userIds.push(data[i].user_id);
                }
                var schoolPosts = [];
                for (var j in posts) {
                    if (inArray(userIds, posts[j].author.id)) {
                        schoolPosts.push(posts[j]);
                    }
                    ;
                }
                ;
                // pagination
                var count = 10;
                results['count_total'] = schoolPosts.length;
                results['pages'] = Math.floor(schoolPosts.length / count);
                if (schoolPosts.length > count - 1) {
                    var from = -count + (count * page);
                    var to = 0 + (count * page);
                    schoolPosts = schoolPosts.slice(from, to);
                }
                ;
                results['posts'] = schoolPosts;
                results['school'] = schoolId;
                results['count'] = schoolPosts.length;
                results['posts'].forEach(function (result) {
                    var authorPromise = Q.defer();
                    var metadataPromise = Q.defer();
                    _postAuthorPopulate.push(authorPromise.promise);
                    _postMetadataPopulate.push(metadataPromise.promise);
                    // populate author's avatar
                    authServ.getUserAvatar(result.author.id, "thumb").then(function (data) {
                        result['author']['avatar'] = data['avatar'];
                        authorPromise.resolve(data);
                        // populate metadatagi
                        metadataServ.getProductMetadata(result.id).then(function (data2) {
                            result['metadata'] = data2;
                            metadataPromise.resolve(data2);
                        });
                    });
                });
                Q.all(_postAuthorPopulate.concat(_postMetadataPopulate)).then(function (values) {
                    _listPromise.resolve(results);
                });
            });
        });
        return _listPromise.promise;
    };
    ProductsService.prototype.getProductsByOptionsSearch = function (search, subcategory0, subcategory1, style, sex) {
        var _promise = Q.defer();
        if (search == 'null')
            search = '';
        if (subcategory0 == 'null')
            search = '';
        if (subcategory1 == 'null')
            search = '';
        if (style == 'null')
            search = '';
        if (sex == 'null')
            search = '';
        var query = "SELECT post_data.post_id, post_data.title, post_data.date, post_data.author, " + "image.image, subcategory0.subcategory0, subcategory1.subcategory1, style.style, sex.sex " + "FROM " + "(SELECT wp2_posts.ID AS post_id, " + "wp2_posts.post_title AS title, " + "wp2_posts.post_date_gmt AS date, " + "wp2_users.display_name AS author, " + "wp2_users.ID AS author_id " + "FROM `wp2_posts` " + "JOIN wp2_users " + "ON wp2_posts.post_author = wp2_users.ID " + "WHERE wp2_posts.post_title LIKE '%" + search + "%' " + ") post_data " + "JOIN " + "(SELECT wp2_postmeta.post_id, " + "wp2_postmeta.meta_value AS image " + "FROM wp2_postmeta " + "WHERE wp2_postmeta.meta_key = 'sofbackend__sof_work_meta__postImage' " + ") image " + "ON post_data.post_id = image.post_id " + "JOIN " + "(SELECT wp2_postmeta.post_id, " + "wp2_postmeta.meta_value AS subcategory0 " + "FROM wp2_postmeta " + "WHERE wp2_postmeta.meta_key = 'sofbackend__sof_work_meta__category_0' " + "AND wp2_postmeta.meta_value LIKE '%" + subcategory0 + "%' " + ") subcategory0 " + "ON post_data.post_id = subcategory0.post_id " + "JOIN " + "(SELECT wp2_postmeta.post_id, " + "wp2_postmeta.meta_value AS subcategory1 " + "FROM wp2_postmeta " + "WHERE wp2_postmeta.meta_key = 'sofbackend__sof_work_meta__category_1' " + "AND wp2_postmeta.meta_value LIKE '%" + subcategory1 + "%' " + ") subcategory1 " + "ON post_data.post_id = subcategory1.post_id " + "JOIN " + "(SELECT wp2_postmeta.post_id, " + "wp2_postmeta.meta_value AS style " + "FROM wp2_postmeta " + "WHERE wp2_postmeta.meta_key = 'sofbackend__sof_work_meta__style' " + "AND wp2_postmeta.meta_value LIKE '%" + style + "%' " + ") style " + "ON post_data.post_id = style.post_id " + "JOIN " + "(SELECT wp2_postmeta.post_id, " + "wp2_postmeta.meta_value AS sex " + "FROM wp2_postmeta " + "WHERE wp2_postmeta.meta_key = 'sofbackend__sof_work_meta__sex' " + "AND wp2_postmeta.meta_value LIKE '%" + sex + "%' " + ") sex " + "ON post_data.post_id = sex.post_id " + "ORDER BY post_id " + "LIMIT 10";
        this.db.query_db(query).then(function (data) {
            var dataJson = JSON.parse(JSON.stringify(data));
            var _postAuthorPopulate = [];
            var _postMetadataPopulate = [];
            dataJson.forEach(function (result) {
                var authorPromise = Q.defer();
                var metadataPromise = Q.defer();
                _postAuthorPopulate.push(authorPromise.promise);
                _postMetadataPopulate.push(metadataPromise.promise);
                // populate author's avatar
                authServ.getUserAvatar(result['author_id'], "thumb").then(function (data) {
                    result['author_avatar'] = data['avatar'];
                    authorPromise.resolve(data);
                    // populate metadata
                    metadataServ.getProductMetadata(result.post_id).then(function (data2) {
                        result['metadata'] = data2;
                        metadataPromise.resolve(data2);
                    });
                });
            });
            Q.all(_postAuthorPopulate.concat(_postMetadataPopulate)).then(function (values) {
                _promise.resolve(dataJson);
            });
        });
        return _promise.promise;
    };
    ProductsService.prototype.getProductsBySubcategory0 = function (subcategory0Id, page) {
        var _listPromise = Q.defer();
        var _postAuthorPopulate = [];
        var _postMetadataPopulate = [];
        this.db.query('core/?json=get_posts&count=200').then(function (results) {
            var posts = results['posts'];
            var subcategory0Posts = [];
            for (var i in posts) {
                if (posts[i]['custom_fields']['sofbackend__sof_work_meta__category_0'] == subcategory0Id) {
                    subcategory0Posts.push(posts[i]);
                }
                ;
            }
            ;
            // pagination
            var count = 10;
            results['count_total'] = subcategory0Posts.length;
            results['pages'] = Math.floor(subcategory0Posts.length / count);
            if (subcategory0Posts.length > count - 1) {
                var from = -count + (count * page);
                var to = 0 + (count * page);
                subcategory0Posts = subcategory0Posts.slice(from, to);
            }
            ;
            results['posts'] = subcategory0Posts;
            results['subcategory0'] = subcategory0Id;
            results['count'] = subcategory0Posts.length;
            results['posts'].forEach(function (result) {
                var authorPromise = Q.defer();
                var metadataPromise = Q.defer();
                _postAuthorPopulate.push(authorPromise.promise);
                _postMetadataPopulate.push(metadataPromise.promise);
                // populate author's avatar
                authServ.getUserAvatar(result.author.id, "thumb").then(function (data) {
                    result['author']['avatar'] = data['avatar'];
                    authorPromise.resolve(data);
                    // populate metadatagi
                    metadataServ.getProductMetadata(result.id).then(function (data2) {
                        result['metadata'] = data2;
                        metadataPromise.resolve(data2);
                    });
                });
            });
            Q.all(_postAuthorPopulate.concat(_postMetadataPopulate)).then(function (values) {
                _listPromise.resolve(results);
            });
        });
        return _listPromise.promise;
    };
    ProductsService.prototype.getProductsBySubcategory1 = function (subcategory1Id, page) {
        var _listPromise = Q.defer();
        var _postAuthorPopulate = [];
        var _postMetadataPopulate = [];
        this.db.query('core/?json=get_posts&count=200').then(function (results) {
            var posts = results['posts'];
            var subcategory1Posts = [];
            for (var i in posts) {
                if (posts[i]['custom_fields']['sofbackend__sof_work_meta__category_1'] == subcategory1Id) {
                    subcategory1Posts.push(posts[i]);
                }
                ;
            }
            ;
            // pagination
            var count = 10;
            results['count_total'] = subcategory1Posts.length;
            results['pages'] = Math.floor(subcategory1Posts.length / count);
            if (subcategory1Posts.length > count - 1) {
                var from = -count + (count * page);
                var to = 0 + (count * page);
                subcategory1Posts = subcategory1Posts.slice(from, to);
            }
            ;
            results['posts'] = subcategory1Posts;
            results['subcategory1'] = subcategory1Id;
            results['count'] = subcategory1Posts.length;
            results['posts'].forEach(function (result) {
                var authorPromise = Q.defer();
                var metadataPromise = Q.defer();
                _postAuthorPopulate.push(authorPromise.promise);
                _postMetadataPopulate.push(metadataPromise.promise);
                // populate author's avatar
                authServ.getUserAvatar(result.author.id, "thumb").then(function (data) {
                    result['author']['avatar'] = data['avatar'];
                    authorPromise.resolve(data);
                    // populate metadatagi
                    metadataServ.getProductMetadata(result.id).then(function (data2) {
                        result['metadata'] = data2;
                        metadataPromise.resolve(data2);
                    });
                });
            });
            Q.all(_postAuthorPopulate.concat(_postMetadataPopulate)).then(function (values) {
                _listPromise.resolve(results);
            });
        });
        return _listPromise.promise;
    };
    ProductsService.prototype.getProductsByStyle = function (styleId, page) {
        var _listPromise = Q.defer();
        var _postAuthorPopulate = [];
        var _postMetadataPopulate = [];
        this.db.query('core/?json=get_posts&count=200').then(function (results) {
            var posts = results['posts'];
            var stylePosts = [];
            for (var i in posts) {
                if (posts[i]['custom_fields']['sofbackend__sof_work_meta__style'] == styleId) {
                    stylePosts.push(posts[i]);
                }
                ;
            }
            ;
            // pagination
            var count = 10;
            results['count_total'] = stylePosts.length;
            results['pages'] = Math.floor(stylePosts.length / count);
            if (stylePosts.length > count - 1) {
                var from = -count + (count * page);
                var to = 0 + (count * page);
                stylePosts = stylePosts.slice(from, to);
            }
            ;
            results['posts'] = stylePosts;
            results['style'] = styleId;
            results['count'] = stylePosts.length;
            results['posts'].forEach(function (result) {
                var authorPromise = Q.defer();
                var metadataPromise = Q.defer();
                _postAuthorPopulate.push(authorPromise.promise);
                _postMetadataPopulate.push(metadataPromise.promise);
                // populate author's avatar
                authServ.getUserAvatar(result.author.id, "thumb").then(function (data) {
                    result['author']['avatar'] = data['avatar'];
                    authorPromise.resolve(data);
                    // populate metadatagi
                    metadataServ.getProductMetadata(result.id).then(function (data2) {
                        result['metadata'] = data2;
                        metadataPromise.resolve(data2);
                    });
                });
            });
            Q.all(_postAuthorPopulate.concat(_postMetadataPopulate)).then(function (values) {
                _listPromise.resolve(results);
            });
        });
        return _listPromise.promise;
    };
    ProductsService.prototype.getProductsBySex = function (sexId, page) {
        var _listPromise = Q.defer();
        var _postAuthorPopulate = [];
        var _postMetadataPopulate = [];
        this.db.query('core/?json=get_posts&count=200').then(function (results) {
            var posts = results['posts'];
            var sexPosts = [];
            for (var i in posts) {
                if (posts[i]['custom_fields']['sofbackend__sof_work_meta__sex'] == sexId) {
                    sexPosts.push(posts[i]);
                }
                ;
            }
            ;
            // pagination
            var count = 6;
            results['count_total'] = sexPosts.length;
            results['pages'] = Math.floor(sexPosts.length / count);
            if (sexPosts.length > 5) {
                var from = -count + (count * page);
                var to = 0 + (count * page);
                sexPosts = sexPosts.slice(from, to);
            }
            ;
            results['posts'] = sexPosts;
            results['sex'] = sexId;
            results['count'] = sexPosts.length;
            results['posts'].forEach(function (result) {
                var authorPromise = Q.defer();
                var metadataPromise = Q.defer();
                _postAuthorPopulate.push(authorPromise.promise);
                _postMetadataPopulate.push(metadataPromise.promise);
                // populate author's avatar
                authServ.getUserAvatar(result.author.id, "thumb").then(function (data) {
                    result['author']['avatar'] = data['avatar'];
                    authorPromise.resolve(data);
                    // populate metadatagi
                    metadataServ.getProductMetadata(result.id).then(function (data2) {
                        result['metadata'] = data2;
                        metadataPromise.resolve(data2);
                    });
                });
            });
            Q.all(_postAuthorPopulate.concat(_postMetadataPopulate)).then(function (values) {
                _listPromise.resolve(results);
            });
        });
        return _listPromise.promise;
    };
    ProductsService.prototype.createProduct = function (authorId, title, content, img, subcategory0, subcategory1, styles, sex, subImg1, subImg2, subImg3, subImg4, subImg5, subImg6, productionCost, sell, sellPrice, sellNote, rental, rentalPrice, rentalNote) {
        var _this = this;
        var _promise = Q.defer();
        var promisesList = [];
        var now = new Date();
        var query = "INSERT INTO wp2_posts (ID, post_author, post_content, post_title, post_status, comment_status, ping_status, post_name, post_type, post_date, post_date_gmt) " + "VALUES (NULL, '" + authorId + "', '" + content + "', '" + title + "', 'publish', 'open', 'open', '" + title.replace(/\s/g, '-') + "', 'post', '" + now.toISOString() + "','" + now.toISOString() + "')";
        this.db.query_db(query).then(function (data) {
            var guid = "http://sof.tokyo/?p=" + data['insertId'];
            var query2 = "UPDATE wp2_posts SET guid = '" + guid + "' WHERE ID = " + data['insertId'];
            _this.db.query_db(query2).then(function (data2) {
                var query3 = "INSERT INTO wp2_postmeta (meta_id, post_id, meta_key, meta_value)" + "VALUES ";
                if (img) {
                    var imagePromise = Q.defer();
                    promisesList.push(imagePromise.promise);
                    imagesServ.uploadImage(img, data['insertId'], 'sofbackend__sof_work_meta__postImage').then(function (result) {
                        imagePromise.resolve(result);
                    });
                }
                ;
                if (subcategory0)
                    query3 = query3.concat("(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__category_0','" + subcategory0 + "') ");
                if (subcategory1)
                    query3 = query3.concat(",(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__category_1','" + subcategory1 + "') ");
                if (styles) {
                    for (var i in styles) {
                        query3 = query3.concat(",(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__styles','" + styles[i] + "') ");
                    }
                }
                ;
                if (sex)
                    query3 = query3.concat(",(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__sex','" + sex + "') ");
                if (subImg1) {
                    var subimage1Promise = Q.defer();
                    promisesList.push(subimage1Promise.promise);
                    imagesServ.uploadImage(img, data['insertId'], 'sofbackend__sof_work_meta__subImage1').then(function (result) {
                        subimage1Promise.resolve(result);
                    });
                }
                ;
                if (subImg2) {
                    var subimage2Promise = Q.defer();
                    promisesList.push(subimage2Promise.promise);
                    imagesServ.uploadImage(img, data['insertId'], 'sofbackend__sof_work_meta__subImage2').then(function (result) {
                        subimage2Promise.resolve(result);
                    });
                }
                ;
                if (subImg3) {
                    var subimage3Promise = Q.defer();
                    promisesList.push(subimage3Promise.promise);
                    imagesServ.uploadImage(img, data['insertId'], 'sofbackend__sof_work_meta__subImage3').then(function (result) {
                        subimage3Promise.resolve(result);
                    });
                }
                ;
                if (subImg4) {
                    var subimage4Promise = Q.defer();
                    promisesList.push(subimage4Promise.promise);
                    imagesServ.uploadImage(img, data['insertId'], 'sofbackend__sof_work_meta__subImage4').then(function (result) {
                        subimage4Promise.resolve(result);
                    });
                }
                ;
                if (subImg5) {
                    var subimage5Promise = Q.defer();
                    promisesList.push(subimage1Promise.promise);
                    imagesServ.uploadImage(img, data['insertId'], 'sofbackend__sof_work_meta__subImage5').then(function (result) {
                        subimage5Promise.resolve(result);
                    });
                }
                ;
                if (subImg6) {
                    var subimage6Promise = Q.defer();
                    promisesList.push(subimage1Promise.promise);
                    imagesServ.uploadImage(img, data['insertId'], 'sofbackend__sof_work_meta__subImage6').then(function (result) {
                        subimage6Promise.resolve(result);
                    });
                }
                ;
                if (productionCost)
                    query3 = query3.concat(",(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__productionCost'," + productionCost + ") ");
                if (sell)
                    query3 = query3.concat(",(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__sell','" + sell + "') ");
                if (sellPrice)
                    query3 = query3.concat(",(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__sellPrice'," + sellPrice + ") ");
                if (sellNote)
                    query3 = query3.concat(",(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__sellNote','" + sellNote + "') ");
                if (rental)
                    query3 = query3.concat(",(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__rental','" + rental + "') ");
                if (rentalPrice)
                    query3 = query3.concat(",(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__rentalPrice'," + rentalPrice + ") ");
                if (rentalNote)
                    query3 = query3.concat(",(NULL," + data['insertId'] + ",'sofbackend__sof_work_meta__rentalNote','" + rentalNote + "') ");
                var query3Promise = Q.defer();
                promisesList.push(query3Promise.promise);
                _this.db.query_db(query3).then(function (data3) {
                    query3Promise.resolve(data3);
                });
            });
            Q.all(promisesList).then(function (values) {
                _promise.resolve(data);
            });
        });
        return _promise.promise;
    };
    ProductsService.prototype.updateProduct = function (productId, title, content, img, subcategory0, subcategory1, styles, sex, subImg1, subImg2, subImg3, subImg4, subImg5, subImg6, productionCost, sell, sellPrice, sellNote, rental, rentalPrice, rentalNote) {
        var _promise = Q.defer();
        var promisesList = [];
        if (title) {
            var titlePromise = Q.defer();
            promisesList.push(titlePromise.promise);
            this.db.query_db("UPDATE wp2_posts SET post_title=" + title + " WHERE ID=" + productId).then(function () {
                titlePromise.resolve(true);
            });
        }
        ;
        if (content) {
            var contentPromise = Q.defer();
            promisesList.push(contentPromise.promise);
            this.db.query_db("UPDATE wp2_posts SET post_content=" + content + " WHERE ID=" + productId).then(function () {
                contentPromise.resolve(true);
            });
        }
        ;
        if (img) {
            var imagePromise = Q.defer();
            promisesList.push(imagePromise.promise);
            imagesServ.updateImage(img, productId, 'sofbackend__sof_work_meta__postImage').then(function (result) {
                imagePromise.resolve(result);
            });
        }
        ;
        if (subcategory0) {
            var subcat0Promise = Q.defer();
            promisesList.push(subcat0Promise.promise);
            this.db.query_db("UPDATE wp2_postmeta SET meta_value=" + subcategory0 + " WHERE meta_key='sofbackend__sof_work_meta__category_0' AND post_id=" + productId).then(function () {
                subcat0Promise.resolve(true);
            });
        }
        ;
        if (subcategory1) {
            var subcat1Promise = Q.defer();
            promisesList.push(subcat1Promise.promise);
            this.db.query_db("UPDATE wp2_postmeta SET meta_value=" + subcategory1 + " WHERE meta_key='sofbackend__sof_work_meta__category_1' AND post_id=" + productId).then(function () {
                subcat1Promise.resolve(true);
            });
        }
        ;
        if (sex) {
            var sexPromise = Q.defer();
            promisesList.push(sexPromise.promise);
            this.db.query_db("UPDATE wp2_postmeta SET meta_value=" + sex + " WHERE meta_key='sofbackend__sof_work_meta__sex' AND post_id=" + productId).then(function () {
                sexPromise.resolve(true);
            });
        }
        ;
        Q.all(promisesList).then(function (values) {
            _promise.resolve(true);
        });
        return _promise.promise;
    };
    ProductsService.prototype.deleteProduct = function (nonce, productId) {
        return this.db.query('posts/delete_post/?nonce=' + nonce + '&id=' + productId);
    };
    ProductsService.prototype.createComment = function (productId, cookie, content) {
        return this.db.query('user/post_comment/?post_id=' + productId + '&cookie=' + cookie + '&comment_status=1' + '&content=' + content);
    };
    ProductsService.prototype.getProductsBySearch = function (search, page) {
        var _searchPromise = Q.defer();
        this.db.query('core/get_search_results/?count=10&search=' + search + '&page=' + page).then(function (results) {
            var _postAuthorPopulate = [];
            results['posts'].forEach(function (result) {
                var authorPromise = Q.defer();
                _postAuthorPopulate.push(authorPromise.promise);
                authServ.getUserAvatar(result.author.id, "thumb").then(function (data) {
                    result['author']['avatar'] = data['avatar'];
                    authorPromise.resolve(data);
                    metadataServ.getProductMetadata(result.id).then(function (data2) {
                        result['metadata'] = data2;
                    });
                });
            });
            Q.all(_postAuthorPopulate).then(function () {
                _searchPromise.resolve(results);
            });
        });
        return _searchPromise.promise;
    };
    ProductsService.prototype.getProductsRankingByLikes = function () {
        var _this = this;
        var _responsePromise = Q.defer();
        var _productsPromises = [];
        var _response = {
            posts: []
        };
        var query = "SELECT * FROM " + "( " + "SELECT wp2_posts.ID AS post_id, " + "wp2_posts.post_title AS title, " + "wp2_posts.post_date_gmt AS date, " + "wp2_postmeta.meta_value AS likes, " + "wp2_users.display_name AS author " + "FROM `wp2_posts` " + "JOIN wp2_users ON wp2_posts.post_author = wp2_users.ID " + "JOIN wp2_postmeta ON wp2_posts.ID = wp2_postmeta.post_id " + "WHERE wp2_postmeta.meta_key = '_item_likes' " + ") table1 " + "ORDER BY likes DESC " + "LIMIT 5";
        this.db.query_db(query).then(function (data) {
            data.forEach(function (product) {
                var _promise = Q.defer();
                _productsPromises.push(_promise.promise);
                _this.getProductById(product['post_id']).then(function (result) {
                    _promise.resolve(result['post']);
                });
            });
            Q.all(_productsPromises).then(function (results) {
                _responsePromise.resolve(results);
            });
        });
        return _responsePromise.promise;
    };
    ProductsService.prototype.getProductsRankingByVisits = function () {
        var _promise = Q.defer();
        var query = "SELECT * FROM " + "( " + "SELECT wp2_posts.ID AS post_id, " + "wp2_posts.post_title AS title, " + "wp2_posts.post_date_gmt AS date, " + "wp2_users.display_name AS author, " + "wp2_post_views.count AS visits " + "FROM `wp2_posts` " + "JOIN wp2_users ON wp2_posts.post_author = wp2_users.ID " + "JOIN wp2_post_views ON wp2_posts.ID = wp2_post_views.id " + "WHERE wp2_post_views.period = 'total' " + ") table1 " + "JOIN " + "( " + "SELECT wp2_postmeta.post_id, " + "wp2_postmeta.meta_value AS image " + "FROM wp2_postmeta " + "WHERE wp2_postmeta.meta_key = 'sofbackend__sof_work_meta__postImage' " + ") table2 " + "ON table1.post_id = table2.post_id " + "ORDER BY visits DESC " + "LIMIT 10";
        this.db.query_db(query).then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    ProductsService.prototype.test1ProductList = function () {
        var _promise = Q.defer();
        var count = 10;
        var query = "SELECT wp2_posts.ID AS post_id, post_title, wp2_users.display_name AS author, wp2_users.id AS author_id, " + "wp2_posts.post_content, wp2_posts.post_date_gmt, " + "views_table.post_views, " + "CONCAT('{', GROUP_CONCAT(CONCAT('\"', meta_key, '\": ', '\"', meta_value, '\"') SEPARATOR ', '), '}') AS metadata " + "FROM wp2_posts " + "INNER JOIN wp2_postmeta " + "ON wp2_posts.ID = wp2_postmeta.post_id " + "INNER JOIN wp2_users " + "ON wp2_posts.post_author = wp2_users.ID " + "INNER JOIN ( " + "SELECT id AS post_id, count AS post_views " + "FROM wp2_post_views " + "WHERE wp2_post_views.type = 4 " + ") AS views_table " + "ON wp2_posts.ID = views_table.post_id " + "WHERE wp2_posts.post_type = 'post' " + "GROUP BY wp2_posts.ID " + "ORDER BY RAND() " + "LIMIT " + count;
        this.db.query_db(query).then(function (data) {
            _promise.resolve(data);
        });
        return _promise.promise;
    };
    ProductsService.prototype.test2ProductList = function () {
        var _promise = Q.defer();
        var count = 10;
        var query = "SELECT wp2_posts.ID AS post_id, post_title, wp2_users.display_name AS author, wp2_users.id AS author_id, " + "wp2_posts.post_content, wp2_posts.post_date_gmt, " + "views_table.post_views, " + "CONCAT('{', GROUP_CONCAT(CONCAT('\"', meta_key, '\": ', '\"', meta_value, '\"') SEPARATOR ', '), '}') AS metadata " + "FROM wp2_posts " + "INNER JOIN wp2_postmeta " + "ON wp2_posts.ID = wp2_postmeta.post_id " + "INNER JOIN wp2_users " + "ON wp2_posts.post_author = wp2_users.ID " + "INNER JOIN ( " + "SELECT id AS post_id, count AS post_views " + "FROM wp2_post_views " + "WHERE wp2_post_views.type = 4 " + ") AS views_table " + "ON wp2_posts.ID = views_table.post_id " + "WHERE wp2_posts.post_type = 'post' " + "GROUP BY wp2_posts.ID " + "ORDER BY RAND() " + "LIMIT " + count;
        this.db.query_db(query).then(function (data) {
            var dataJson = JSON.parse(JSON.stringify(data));
            var _postAuthorPopulate = [];
            dataJson.forEach(function (product) {
                var authorPromise = Q.defer();
                _postAuthorPopulate.push(authorPromise.promise);
                authServ.getUserAvatar(product.author_id, "thumb").then(function (data) {
                    product['author_avatar'] = data['avatar'];
                    authorPromise.resolve(data);
                });
            });
            Q.all(_postAuthorPopulate).then(function (values) {
                _promise.resolve(dataJson);
            });
        });
        return _promise.promise;
    };
    return ProductsService;
})();
exports.ProductsService = ProductsService;
;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvcHJvZHVjdHMvcHJvZHVjdHMuc2VydmljZS50cyJdLCJuYW1lcyI6WyJQcm9kdWN0c1NlcnZpY2UiLCJQcm9kdWN0c1NlcnZpY2UuY29uc3RydWN0b3IiLCJQcm9kdWN0c1NlcnZpY2UuZ2V0UHJvZHVjdHNOZXciLCJQcm9kdWN0c1NlcnZpY2UuZ2V0UHJvZHVjdHNMaXN0IiwiUHJvZHVjdHNTZXJ2aWNlLmdldFByb2R1Y3RzTGlzdC5zaHVmZmxlIiwiUHJvZHVjdHNTZXJ2aWNlLmdldFByb2R1Y3RCeUlkIiwiUHJvZHVjdHNTZXJ2aWNlLmdldFByb2R1Y3RzQnlBdXRob3IiLCJQcm9kdWN0c1NlcnZpY2UuZ2V0UHJvZHVjdHNCeVNjaG9vbCIsIlByb2R1Y3RzU2VydmljZS5nZXRQcm9kdWN0c0J5T3B0aW9uc1NlYXJjaCIsIlByb2R1Y3RzU2VydmljZS5nZXRQcm9kdWN0c0J5U3ViY2F0ZWdvcnkwIiwiUHJvZHVjdHNTZXJ2aWNlLmdldFByb2R1Y3RzQnlTdWJjYXRlZ29yeTEiLCJQcm9kdWN0c1NlcnZpY2UuZ2V0UHJvZHVjdHNCeVN0eWxlIiwiUHJvZHVjdHNTZXJ2aWNlLmdldFByb2R1Y3RzQnlTZXgiLCJQcm9kdWN0c1NlcnZpY2UuY3JlYXRlUHJvZHVjdCIsIlByb2R1Y3RzU2VydmljZS51cGRhdGVQcm9kdWN0IiwiUHJvZHVjdHNTZXJ2aWNlLmRlbGV0ZVByb2R1Y3QiLCJQcm9kdWN0c1NlcnZpY2UuY3JlYXRlQ29tbWVudCIsIlByb2R1Y3RzU2VydmljZS5nZXRQcm9kdWN0c0J5U2VhcmNoIiwiUHJvZHVjdHNTZXJ2aWNlLmdldFByb2R1Y3RzUmFua2luZ0J5TGlrZXMiLCJQcm9kdWN0c1NlcnZpY2UuZ2V0UHJvZHVjdHNSYW5raW5nQnlWaXNpdHMiLCJQcm9kdWN0c1NlcnZpY2UudGVzdDFQcm9kdWN0TGlzdCIsIlByb2R1Y3RzU2VydmljZS50ZXN0MlByb2R1Y3RMaXN0Il0sIm1hcHBpbmdzIjoiQUFBQSxrREFBa0Q7QUFDbEQs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ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9jb25uZWN0aW9uL2Nvbm5lY3Rpb24uc2VydmljZS50c1wiIC8+XG5cbmltcG9ydCBRID0gcmVxdWlyZShcInFcIik7XG5pbXBvcnQgY29ubmVjdGlvbiA9IHJlcXVpcmUoJy4uL2Nvbm5lY3Rpb24vY29ubmVjdGlvbi5zZXJ2aWNlJylcbmltcG9ydCBhdXRoID0gcmVxdWlyZShcIi4uL2F1dGgvYXV0aC5zZXJ2aWNlXCIpXG5pbXBvcnQgbWV0YWRhdGEgPSByZXF1aXJlKFwiLi4vbWV0YWRhdGEvbWV0YWRhdGEuc2VydmljZVwiKTtcbmltcG9ydCBpbWFnZXMgPSByZXF1aXJlKFwiLi4vaW1hZ2VzL2ltYWdlcy5zZXJ2aWNlXCIpO1xuXG52YXIgYXV0aFNlcnYgPSBuZXcgYXV0aC5BdXRoU2VydmljZSgpO1xudmFyIG1ldGFkYXRhU2VydiA9IG5ldyBtZXRhZGF0YS5NZXRhZGF0YVNlcnZpY2UoKTtcbnZhciBpbWFnZXNTZXJ2ID0gbmV3IGltYWdlcy5JbWFnZXNTZXJ2aWNlKCk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVByb2R1Y3RzU2VydmljZSB7XG4gICAgLy8gR0VUXG4gICAgZ2V0UHJvZHVjdHNOZXcocGFnZSk6IFEuSVByb21pc2U8e30+O1xuICAgIGdldFByb2R1Y3RzTGlzdChwYWdlKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0UHJvZHVjdEJ5SWQocHJvZHVjdElkKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0UHJvZHVjdHNCeUF1dGhvcihhdXRob3JJZCwgcGFnZSk6IFEuSVByb21pc2U8e30+O1xuICAgIGdldFByb2R1Y3RzQnlTY2hvb2woc2Nob29sSWQsIHBhZ2UpOiBRLklQcm9taXNlPHt9PjtcbiAgICBnZXRQcm9kdWN0c0J5U3ViY2F0ZWdvcnkwKHN1YmNhdGVnb3J5MElkLCBwYWdlKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0UHJvZHVjdHNCeVN1YmNhdGVnb3J5MShzdWJjYXRlZ29yeTFJZCwgcGFnZSk6IFEuSVByb21pc2U8e30+O1xuICAgIGdldFByb2R1Y3RzQnlTdHlsZShzdHlsZUlkLCBwYWdlKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0UHJvZHVjdHNCeVNleChzZXhJZCwgcGFnZSk6IFEuSVByb21pc2U8e30+O1xuICAgIGdldFByb2R1Y3RzQnlTZWFyY2goc2VhcmNoLCBwYWdlKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0UHJvZHVjdHNCeU9wdGlvbnNTZWFyY2goc2VhcmNoLCBzdWJjYXRlZ29yeTAsIHN1YmNhdGVnb3J5MSwgc3R5bGUsIHNleCwgc2Nob29sKTogUS5JUHJvbWlzZTx7fT47XG4gICAgZ2V0UHJvZHVjdHNSYW5raW5nQnlMaWtlcygpOiBRLklQcm9taXNlPHt9PjtcbiAgICBnZXRQcm9kdWN0c1JhbmtpbmdCeVZpc2l0cygpOiBRLklQcm9taXNlPHt9PjtcbiAgICAvLyBQT1NUXG4gICAgY3JlYXRlUHJvZHVjdChhdXRob3JJZCwgdGl0bGUsIGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGltZywgc3ViY2F0ZWdvcnkwLCBzdWJjYXRlZ29yeTEsIHN0eWxlcywgc2V4LCBzdWJpbWcxLCBzdWJpbWcyLCBzdWJpbWczLCBzdWJpbWc0LCBzdWJpbWc1LCBzdWJpbWc2LFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aW9uQ29zdCwgc2VsbCwgc2VsbFByaWNlLCBzZWxsTm90ZSwgcmVudGFsLCByZW50YWxQcmljZSwgcmVudGFsTm90ZSk6IFEuSVByb21pc2U8e30+O1xuICAgIGNyZWF0ZUNvbW1lbnQocHJvZHVjdElkLCBjb29raWUsIGNvbnRlbnQpOiBRLklQcm9taXNlPHt9PjtcbiAgICAvLyBQVVRcbiAgICB1cGRhdGVQcm9kdWN0KHByb2R1Y3RJZCwgdGl0bGUsIGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGltZywgc3ViY2F0ZWdvcnkwLCBzdWJjYXRlZ29yeTEsIHN0eWxlcywgc2V4LCBzdWJpbWcxLCBzdWJpbWcyLCBzdWJpbWczLCBzdWJpbWc0LCBzdWJpbWc1LCBzdWJpbWc2LFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aW9uQ29zdCwgc2VsbCwgc2VsbFByaWNlLCBzZWxsTm90ZSwgcmVudGFsLCByZW50YWxQcmljZSwgcmVudGFsTm90ZSk6IFEuSVByb21pc2U8e30+O1xuICAgIC8vIERFTEVURVxuICAgIGRlbGV0ZVByb2R1Y3Qobm9uY2UsIHByb2R1Y3RJZCk6IFEuSVByb21pc2U8e30+O1xuXG4gICAgdGVzdDFQcm9kdWN0TGlzdCgpOiBRLklQcm9taXNlPHt9PjtcbiAgICB0ZXN0MlByb2R1Y3RMaXN0KCk6IFEuSVByb21pc2U8e30+O1xufVxuXG52YXIgaW5BcnJheSA9IGZ1bmN0aW9uKG15QXJyYXksIG15VmFsdWUpIHtcbiAgICB2YXIgaW5BcnJheSA9IGZhbHNlO1xuICAgIG15QXJyYXkubWFwKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICBpZiAoa2V5ID09PSBteVZhbHVlKSB7XG4gICAgICAgICAgICBpbkFycmF5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpbkFycmF5O1xufTtcblxuZXhwb3J0IGNsYXNzIFByb2R1Y3RzU2VydmljZSBpbXBsZW1lbnRzIElQcm9kdWN0c1NlcnZpY2Uge1xuICAgIHByaXZhdGUgZGIgPSBjb25uZWN0aW9uLnNlcnZpY2U7XG5cbiAgICBnZXRQcm9kdWN0c05ldyhwYWdlKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX2xpc3RQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICB0aGlzLmRiLnF1ZXJ5KCdjb3JlLz9qc29uPWdldF9yZWNlbnRfcG9zdHMmY291bnQ9MTAmcGFnZT0nICsgcGFnZSlcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIF9wb3N0QXV0aG9yUG9wdWxhdGUgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgX3Bvc3RNZXRhZGF0YVBvcHVsYXRlID0gW107XG5cbiAgICAgICAgICAgICAgICByZXN1bHRzWydwb3N0cyddLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXV0aG9yUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGFkYXRhUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgX3Bvc3RBdXRob3JQb3B1bGF0ZS5wdXNoKGF1dGhvclByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgIF9wb3N0TWV0YWRhdGFQb3B1bGF0ZS5wdXNoKG1ldGFkYXRhUHJvbWlzZS5wcm9taXNlKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBwb3B1bGF0ZSBhdXRob3IncyBhdmF0YXJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFNlcnYuZ2V0VXNlckF2YXRhcihyZXN1bHQuYXV0aG9yLmlkLCBcInRodW1iXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsnYXV0aG9yJ11bJ2F2YXRhciddID0gZGF0YVsnYXZhdGFyJ107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yUHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgbWV0YWRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YVNlcnYuZ2V0UHJvZHVjdE1ldGFkYXRhKHJlc3VsdC5pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbJ21ldGFkYXRhJ10gPSBkYXRhMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhUHJvbWlzZS5yZXNvbHZlKGRhdGEyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBRLmFsbChfcG9zdEF1dGhvclBvcHVsYXRlLmNvbmNhdChfcG9zdE1ldGFkYXRhUG9wdWxhdGUpKVxuICAgICAgICAgICAgICAgIC50aGVuKCh2YWx1ZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gX2xpc3RQcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZ2V0UHJvZHVjdHNMaXN0KHBhZ2UpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHZhciBfbGlzdFByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHZhciBjb3VudCA9IDEwO1xuICAgICAgICB0aGlzLmRiLnF1ZXJ5KCdjb3JlLz9qc29uPWdldF9wb3N0cyZjb3VudD0nICsgY291bnQgKyAnJnBhZ2U9JyArIHBhZ2UpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0cykgPT4ge1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2h1ZmZsZShvKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGosIHgsIGkgPSBvLmxlbmd0aDsgaTsgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGkpLCB4ID0gb1stLWldLCBvW2ldID0gb1tqXSwgb1tqXSA9IHgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHNodWZmbGVkID0gc2h1ZmZsZShyZXN1bHRzWydwb3N0cyddKTtcblxuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ3Bvc3RzJ10gPSBzaHVmZmxlZDtcbiAgICAgICAgICAgICAgICB2YXIgX3Bvc3RBdXRob3JQb3B1bGF0ZSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBfcG9zdE1ldGFkYXRhUG9wdWxhdGUgPSBbXTtcblxuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ3Bvc3RzJ10uZm9yRWFjaCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdXRob3JQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YWRhdGFQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICBfcG9zdEF1dGhvclBvcHVsYXRlLnB1c2goYXV0aG9yUHJvbWlzZS5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgX3Bvc3RNZXRhZGF0YVBvcHVsYXRlLnB1c2gobWV0YWRhdGFQcm9taXNlLnByb21pc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHBvcHVsYXRlIGF1dGhvcidzIGF2YXRhclxuICAgICAgICAgICAgICAgICAgICBhdXRoU2Vydi5nZXRVc2VyQXZhdGFyKHJlc3VsdC5hdXRob3IuaWQsIFwidGh1bWJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WydhdXRob3InXVsnYXZhdGFyJ10gPSBkYXRhWydhdmF0YXInXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JQcm9taXNlLnJlc29sdmUoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3B1bGF0ZSBtZXRhZGF0YWdpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFTZXJ2LmdldFByb2R1Y3RNZXRhZGF0YShyZXN1bHQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WydtZXRhZGF0YSddID0gZGF0YTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YVByb21pc2UucmVzb2x2ZShkYXRhMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgUS5hbGwoX3Bvc3RBdXRob3JQb3B1bGF0ZS5jb25jYXQoX3Bvc3RNZXRhZGF0YVBvcHVsYXRlKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHZhbHVlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIF9saXN0UHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGdldFByb2R1Y3RCeUlkKHByb2R1Y3RJZCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9wcm9kdWN0UHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgdGhpcy5kYi5xdWVyeSgnY29yZS9nZXRfcG9zdC8/aWQ9JyArIHByb2R1Y3RJZClcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX3Byb21pc2VzID0gW107XG5cbiAgICAgICAgICAgICAgICAvLyBzYXZlIHZpc2l0XG4gICAgICAgICAgICAgICAgdmFyIHNhdmVWaXNpdFByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgX3Byb21pc2VzLnB1c2goc2F2ZVZpc2l0UHJvbWlzZS5wcm9taXNlKTtcblxuICAgICAgICAgICAgICAgIHZhciB2aXNpdFF1ZXJ5ID0gXCJJTlNFUlQgSU5UTyB3cDJfcG9zdF92aWV3cyAoaWQsIHR5cGUsIHBlcmlvZCwgY291bnQpIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVkFMVUVTIChcIiArIHByb2R1Y3RJZCArIFwiLDQsJ3RvdGFsJywxKSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIk9OIERVUExJQ0FURSBLRVkgVVBEQVRFIGNvdW50PWNvdW50KzFcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmRiLnF1ZXJ5X2RiKHZpc2l0UXVlcnkpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVWaXNpdFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgcHJvZHVjdCB2aXNpdHNcbiAgICAgICAgICAgICAgICB2YXIgdmlld1Zpc2l0c1Byb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgX3Byb21pc2VzLnB1c2godmlld1Zpc2l0c1Byb21pc2UucHJvbWlzZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgdmlzaXRRdWVyeSA9IFwiU0VMRUNUIGNvdW50IEZST00gd3AyX3Bvc3Rfdmlld3MgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJXSEVSRSBpZD1cIiArIHByb2R1Y3RJZCArIFwiIEFORCB0eXBlPTQgQU5EIHBlcmlvZD0ndG90YWwnXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5kYi5xdWVyeV9kYih2aXNpdFF1ZXJ5KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Wydwb3N0J11bJ3Zpc2l0cyddID0gZGF0YVswXVsnY291bnQnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdWaXNpdHNQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIHBvcHVsYXRlIGF1dGhvcidzIGF2YXRhclxuICAgICAgICAgICAgICAgIGF1dGhTZXJ2LmdldFVzZXJBdmF0YXIocmVzdWx0Wydwb3N0J11bJ2F1dGhvciddWydpZCddLCBcInRodW1iXCIpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV0aG9yUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wcm9taXNlcy5wdXNoKGF1dGhvclByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbJ3Bvc3QnXVsnYXV0aG9yJ11bJ2F2YXRhciddID0gZGF0YVsnYXZhdGFyJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JQcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ3Bvc3QnXVsnY29tbWVudHMnXSAmJiByZXN1bHRbJ3Bvc3QnXVsnY29tbWVudHMnXS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIGVhY2ggY29tbWVudFxuICAgICAgICAgICAgICAgICAgICByZXN1bHRbJ3Bvc3QnXVsnY29tbWVudHMnXS5mb3JFYWNoKChjb21tZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWVudFByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcHJvbWlzZXMucHVzaChjb21tZW50UHJvbWlzZS5wcm9taXNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgY29tbWVudHMgYXZhdGFyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoU2Vydi5nZXRVc2VyQXZhdGFyKGNvbW1lbnQuYXV0aG9yLmlkLCBcInRodW1iXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGF2YXRhcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50WydhdXRob3InXVsnYXZhdGFyJ10gPSBhdmF0YXJbJ2F2YXRhciddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50UHJvbWlzZS5yZXNvbHZlKGF2YXRhcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgbWV0YWRhdGFcbiAgICAgICAgICAgICAgICBtZXRhZGF0YVNlcnYuZ2V0UHJvZHVjdE1ldGFkYXRhKHJlc3VsdFsncG9zdCddWydpZCddKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigobWV0YWRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhZGF0YVByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcHJvbWlzZXMucHVzaChtZXRhZGF0YVByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbJ3Bvc3QnXVsnbWV0YWRhdGEnXSA9IG1ldGFkYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFQcm9taXNlLnJlc29sdmUobWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgUS5hbGwoX3Byb21pc2VzKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigodmFsdWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfcHJvZHVjdFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIF9wcm9kdWN0UHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGdldFByb2R1Y3RzQnlBdXRob3IoYXV0aG9ySWQpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHZhciBfcHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgdGhpcy5kYi5xdWVyeSgnY29yZS9nZXRfYXV0aG9yX3Bvc3RzLz9jb3VudD0xMCZpZD0nICsgYXV0aG9ySWQpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfcG9zdEF1dGhvclBvcHVsYXRlID0gW107XG4gICAgICAgICAgICAgICAgdmFyIF9wb3N0TWV0YWRhdGFQb3B1bGF0ZSA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgIF9wb3N0QXV0aG9yUG9wdWxhdGUucHVzaChoZWFkZXJQcm9taXNlLnByb21pc2UpO1xuXG4gICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgaGVhZGVyIGF2YXRhclxuICAgICAgICAgICAgICAgIGF1dGhTZXJ2LmdldFVzZXJBdmF0YXIocmVzdWx0c1snYXV0aG9yJ11bJ2lkJ10sIFwidGh1bWJcIilcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbJ2F1dGhvciddWydhdmF0YXInXSA9IGRhdGFbJ2F2YXRhciddO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyUHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzWydwb3N0cyddLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdXRob3JQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhZGF0YVByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Bvc3RBdXRob3JQb3B1bGF0ZS5wdXNoKGF1dGhvclByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Bvc3RNZXRhZGF0YVBvcHVsYXRlLnB1c2gobWV0YWRhdGFQcm9taXNlLnByb21pc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgYXV0aG9yJ3MgYXZhdGFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WydhdXRob3InXVsnYXZhdGFyJ10gPSBkYXRhWydhdmF0YXInXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JQcm9taXNlLnJlc29sdmUoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3B1bGF0ZSBtZXRhZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhU2Vydi5nZXRQcm9kdWN0TWV0YWRhdGEocmVzdWx0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YTIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsnbWV0YWRhdGEnXSA9IGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFQcm9taXNlLnJlc29sdmUoZGF0YTIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgUS5hbGwoX3Bvc3RBdXRob3JQb3B1bGF0ZS5jb25jYXQoX3Bvc3RNZXRhZGF0YVBvcHVsYXRlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigodmFsdWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfcHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGdldFByb2R1Y3RzQnlTY2hvb2woc2Nob29sSWQsIHBhZ2UpOiBRLklQcm9taXNlPHt9PiB7XG4gICAgICAgIHZhciBfbGlzdFByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHZhciBfcG9zdEF1dGhvclBvcHVsYXRlID0gW107XG4gICAgICAgIHZhciBfcG9zdE1ldGFkYXRhUG9wdWxhdGUgPSBbXTtcblxuICAgICAgICB0aGlzLmRiLnF1ZXJ5KCdjb3JlLz9qc29uPWdldF9wb3N0cyZjb3VudD0yMDAnKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgcG9zdHMgPSByZXN1bHRzWydwb3N0cyddO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihcIlNFTEVDVCB1c2VyX2lkIEZST00gd3AyX2JwX3hwcm9maWxlX2RhdGEgV0hFUkUgdmFsdWU9J1wiICsgc2Nob29sSWQgKyBcIicgQU5EIGZpZWxkX2lkPTRcIilcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1c2VySWRzID0gW11cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZHMucHVzaChkYXRhW2ldLnVzZXJfaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nob29sUG9zdHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gcG9zdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5BcnJheSh1c2VySWRzLCBwb3N0c1tqXS5hdXRob3IuaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaG9vbFBvc3RzLnB1c2gocG9zdHNbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwYWdpbmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbJ2NvdW50X3RvdGFsJ10gPSBzY2hvb2xQb3N0cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzWydwYWdlcyddID0gTWF0aC5mbG9vcihzY2hvb2xQb3N0cy5sZW5ndGggLyBjb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Nob29sUG9zdHMubGVuZ3RoID4gY291bnQtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcm9tID0gLWNvdW50ICsgKGNvdW50ICogcGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvID0gMCArIChjb3VudCAqIHBhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nob29sUG9zdHMgPSBzY2hvb2xQb3N0cy5zbGljZShmcm9tLCB0byk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzWydwb3N0cyddID0gc2Nob29sUG9zdHM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzWydzY2hvb2wnXSA9IHNjaG9vbElkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1snY291bnQnXSA9IHNjaG9vbFBvc3RzLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1sncG9zdHMnXS5mb3JFYWNoKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV0aG9yUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YWRhdGFQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wb3N0QXV0aG9yUG9wdWxhdGUucHVzaChhdXRob3JQcm9taXNlLnByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wb3N0TWV0YWRhdGFQb3B1bGF0ZS5wdXNoKG1ldGFkYXRhUHJvbWlzZS5wcm9taXNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvcHVsYXRlIGF1dGhvcidzIGF2YXRhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhTZXJ2LmdldFVzZXJBdmF0YXIocmVzdWx0LmF1dGhvci5pZCwgXCJ0aHVtYlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WydhdXRob3InXVsnYXZhdGFyJ10gPSBkYXRhWydhdmF0YXInXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhvclByb21pc2UucmVzb2x2ZShkYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgbWV0YWRhdGFnaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFTZXJ2LmdldFByb2R1Y3RNZXRhZGF0YShyZXN1bHQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsnbWV0YWRhdGEnXSA9IGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YVByb21pc2UucmVzb2x2ZShkYXRhMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBRLmFsbChfcG9zdEF1dGhvclBvcHVsYXRlLmNvbmNhdChfcG9zdE1ldGFkYXRhUG9wdWxhdGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCh2YWx1ZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gX2xpc3RQcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZ2V0UHJvZHVjdHNCeU9wdGlvbnNTZWFyY2goc2VhcmNoLCBzdWJjYXRlZ29yeTAsIHN1YmNhdGVnb3J5MSwgc3R5bGUsIHNleCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9wcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICBpZiAoc2VhcmNoID09ICdudWxsJykgc2VhcmNoID0gJyc7XG4gICAgICAgIGlmIChzdWJjYXRlZ29yeTAgPT0gJ251bGwnKSBzZWFyY2ggPSAnJztcbiAgICAgICAgaWYgKHN1YmNhdGVnb3J5MSA9PSAnbnVsbCcpIHNlYXJjaCA9ICcnO1xuICAgICAgICBpZiAoc3R5bGUgPT0gJ251bGwnKSBzZWFyY2ggPSAnJztcbiAgICAgICAgaWYgKHNleCA9PSAnbnVsbCcpIHNlYXJjaCA9ICcnO1xuICAgICAgICB2YXIgcXVlcnkgPSBcIlNFTEVDVCBwb3N0X2RhdGEucG9zdF9pZCwgcG9zdF9kYXRhLnRpdGxlLCBwb3N0X2RhdGEuZGF0ZSwgcG9zdF9kYXRhLmF1dGhvciwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImltYWdlLmltYWdlLCBzdWJjYXRlZ29yeTAuc3ViY2F0ZWdvcnkwLCBzdWJjYXRlZ29yeTEuc3ViY2F0ZWdvcnkxLCBzdHlsZS5zdHlsZSwgc2V4LnNleCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiRlJPTSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIihTRUxFQ1Qgd3AyX3Bvc3RzLklEIEFTIHBvc3RfaWQsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid3AyX3Bvc3RzLnBvc3RfdGl0bGUgQVMgdGl0bGUsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid3AyX3Bvc3RzLnBvc3RfZGF0ZV9nbXQgQVMgZGF0ZSwgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3cDJfdXNlcnMuZGlzcGxheV9uYW1lIEFTIGF1dGhvciwgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3cDJfdXNlcnMuSUQgQVMgYXV0aG9yX2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRlJPTSBgd3AyX3Bvc3RzYCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkpPSU4gd3AyX3VzZXJzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiT04gd3AyX3Bvc3RzLnBvc3RfYXV0aG9yID0gd3AyX3VzZXJzLklEIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgd3AyX3Bvc3RzLnBvc3RfdGl0bGUgTElLRSAnJVwiICsgc2VhcmNoICsgXCIlJyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIikgcG9zdF9kYXRhIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJKT0lOIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiKFNFTEVDVCB3cDJfcG9zdG1ldGEucG9zdF9pZCwgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3cDJfcG9zdG1ldGEubWV0YV92YWx1ZSBBUyBpbWFnZSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZST00gd3AyX3Bvc3RtZXRhIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgd3AyX3Bvc3RtZXRhLm1ldGFfa2V5ID0gJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3Bvc3RJbWFnZScgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIpIGltYWdlIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJPTiBwb3N0X2RhdGEucG9zdF9pZCA9IGltYWdlLnBvc3RfaWQgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkpPSU4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIoU0VMRUNUIHdwMl9wb3N0bWV0YS5wb3N0X2lkLCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndwMl9wb3N0bWV0YS5tZXRhX3ZhbHVlIEFTIHN1YmNhdGVnb3J5MCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZST00gd3AyX3Bvc3RtZXRhIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgd3AyX3Bvc3RtZXRhLm1ldGFfa2V5ID0gJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX2NhdGVnb3J5XzAnIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQU5EIHdwMl9wb3N0bWV0YS5tZXRhX3ZhbHVlIExJS0UgJyVcIiArIHN1YmNhdGVnb3J5MCArIFwiJScgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIpIHN1YmNhdGVnb3J5MCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiT04gcG9zdF9kYXRhLnBvc3RfaWQgPSBzdWJjYXRlZ29yeTAucG9zdF9pZCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiSk9JTiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIihTRUxFQ1Qgd3AyX3Bvc3RtZXRhLnBvc3RfaWQsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid3AyX3Bvc3RtZXRhLm1ldGFfdmFsdWUgQVMgc3ViY2F0ZWdvcnkxIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRlJPTSB3cDJfcG9zdG1ldGEgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJXSEVSRSB3cDJfcG9zdG1ldGEubWV0YV9rZXkgPSAnc29mYmFja2VuZF9fc29mX3dvcmtfbWV0YV9fY2F0ZWdvcnlfMScgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJBTkQgd3AyX3Bvc3RtZXRhLm1ldGFfdmFsdWUgTElLRSAnJVwiICsgc3ViY2F0ZWdvcnkxICsgXCIlJyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIikgc3ViY2F0ZWdvcnkxIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJPTiBwb3N0X2RhdGEucG9zdF9pZCA9IHN1YmNhdGVnb3J5MS5wb3N0X2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJKT0lOIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiKFNFTEVDVCB3cDJfcG9zdG1ldGEucG9zdF9pZCwgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ3cDJfcG9zdG1ldGEubWV0YV92YWx1ZSBBUyBzdHlsZSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZST00gd3AyX3Bvc3RtZXRhIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgd3AyX3Bvc3RtZXRhLm1ldGFfa2V5ID0gJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3N0eWxlJyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkFORCB3cDJfcG9zdG1ldGEubWV0YV92YWx1ZSBMSUtFICclXCIgKyBzdHlsZSArIFwiJScgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIpIHN0eWxlIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJPTiBwb3N0X2RhdGEucG9zdF9pZCA9IHN0eWxlLnBvc3RfaWQgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkpPSU4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCIoU0VMRUNUIHdwMl9wb3N0bWV0YS5wb3N0X2lkLCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndwMl9wb3N0bWV0YS5tZXRhX3ZhbHVlIEFTIHNleCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZST00gd3AyX3Bvc3RtZXRhIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgd3AyX3Bvc3RtZXRhLm1ldGFfa2V5ID0gJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3NleCcgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJBTkQgd3AyX3Bvc3RtZXRhLm1ldGFfdmFsdWUgTElLRSAnJVwiICsgc2V4ICsgXCIlJyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIikgc2V4IFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJPTiBwb3N0X2RhdGEucG9zdF9pZCA9IHNleC5wb3N0X2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJPUkRFUiBCWSBwb3N0X2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJMSU1JVCAxMFwiO1xuICAgICAgICB0aGlzLmRiLnF1ZXJ5X2RiKHF1ZXJ5KVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdmFyIGRhdGFKc29uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhKSk7XG5cbiAgICAgICAgICAgIHZhciBfcG9zdEF1dGhvclBvcHVsYXRlID0gW107XG4gICAgICAgICAgICB2YXIgX3Bvc3RNZXRhZGF0YVBvcHVsYXRlID0gW107XG5cbiAgICAgICAgICAgIGRhdGFKc29uLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBhdXRob3JQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgIHZhciBtZXRhZGF0YVByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgX3Bvc3RBdXRob3JQb3B1bGF0ZS5wdXNoKGF1dGhvclByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgX3Bvc3RNZXRhZGF0YVBvcHVsYXRlLnB1c2gobWV0YWRhdGFQcm9taXNlLnByb21pc2UpO1xuXG4gICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgYXV0aG9yJ3MgYXZhdGFyXG4gICAgICAgICAgICAgICAgYXV0aFNlcnYuZ2V0VXNlckF2YXRhcihyZXN1bHRbJ2F1dGhvcl9pZCddLCBcInRodW1iXCIpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbJ2F1dGhvcl9hdmF0YXInXSA9IGRhdGFbJ2F2YXRhciddO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yUHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3B1bGF0ZSBtZXRhZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFTZXJ2LmdldFByb2R1Y3RNZXRhZGF0YShyZXN1bHQucG9zdF9pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YTIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WydtZXRhZGF0YSddID0gZGF0YTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhUHJvbWlzZS5yZXNvbHZlKGRhdGEyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFEuYWxsKF9wb3N0QXV0aG9yUG9wdWxhdGUuY29uY2F0KF9wb3N0TWV0YWRhdGFQb3B1bGF0ZSkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHZhbHVlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBfcHJvbWlzZS5yZXNvbHZlKGRhdGFKc29uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIF9wcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZ2V0UHJvZHVjdHNCeVN1YmNhdGVnb3J5MChzdWJjYXRlZ29yeTBJZCwgcGFnZSk6IFEuSVByb21pc2U8e30+IMKge1xuICAgICAgICB2YXIgX2xpc3RQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICB2YXIgX3Bvc3RBdXRob3JQb3B1bGF0ZSA9IFtdO1xuICAgICAgICB2YXIgX3Bvc3RNZXRhZGF0YVBvcHVsYXRlID0gW107XG5cbiAgICAgICAgdGhpcy5kYi5xdWVyeSgnY29yZS8/anNvbj1nZXRfcG9zdHMmY291bnQ9MjAwJylcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3RzID0gcmVzdWx0c1sncG9zdHMnXTtcblxuICAgICAgICAgICAgICAgIHZhciBzdWJjYXRlZ29yeTBQb3N0cyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gcG9zdHMpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zdHNbaV1bJ2N1c3RvbV9maWVsZHMnXVsnc29mYmFja2VuZF9fc29mX3dvcmtfbWV0YV9fY2F0ZWdvcnlfMCddID09IHN1YmNhdGVnb3J5MElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yeTBQb3N0cy5wdXNoKHBvc3RzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gcGFnaW5hdGlvblxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDEwO1xuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ2NvdW50X3RvdGFsJ10gPSBzdWJjYXRlZ29yeTBQb3N0cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1sncGFnZXMnXSA9IE1hdGguZmxvb3Ioc3ViY2F0ZWdvcnkwUG9zdHMubGVuZ3RoIC8gY291bnQpO1xuICAgICAgICAgICAgICAgIGlmIChzdWJjYXRlZ29yeTBQb3N0cy5sZW5ndGggPiBjb3VudC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcm9tID0gLWNvdW50ICsgKGNvdW50ICogcGFnZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0byA9IDAgKyAoY291bnQgKiBwYWdlKVxuICAgICAgICAgICAgICAgICAgICBzdWJjYXRlZ29yeTBQb3N0cyA9IHN1YmNhdGVnb3J5MFBvc3RzLnNsaWNlKGZyb20sIHRvKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmVzdWx0c1sncG9zdHMnXSA9IHN1YmNhdGVnb3J5MFBvc3RzO1xuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ3N1YmNhdGVnb3J5MCddID0gc3ViY2F0ZWdvcnkwSWQ7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1snY291bnQnXSA9IHN1YmNhdGVnb3J5MFBvc3RzLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ3Bvc3RzJ10uZm9yRWFjaCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdXRob3JQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YWRhdGFQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICBfcG9zdEF1dGhvclBvcHVsYXRlLnB1c2goYXV0aG9yUHJvbWlzZS5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgX3Bvc3RNZXRhZGF0YVBvcHVsYXRlLnB1c2gobWV0YWRhdGFQcm9taXNlLnByb21pc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHBvcHVsYXRlIGF1dGhvcidzIGF2YXRhclxuICAgICAgICAgICAgICAgICAgICBhdXRoU2Vydi5nZXRVc2VyQXZhdGFyKHJlc3VsdC5hdXRob3IuaWQsIFwidGh1bWJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WydhdXRob3InXVsnYXZhdGFyJ10gPSBkYXRhWydhdmF0YXInXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JQcm9taXNlLnJlc29sdmUoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3B1bGF0ZSBtZXRhZGF0YWdpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFTZXJ2LmdldFByb2R1Y3RNZXRhZGF0YShyZXN1bHQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WydtZXRhZGF0YSddID0gZGF0YTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YVByb21pc2UucmVzb2x2ZShkYXRhMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgUS5hbGwoX3Bvc3RBdXRob3JQb3B1bGF0ZS5jb25jYXQoX3Bvc3RNZXRhZGF0YVBvcHVsYXRlKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHZhbHVlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIF9saXN0UHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIGdldFByb2R1Y3RzQnlTdWJjYXRlZ29yeTEoc3ViY2F0ZWdvcnkxSWQsIHBhZ2UpOiBRLklQcm9taXNlPHt9PiDCoHtcbiAgICAgICAgdmFyIF9saXN0UHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgdmFyIF9wb3N0QXV0aG9yUG9wdWxhdGUgPSBbXTtcbiAgICAgICAgdmFyIF9wb3N0TWV0YWRhdGFQb3B1bGF0ZSA9IFtdO1xuXG4gICAgICAgIHRoaXMuZGIucXVlcnkoJ2NvcmUvP2pzb249Z2V0X3Bvc3RzJmNvdW50PTIwMCcpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBwb3N0cyA9IHJlc3VsdHNbJ3Bvc3RzJ107XG5cbiAgICAgICAgICAgICAgICB2YXIgc3ViY2F0ZWdvcnkxUG9zdHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHBvc3RzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc3RzW2ldWydjdXN0b21fZmllbGRzJ11bJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX2NhdGVnb3J5XzEnXSA9PSBzdWJjYXRlZ29yeTFJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcnkxUG9zdHMucHVzaChwb3N0c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIHBhZ2luYXRpb25cbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAxMDtcbiAgICAgICAgICAgICAgICByZXN1bHRzWydjb3VudF90b3RhbCddID0gc3ViY2F0ZWdvcnkxUG9zdHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ3BhZ2VzJ10gPSBNYXRoLmZsb29yKHN1YmNhdGVnb3J5MVBvc3RzLmxlbmd0aCAvIGNvdW50KTtcbiAgICAgICAgICAgICAgICBpZiAoc3ViY2F0ZWdvcnkxUG9zdHMubGVuZ3RoID4gY291bnQtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbSA9IC1jb3VudCArIChjb3VudCAqIHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG8gPSAwICsgKGNvdW50ICogcGFnZSlcbiAgICAgICAgICAgICAgICAgICAgc3ViY2F0ZWdvcnkxUG9zdHMgPSBzdWJjYXRlZ29yeTFQb3N0cy5zbGljZShmcm9tLCB0byk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ3Bvc3RzJ10gPSBzdWJjYXRlZ29yeTFQb3N0cztcbiAgICAgICAgICAgICAgICByZXN1bHRzWydzdWJjYXRlZ29yeTEnXSA9IHN1YmNhdGVnb3J5MUlkO1xuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ2NvdW50J10gPSBzdWJjYXRlZ29yeTFQb3N0cy5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICByZXN1bHRzWydwb3N0cyddLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXV0aG9yUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGFkYXRhUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgX3Bvc3RBdXRob3JQb3B1bGF0ZS5wdXNoKGF1dGhvclByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgIF9wb3N0TWV0YWRhdGFQb3B1bGF0ZS5wdXNoKG1ldGFkYXRhUHJvbWlzZS5wcm9taXNlKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBwb3B1bGF0ZSBhdXRob3IncyBhdmF0YXJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFNlcnYuZ2V0VXNlckF2YXRhcihyZXN1bHQuYXV0aG9yLmlkLCBcInRodW1iXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsnYXV0aG9yJ11bJ2F2YXRhciddID0gZGF0YVsnYXZhdGFyJ107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yUHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgbWV0YWRhdGFnaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhU2Vydi5nZXRQcm9kdWN0TWV0YWRhdGEocmVzdWx0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YTIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsnbWV0YWRhdGEnXSA9IGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFQcm9taXNlLnJlc29sdmUoZGF0YTIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIFEuYWxsKF9wb3N0QXV0aG9yUG9wdWxhdGUuY29uY2F0KF9wb3N0TWV0YWRhdGFQb3B1bGF0ZSkpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCh2YWx1ZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9saXN0UHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHJldHVybiBfbGlzdFByb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbiAgICBnZXRQcm9kdWN0c0J5U3R5bGUoc3R5bGVJZCwgcGFnZSk6IFEuSVByb21pc2U8e30+IMKge1xuICAgICAgICB2YXIgX2xpc3RQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICB2YXIgX3Bvc3RBdXRob3JQb3B1bGF0ZSA9IFtdO1xuICAgICAgICB2YXIgX3Bvc3RNZXRhZGF0YVBvcHVsYXRlID0gW107XG5cbiAgICAgICAgdGhpcy5kYi5xdWVyeSgnY29yZS8/anNvbj1nZXRfcG9zdHMmY291bnQ9MjAwJylcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHBvc3RzID0gcmVzdWx0c1sncG9zdHMnXTtcblxuICAgICAgICAgICAgICAgIHZhciBzdHlsZVBvc3RzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBwb3N0cykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3N0c1tpXVsnY3VzdG9tX2ZpZWxkcyddWydzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19zdHlsZSddID09IHN0eWxlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlUG9zdHMucHVzaChwb3N0c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIHBhZ2luYXRpb25cbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAxMDtcbiAgICAgICAgICAgICAgICByZXN1bHRzWydjb3VudF90b3RhbCddID0gc3R5bGVQb3N0cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1sncGFnZXMnXSA9IE1hdGguZmxvb3Ioc3R5bGVQb3N0cy5sZW5ndGggLyBjb3VudCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlUG9zdHMubGVuZ3RoID4gY291bnQtMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZnJvbSA9IC1jb3VudCArIChjb3VudCAqIHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG8gPSAwICsgKGNvdW50ICogcGFnZSlcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVQb3N0cyA9IHN0eWxlUG9zdHMuc2xpY2UoZnJvbSwgdG8pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXN1bHRzWydwb3N0cyddID0gc3R5bGVQb3N0cztcbiAgICAgICAgICAgICAgICByZXN1bHRzWydzdHlsZSddID0gc3R5bGVJZDtcbiAgICAgICAgICAgICAgICByZXN1bHRzWydjb3VudCddID0gc3R5bGVQb3N0cy5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICByZXN1bHRzWydwb3N0cyddLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXV0aG9yUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGFkYXRhUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgX3Bvc3RBdXRob3JQb3B1bGF0ZS5wdXNoKGF1dGhvclByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgIF9wb3N0TWV0YWRhdGFQb3B1bGF0ZS5wdXNoKG1ldGFkYXRhUHJvbWlzZS5wcm9taXNlKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBwb3B1bGF0ZSBhdXRob3IncyBhdmF0YXJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFNlcnYuZ2V0VXNlckF2YXRhcihyZXN1bHQuYXV0aG9yLmlkLCBcInRodW1iXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsnYXV0aG9yJ11bJ2F2YXRhciddID0gZGF0YVsnYXZhdGFyJ107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aG9yUHJvbWlzZS5yZXNvbHZlKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9wdWxhdGUgbWV0YWRhdGFnaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhU2Vydi5nZXRQcm9kdWN0TWV0YWRhdGEocmVzdWx0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YTIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFsnbWV0YWRhdGEnXSA9IGRhdGEyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFQcm9taXNlLnJlc29sdmUoZGF0YTIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIFEuYWxsKF9wb3N0QXV0aG9yUG9wdWxhdGUuY29uY2F0KF9wb3N0TWV0YWRhdGFQb3B1bGF0ZSkpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCh2YWx1ZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9saXN0UHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHJldHVybiBfbGlzdFByb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbiAgICBnZXRQcm9kdWN0c0J5U2V4KHNleElkLCBwYWdlKTogUS5JUHJvbWlzZTx7fT4gwqB7XG4gICAgICAgIHZhciBfbGlzdFByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHZhciBfcG9zdEF1dGhvclBvcHVsYXRlID0gW107XG4gICAgICAgIHZhciBfcG9zdE1ldGFkYXRhUG9wdWxhdGUgPSBbXTtcblxuICAgICAgICB0aGlzLmRiLnF1ZXJ5KCdjb3JlLz9qc29uPWdldF9wb3N0cyZjb3VudD0yMDAnKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgcG9zdHMgPSByZXN1bHRzWydwb3N0cyddO1xuXG4gICAgICAgICAgICAgICAgdmFyIHNleFBvc3RzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBwb3N0cykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3N0c1tpXVsnY3VzdG9tX2ZpZWxkcyddWydzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19zZXgnXSA9PSBzZXhJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V4UG9zdHMucHVzaChwb3N0c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIHBhZ2luYXRpb25cbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSA2O1xuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ2NvdW50X3RvdGFsJ10gPSBzZXhQb3N0cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1sncGFnZXMnXSA9IE1hdGguZmxvb3Ioc2V4UG9zdHMubGVuZ3RoIC8gY291bnQpO1xuICAgICAgICAgICAgICAgIGlmIChzZXhQb3N0cy5sZW5ndGggPiA1KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcm9tID0gLWNvdW50ICsgKGNvdW50ICogcGFnZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0byA9IDAgKyAoY291bnQgKiBwYWdlKVxuICAgICAgICAgICAgICAgICAgICBzZXhQb3N0cyA9IHNleFBvc3RzLnNsaWNlKGZyb20sIHRvKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmVzdWx0c1sncG9zdHMnXSA9IHNleFBvc3RzO1xuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ3NleCddID0gc2V4SWQ7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1snY291bnQnXSA9IHNleFBvc3RzLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIHJlc3VsdHNbJ3Bvc3RzJ10uZm9yRWFjaCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdXRob3JQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWV0YWRhdGFQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICBfcG9zdEF1dGhvclBvcHVsYXRlLnB1c2goYXV0aG9yUHJvbWlzZS5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgX3Bvc3RNZXRhZGF0YVBvcHVsYXRlLnB1c2gobWV0YWRhdGFQcm9taXNlLnByb21pc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHBvcHVsYXRlIGF1dGhvcidzIGF2YXRhclxuICAgICAgICAgICAgICAgICAgICBhdXRoU2Vydi5nZXRVc2VyQXZhdGFyKHJlc3VsdC5hdXRob3IuaWQsIFwidGh1bWJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WydhdXRob3InXVsnYXZhdGFyJ10gPSBkYXRhWydhdmF0YXInXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JQcm9taXNlLnJlc29sdmUoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3B1bGF0ZSBtZXRhZGF0YWdpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFTZXJ2LmdldFByb2R1Y3RNZXRhZGF0YShyZXN1bHQuaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0WydtZXRhZGF0YSddID0gZGF0YTI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YVByb21pc2UucmVzb2x2ZShkYXRhMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgUS5hbGwoX3Bvc3RBdXRob3JQb3B1bGF0ZS5jb25jYXQoX3Bvc3RNZXRhZGF0YVBvcHVsYXRlKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHZhbHVlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2xpc3RQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gX2xpc3RQcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgY3JlYXRlUHJvZHVjdChhdXRob3JJZCwgdGl0bGUsIGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGltZywgc3ViY2F0ZWdvcnkwLCBzdWJjYXRlZ29yeTEsIHN0eWxlcywgc2V4LCBzdWJJbWcxLCBzdWJJbWcyLCBzdWJJbWczLCBzdWJJbWc0LCBzdWJJbWc1LCBzdWJJbWc2LFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aW9uQ29zdCwgc2VsbCwgc2VsbFByaWNlLCBzZWxsTm90ZSwgcmVudGFsLCByZW50YWxQcmljZSwgcmVudGFsTm90ZSk6IFEuSVByb21pc2U8e30+IHtcblxuICAgICAgICB2YXIgX3Byb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHZhciBwcm9taXNlc0xpc3QgPSBbXTtcbiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBxdWVyeSA9IFwiSU5TRVJUIElOVE8gd3AyX3Bvc3RzIChJRCwgcG9zdF9hdXRob3IsIHBvc3RfY29udGVudCwgcG9zdF90aXRsZSwgcG9zdF9zdGF0dXMsIGNvbW1lbnRfc3RhdHVzLCBwaW5nX3N0YXR1cywgcG9zdF9uYW1lLCBwb3N0X3R5cGUsIHBvc3RfZGF0ZSwgcG9zdF9kYXRlX2dtdCkgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIlZBTFVFUyAoTlVMTCwgJ1wiICsgYXV0aG9ySWQgKyBcIicsICdcIiArIGNvbnRlbnQgKyBcIicsICdcIiArIHRpdGxlICsgXCInLCAncHVibGlzaCcsICdvcGVuJywgJ29wZW4nLCAnXCIgKyB0aXRsZS5yZXBsYWNlKC9cXHMvZyAsICctJykgKyBcIicsICdwb3N0JywgJ1wiICsgbm93LnRvSVNPU3RyaW5nKCkgKyBcIicsJ1wiICsgbm93LnRvSVNPU3RyaW5nKCkgKyBcIicpXCI7XG5cbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihxdWVyeSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIGd1aWQgPSBcImh0dHA6Ly9zb2YudG9reW8vP3A9XCIgKyBkYXRhWydpbnNlcnRJZCddO1xuICAgICAgICAgICAgICAgIHZhciBxdWVyeTIgPSBcIlVQREFURSB3cDJfcG9zdHMgU0VUIGd1aWQgPSAnXCIgKyBndWlkICsgXCInIFdIRVJFIElEID0gXCIgKyBkYXRhWydpbnNlcnRJZCddO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihxdWVyeTIpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXJ5MyA9IFwiSU5TRVJUIElOVE8gd3AyX3Bvc3RtZXRhIChtZXRhX2lkLCBwb3N0X2lkLCBtZXRhX2tleSwgbWV0YV92YWx1ZSlcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlZBTFVFUyBcIjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZVByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXNMaXN0LnB1c2goaW1hZ2VQcm9taXNlLnByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlc1NlcnYudXBsb2FkSW1hZ2UoaW1nLCBkYXRhWydpbnNlcnRJZCddLCAnc29mYmFja2VuZF9fc29mX3dvcmtfbWV0YV9fcG9zdEltYWdlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YmNhdGVnb3J5MCkgcXVlcnkzID0gcXVlcnkzLmNvbmNhdChcIihOVUxMLFwiICsgZGF0YVsnaW5zZXJ0SWQnXSArIFwiLCdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19jYXRlZ29yeV8wJywnXCIgKyBzdWJjYXRlZ29yeTAgKyBcIicpIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJjYXRlZ29yeTEpIHF1ZXJ5MyA9IHF1ZXJ5My5jb25jYXQoXCIsKE5VTEwsXCIgKyBkYXRhWydpbnNlcnRJZCddICsgXCIsJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX2NhdGVnb3J5XzEnLCdcIiArIHN1YmNhdGVnb3J5MSArIFwiJykgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gc3R5bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5MyA9IHF1ZXJ5My5jb25jYXQoXCIsKE5VTEwsXCIgKyBkYXRhWydpbnNlcnRJZCddICsgXCIsJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3N0eWxlcycsJ1wiICsgc3R5bGVzW2ldICsgXCInKSBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXgpIHF1ZXJ5MyA9IHF1ZXJ5My5jb25jYXQoXCIsKE5VTEwsXCIgKyBkYXRhWydpbnNlcnRJZCddICsgXCIsJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3NleCcsJ1wiICsgc2V4ICsgXCInKSBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViSW1nMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJpbWFnZTFQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzTGlzdC5wdXNoKHN1YmltYWdlMVByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VzU2Vydi51cGxvYWRJbWFnZShpbWcsIGRhdGFbJ2luc2VydElkJ10sICdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19zdWJJbWFnZTEnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViaW1hZ2UxUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YkltZzIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViaW1hZ2UyUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlc0xpc3QucHVzaChzdWJpbWFnZTJQcm9taXNlLnByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlc1NlcnYudXBsb2FkSW1hZ2UoaW1nLCBkYXRhWydpbnNlcnRJZCddLCAnc29mYmFja2VuZF9fc29mX3dvcmtfbWV0YV9fc3ViSW1hZ2UyJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmltYWdlMlByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJJbWczKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YmltYWdlM1Byb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXNMaXN0LnB1c2goc3ViaW1hZ2UzUHJvbWlzZS5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZXNTZXJ2LnVwbG9hZEltYWdlKGltZywgZGF0YVsnaW5zZXJ0SWQnXSwgJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3N1YkltYWdlMycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJpbWFnZTNQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViSW1nNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJpbWFnZTRQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzTGlzdC5wdXNoKHN1YmltYWdlNFByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VzU2Vydi51cGxvYWRJbWFnZShpbWcsIGRhdGFbJ2luc2VydElkJ10sICdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19zdWJJbWFnZTQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViaW1hZ2U0UHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YkltZzUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViaW1hZ2U1UHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlc0xpc3QucHVzaChzdWJpbWFnZTFQcm9taXNlLnByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlc1NlcnYudXBsb2FkSW1hZ2UoaW1nLCBkYXRhWydpbnNlcnRJZCddLCAnc29mYmFja2VuZF9fc29mX3dvcmtfbWV0YV9fc3ViSW1hZ2U1JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmltYWdlNVByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJJbWc2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YmltYWdlNlByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXNMaXN0LnB1c2goc3ViaW1hZ2UxUHJvbWlzZS5wcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZXNTZXJ2LnVwbG9hZEltYWdlKGltZywgZGF0YVsnaW5zZXJ0SWQnXSwgJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3N1YkltYWdlNicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJpbWFnZTZQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdGlvbkNvc3QpIHF1ZXJ5MyA9IHF1ZXJ5My5jb25jYXQoXCIsKE5VTEwsXCIgKyBkYXRhWydpbnNlcnRJZCddICsgXCIsJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3Byb2R1Y3Rpb25Db3N0JyxcIiArIHByb2R1Y3Rpb25Db3N0ICsgXCIpIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxsKSBxdWVyeTMgPSBxdWVyeTMuY29uY2F0KFwiLChOVUxMLFwiICsgZGF0YVsnaW5zZXJ0SWQnXSArIFwiLCdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19zZWxsJywnXCIgKyBzZWxsICsgXCInKSBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsbFByaWNlKSBxdWVyeTMgPSBxdWVyeTMuY29uY2F0KFwiLChOVUxMLFwiICsgZGF0YVsnaW5zZXJ0SWQnXSArIFwiLCdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19zZWxsUHJpY2UnLFwiICsgc2VsbFByaWNlICsgXCIpIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxsTm90ZSkgcXVlcnkzID0gcXVlcnkzLmNvbmNhdChcIiwoTlVMTCxcIiArIGRhdGFbJ2luc2VydElkJ10gKyBcIiwnc29mYmFja2VuZF9fc29mX3dvcmtfbWV0YV9fc2VsbE5vdGUnLCdcIiArIHNlbGxOb3RlICsgXCInKSBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVudGFsKSBxdWVyeTMgPSBxdWVyeTMuY29uY2F0KFwiLChOVUxMLFwiICsgZGF0YVsnaW5zZXJ0SWQnXSArIFwiLCdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19yZW50YWwnLCdcIiArIHJlbnRhbCArIFwiJykgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbnRhbFByaWNlKSBxdWVyeTMgPSBxdWVyeTMuY29uY2F0KFwiLChOVUxMLFwiICsgZGF0YVsnaW5zZXJ0SWQnXSArIFwiLCdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19yZW50YWxQcmljZScsXCIgKyByZW50YWxQcmljZSArIFwiKSBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVudGFsTm90ZSkgcXVlcnkzID0gcXVlcnkzLmNvbmNhdChcIiwoTlVMTCxcIiArIGRhdGFbJ2luc2VydElkJ10gKyBcIiwnc29mYmFja2VuZF9fc29mX3dvcmtfbWV0YV9fcmVudGFsTm90ZScsJ1wiICsgcmVudGFsTm90ZSArIFwiJykgXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXVlcnkzUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzTGlzdC5wdXNoKHF1ZXJ5M1Byb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRiLnF1ZXJ5X2RiKHF1ZXJ5MylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YTMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkzUHJvbWlzZS5yZXNvbHZlKGRhdGEzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgUS5hbGwocHJvbWlzZXNMaXN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHZhbHVlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gX3Byb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbiAgICB1cGRhdGVQcm9kdWN0KHByb2R1Y3RJZCwgdGl0bGUsIGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGltZywgc3ViY2F0ZWdvcnkwLCBzdWJjYXRlZ29yeTEsIHN0eWxlcywgc2V4LCBzdWJJbWcxLCBzdWJJbWcyLCBzdWJJbWczLCBzdWJJbWc0LCBzdWJJbWc1LCBzdWJJbWc2LFxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0aW9uQ29zdCwgc2VsbCwgc2VsbFByaWNlLCBzZWxsTm90ZSwgcmVudGFsLCByZW50YWxQcmljZSwgcmVudGFsTm90ZSk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9wcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICB2YXIgcHJvbWlzZXNMaXN0ID0gW107XG5cbiAgICAgICAgaWYgKHRpdGxlKSB7XG4gICAgICAgICAgICB2YXIgdGl0bGVQcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgcHJvbWlzZXNMaXN0LnB1c2godGl0bGVQcm9taXNlLnByb21pc2UpO1xuICAgICAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihcIlVQREFURSB3cDJfcG9zdHMgU0VUIHBvc3RfdGl0bGU9XCIgKyB0aXRsZSArIFwiIFdIRVJFIElEPVwiICsgcHJvZHVjdElkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRpdGxlUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50UHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgIHByb21pc2VzTGlzdC5wdXNoKGNvbnRlbnRQcm9taXNlLnByb21pc2UpO1xuICAgICAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihcIlVQREFURSB3cDJfcG9zdHMgU0VUIHBvc3RfY29udGVudD1cIiArIGNvbnRlbnQgKyBcIiBXSEVSRSBJRD1cIiArIHByb2R1Y3RJZClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW50UHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGltZykge1xuICAgICAgICAgICAgdmFyIGltYWdlUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgIHByb21pc2VzTGlzdC5wdXNoKGltYWdlUHJvbWlzZS5wcm9taXNlKTtcbiAgICAgICAgICAgIGltYWdlc1NlcnYudXBkYXRlSW1hZ2UoaW1nLCBwcm9kdWN0SWQsICdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19wb3N0SW1hZ2UnKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGltYWdlUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc3ViY2F0ZWdvcnkwKSB7XG4gICAgICAgICAgICB2YXIgc3ViY2F0MFByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICBwcm9taXNlc0xpc3QucHVzaChzdWJjYXQwUHJvbWlzZS5wcm9taXNlKTtcbiAgICAgICAgICAgIHRoaXMuZGIucXVlcnlfZGIoXCJVUERBVEUgd3AyX3Bvc3RtZXRhIFNFVCBtZXRhX3ZhbHVlPVwiICsgc3ViY2F0ZWdvcnkwICsgXCIgV0hFUkUgbWV0YV9rZXk9J3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX2NhdGVnb3J5XzAnIEFORCBwb3N0X2lkPVwiICsgcHJvZHVjdElkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN1YmNhdDBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc3ViY2F0ZWdvcnkxKSB7XG4gICAgICAgICAgICB2YXIgc3ViY2F0MVByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICBwcm9taXNlc0xpc3QucHVzaChzdWJjYXQxUHJvbWlzZS5wcm9taXNlKTtcbiAgICAgICAgICAgIHRoaXMuZGIucXVlcnlfZGIoXCJVUERBVEUgd3AyX3Bvc3RtZXRhIFNFVCBtZXRhX3ZhbHVlPVwiICsgc3ViY2F0ZWdvcnkxICsgXCIgV0hFUkUgbWV0YV9rZXk9J3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX2NhdGVnb3J5XzEnIEFORCBwb3N0X2lkPVwiICsgcHJvZHVjdElkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN1YmNhdDFQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc2V4KSB7XG4gICAgICAgICAgICB2YXIgc2V4UHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgIHByb21pc2VzTGlzdC5wdXNoKHNleFByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICB0aGlzLmRiLnF1ZXJ5X2RiKFwiVVBEQVRFIHdwMl9wb3N0bWV0YSBTRVQgbWV0YV92YWx1ZT1cIiArIHNleCArIFwiIFdIRVJFIG1ldGFfa2V5PSdzb2ZiYWNrZW5kX19zb2Zfd29ya19tZXRhX19zZXgnIEFORCBwb3N0X2lkPVwiICsgcHJvZHVjdElkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNleFByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIFEuYWxsKHByb21pc2VzTGlzdClcbiAgICAgICAgICAgIC50aGVuKCh2YWx1ZXMpID0+IHtcbiAgICAgICAgICAgICAgICBfcHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIF9wcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZGVsZXRlUHJvZHVjdChub25jZSwgcHJvZHVjdElkKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5xdWVyeSgncG9zdHMvZGVsZXRlX3Bvc3QvP25vbmNlPScgKyBub25jZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICcmaWQ9JyArIHByb2R1Y3RJZClcbiAgICB9XG5cbiAgICBjcmVhdGVDb21tZW50KHByb2R1Y3RJZCwgY29va2llLCBjb250ZW50KTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5xdWVyeSgndXNlci9wb3N0X2NvbW1lbnQvP3Bvc3RfaWQ9JyArIHByb2R1Y3RJZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICcmY29va2llPScgKyBjb29raWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJmNvbW1lbnRfc3RhdHVzPTEnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyZjb250ZW50PScgKyBjb250ZW50KVxuICAgIH1cblxuICAgIGdldFByb2R1Y3RzQnlTZWFyY2goc2VhcmNoLCBwYWdlKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX3NlYXJjaFByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHRoaXMuZGIucXVlcnkoJ2NvcmUvZ2V0X3NlYXJjaF9yZXN1bHRzLz9jb3VudD0xMCZzZWFyY2g9JyArIHNlYXJjaCArXG4gICAgICAgICAgICAnJnBhZ2U9JyArIHBhZ2UpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgIHZhciBfcG9zdEF1dGhvclBvcHVsYXRlID0gW107XG5cbiAgICAgICAgICAgIHJlc3VsdHNbJ3Bvc3RzJ10uZm9yRWFjaCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIGF1dGhvclByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgX3Bvc3RBdXRob3JQb3B1bGF0ZS5wdXNoKGF1dGhvclByb21pc2UucHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgYXV0aFNlcnYuZ2V0VXNlckF2YXRhcihyZXN1bHQuYXV0aG9yLmlkLCBcInRodW1iXCIpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbJ2F1dGhvciddWydhdmF0YXInXT0gZGF0YVsnYXZhdGFyJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JQcm9taXNlLnJlc29sdmUoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhU2Vydi5nZXRQcm9kdWN0TWV0YWRhdGEocmVzdWx0LmlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhMikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbJ21ldGFkYXRhJ10gPSBkYXRhMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFEuYWxsKF9wb3N0QXV0aG9yUG9wdWxhdGUpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBfc2VhcmNoUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gX3NlYXJjaFByb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbiAgICBnZXRQcm9kdWN0c1JhbmtpbmdCeUxpa2VzKCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9yZXNwb25zZVByb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHZhciBfcHJvZHVjdHNQcm9taXNlcyA9IFtdO1xuICAgICAgICB2YXIgX3Jlc3BvbnNlID0ge1xuICAgICAgICAgICAgcG9zdHMgOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBxdWVyeSA9IFwiU0VMRUNUICogRlJPTSBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiKCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiU0VMRUNUIHdwMl9wb3N0cy5JRCBBUyBwb3N0X2lkLCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwid3AyX3Bvc3RzLnBvc3RfdGl0bGUgQVMgdGl0bGUsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ3cDJfcG9zdHMucG9zdF9kYXRlX2dtdCBBUyBkYXRlLCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwid3AyX3Bvc3RtZXRhLm1ldGFfdmFsdWUgQVMgbGlrZXMsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ3cDJfdXNlcnMuZGlzcGxheV9uYW1lIEFTIGF1dGhvciBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiRlJPTSBgd3AyX3Bvc3RzYCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiSk9JTiB3cDJfdXNlcnMgT04gd3AyX3Bvc3RzLnBvc3RfYXV0aG9yID0gd3AyX3VzZXJzLklEIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJKT0lOIHdwMl9wb3N0bWV0YSBPTiB3cDJfcG9zdHMuSUQgPSB3cDJfcG9zdG1ldGEucG9zdF9pZCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgd3AyX3Bvc3RtZXRhLm1ldGFfa2V5ID0gJ19pdGVtX2xpa2VzJyBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiKSB0YWJsZTEgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIk9SREVSIEJZIGxpa2VzIERFU0MgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkxJTUlUIDVcIjtcbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihxdWVyeSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhIDogYW55W10pID0+IHtcbiAgICAgICAgICAgICAgICBkYXRhLmZvckVhY2goKHByb2R1Y3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9wcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICAgICBfcHJvZHVjdHNQcm9taXNlcy5wdXNoKF9wcm9taXNlLnByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFByb2R1Y3RCeUlkKHByb2R1Y3RbJ3Bvc3RfaWQnXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcHJvbWlzZS5yZXNvbHZlKHJlc3VsdFsncG9zdCddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIFEuYWxsKF9wcm9kdWN0c1Byb21pc2VzKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc3BvbnNlUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBfcmVzcG9uc2VQcm9taXNlLnByb21pc2U7XG4gICAgfVxuXG4gICAgZ2V0UHJvZHVjdHNSYW5raW5nQnlWaXNpdHMoKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX3Byb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHZhciBxdWVyeSA9IFwiU0VMRUNUICogRlJPTSBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiKCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiU0VMRUNUIHdwMl9wb3N0cy5JRCBBUyBwb3N0X2lkLCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwid3AyX3Bvc3RzLnBvc3RfdGl0bGUgQVMgdGl0bGUsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ3cDJfcG9zdHMucG9zdF9kYXRlX2dtdCBBUyBkYXRlLCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwid3AyX3VzZXJzLmRpc3BsYXlfbmFtZSBBUyBhdXRob3IsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ3cDJfcG9zdF92aWV3cy5jb3VudCBBUyB2aXNpdHMgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkZST00gYHdwMl9wb3N0c2AgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkpPSU4gd3AyX3VzZXJzIE9OIHdwMl9wb3N0cy5wb3N0X2F1dGhvciA9IHdwMl91c2Vycy5JRCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiSk9JTiB3cDJfcG9zdF92aWV3cyBPTiB3cDJfcG9zdHMuSUQgPSB3cDJfcG9zdF92aWV3cy5pZCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgd3AyX3Bvc3Rfdmlld3MucGVyaW9kID0gJ3RvdGFsJyBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiKSB0YWJsZTEgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkpPSU4gXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIiggXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIlNFTEVDVCB3cDJfcG9zdG1ldGEucG9zdF9pZCwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIndwMl9wb3N0bWV0YS5tZXRhX3ZhbHVlIEFTIGltYWdlIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJGUk9NIHdwMl9wb3N0bWV0YSBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgd3AyX3Bvc3RtZXRhLm1ldGFfa2V5ID0gJ3NvZmJhY2tlbmRfX3NvZl93b3JrX21ldGFfX3Bvc3RJbWFnZScgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIikgdGFibGUyIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJPTiB0YWJsZTEucG9zdF9pZCA9IHRhYmxlMi5wb3N0X2lkIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJPUkRFUiBCWSB2aXNpdHMgREVTQyBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiTElNSVQgMTBcIjtcbiAgICAgICAgdGhpcy5kYi5xdWVyeV9kYihxdWVyeSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgX3Byb21pc2UucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBfcHJvbWlzZS5wcm9taXNlO1xuICAgIH1cblxuICAgIHRlc3QxUHJvZHVjdExpc3QoKTogUS5JUHJvbWlzZTx7fT4ge1xuICAgICAgICB2YXIgX3Byb21pc2UgPSBRLmRlZmVyKCk7XG4gICAgICAgIHZhciBjb3VudCA9IDEwO1xuICAgICAgICB2YXIgcXVlcnkgPSBcIlNFTEVDVCB3cDJfcG9zdHMuSUQgQVMgcG9zdF9pZCwgcG9zdF90aXRsZSwgd3AyX3VzZXJzLmRpc3BsYXlfbmFtZSBBUyBhdXRob3IsIHdwMl91c2Vycy5pZCBBUyBhdXRob3JfaWQsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ3cDJfcG9zdHMucG9zdF9jb250ZW50LCB3cDJfcG9zdHMucG9zdF9kYXRlX2dtdCwgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInZpZXdzX3RhYmxlLnBvc3Rfdmlld3MsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJDT05DQVQoJ3snLCBHUk9VUF9DT05DQVQoQ09OQ0FUKCdcXFwiJywgbWV0YV9rZXksICdcXFwiOiAnLCAnXFxcIicsIG1ldGFfdmFsdWUsICdcXFwiJykgU0VQQVJBVE9SICcsICcpLCAnfScpIEFTIG1ldGFkYXRhIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJGUk9NIHdwMl9wb3N0cyBcIiArXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSU5ORVIgSk9JTiB3cDJfcG9zdG1ldGEgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJPTiB3cDJfcG9zdHMuSUQgPSB3cDJfcG9zdG1ldGEucG9zdF9pZCBcIiArXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiSU5ORVIgSk9JTiB3cDJfdXNlcnMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJPTiB3cDJfcG9zdHMucG9zdF9hdXRob3IgPSB3cDJfdXNlcnMuSUQgXCIgK1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBcIklOTkVSIEpPSU4gKCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJTRUxFQ1QgaWQgQVMgcG9zdF9pZCwgY291bnQgQVMgcG9zdF92aWV3cyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJGUk9NIHdwMl9wb3N0X3ZpZXdzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIldIRVJFIHdwMl9wb3N0X3ZpZXdzLnR5cGUgPSA0IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiKSBBUyB2aWV3c190YWJsZSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIk9OIHdwMl9wb3N0cy5JRCA9IHZpZXdzX3RhYmxlLnBvc3RfaWQgXCIgK1xuXG4gICAgICAgICAgICAgICAgICAgIFwiV0hFUkUgd3AyX3Bvc3RzLnBvc3RfdHlwZSA9ICdwb3N0JyBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiR1JPVVAgQlkgd3AyX3Bvc3RzLklEIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJPUkRFUiBCWSBSQU5EKCkgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkxJTUlUIFwiICsgY291bnQ7XG4gICAgICAgIHRoaXMuZGIucXVlcnlfZGIocXVlcnkpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIF9wcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gX3Byb21pc2UucHJvbWlzZTtcbiAgICB9XG5cbiAgICB0ZXN0MlByb2R1Y3RMaXN0KCk6IFEuSVByb21pc2U8e30+IHtcbiAgICAgICAgdmFyIF9wcm9taXNlID0gUS5kZWZlcigpO1xuICAgICAgICB2YXIgY291bnQgPSAxMDtcbiAgICAgICAgdmFyIHF1ZXJ5ID0gXCJTRUxFQ1Qgd3AyX3Bvc3RzLklEIEFTIHBvc3RfaWQsIHBvc3RfdGl0bGUsIHdwMl91c2Vycy5kaXNwbGF5X25hbWUgQVMgYXV0aG9yLCB3cDJfdXNlcnMuaWQgQVMgYXV0aG9yX2lkLCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwid3AyX3Bvc3RzLnBvc3RfY29udGVudCwgd3AyX3Bvc3RzLnBvc3RfZGF0ZV9nbXQsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ2aWV3c190YWJsZS5wb3N0X3ZpZXdzLCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiQ09OQ0FUKCd7JywgR1JPVVBfQ09OQ0FUKENPTkNBVCgnXFxcIicsIG1ldGFfa2V5LCAnXFxcIjogJywgJ1xcXCInLCBtZXRhX3ZhbHVlLCAnXFxcIicpIFNFUEFSQVRPUiAnLCAnKSwgJ30nKSBBUyBtZXRhZGF0YSBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiRlJPTSB3cDJfcG9zdHMgXCIgK1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBcIklOTkVSIEpPSU4gd3AyX3Bvc3RtZXRhIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiT04gd3AyX3Bvc3RzLklEID0gd3AyX3Bvc3RtZXRhLnBvc3RfaWQgXCIgK1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBcIklOTkVSIEpPSU4gd3AyX3VzZXJzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiT04gd3AyX3Bvc3RzLnBvc3RfYXV0aG9yID0gd3AyX3VzZXJzLklEIFwiICtcblxuICAgICAgICAgICAgICAgICAgICAgICAgXCJJTk5FUiBKT0lOICggXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiU0VMRUNUIGlkIEFTIHBvc3RfaWQsIGNvdW50IEFTIHBvc3Rfdmlld3MgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiRlJPTSB3cDJfcG9zdF92aWV3cyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJXSEVSRSB3cDJfcG9zdF92aWV3cy50eXBlID0gNCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIikgQVMgdmlld3NfdGFibGUgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJPTiB3cDJfcG9zdHMuSUQgPSB2aWV3c190YWJsZS5wb3N0X2lkIFwiICtcblxuICAgICAgICAgICAgICAgICAgICBcIldIRVJFIHdwMl9wb3N0cy5wb3N0X3R5cGUgPSAncG9zdCcgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIkdST1VQIEJZIHdwMl9wb3N0cy5JRCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiT1JERVIgQlkgUkFORCgpIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJMSU1JVCBcIiArIGNvdW50O1xuICAgICAgICB0aGlzLmRiLnF1ZXJ5X2RiKHF1ZXJ5KVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YUpzb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICAgICAgICAgICAgICB2YXIgX3Bvc3RBdXRob3JQb3B1bGF0ZSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZGF0YUpzb24uZm9yRWFjaCgocHJvZHVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXV0aG9yUHJvbWlzZSA9IFEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgX3Bvc3RBdXRob3JQb3B1bGF0ZS5wdXNoKGF1dGhvclByb21pc2UucHJvbWlzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXV0aFNlcnYuZ2V0VXNlckF2YXRhcihwcm9kdWN0LmF1dGhvcl9pZCwgXCJ0aHVtYlwiKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdFsnYXV0aG9yX2F2YXRhciddID0gZGF0YVsnYXZhdGFyJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRob3JQcm9taXNlLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgUS5hbGwoX3Bvc3RBdXRob3JQb3B1bGF0ZSlcbiAgICAgICAgICAgICAgICAudGhlbigodmFsdWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIF9wcm9taXNlLnJlc29sdmUoZGF0YUpzb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIF9wcm9taXNlLnByb21pc2U7XG4gICAgfVxufTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==