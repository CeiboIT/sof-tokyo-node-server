///<reference path='../typings/hapi/hapi.d.ts' />
'use strict';
var _this = this;
var hapi = require("hapi");
var ProductsRoutes = require("./modules/products/products.routes");
this.server = new hapi.Server();
var _host;
if (process.env.NODE_ENV != 'development') {
    _host = '0.0.0.0';
}
else {
    _host = 'localhost';
}
this.server.connection({
    port: process.env.PORT || 9000,
    host: _host
});
for (var route in ProductsRoutes) {
    ProductsRoutes[route].path = '/api' + ProductsRoutes[route].path;
    this.server.route(ProductsRoutes[route]);
}
//help for see all the routes
this.server.route({
    method: 'GET',
    path: '/api',
    handler: function (request, reply) {
        var _table = _this.server.table();
        var _answer = {};
        _table.table.map(function (element) {
            console.log(element);
            _answer[element.fingerprint] = {
                path: element.path,
                method: element.method
            };
        });
        reply(_answer);
    }
});
//this.server.connection({ port: process.env.PORT ||3000 });
this.server.start(function () {
    console.log('Started: ' + _this.server.info.uri);
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLEFBQ0EsaURBRGlEO0FBQ2pELFlBQVksQ0FBQztBQUFiLGlCQXNEQTtBQXBEQSxJQUFPLElBQUksV0FBVyxNQUFNLENBQUMsQ0FBQztBQUM5QixJQUFPLGNBQWMsV0FBVyxvQ0FBb0MsQ0FBQyxDQUFDO0FBRXRFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7QUFFaEMsSUFBSSxLQUFLLENBQUM7QUFFVixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsSUFBSSxhQUFhLENBQUMsQ0FBQyxDQUFDO0lBQ3hDLEtBQUssR0FBRyxTQUFTLENBQUM7QUFDdEIsQ0FBQztBQUFDLElBQUksQ0FBQyxDQUFDO0lBQ0osS0FBSyxHQUFHLFdBQVcsQ0FBQztBQUN4QixDQUFDO0FBSUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUM7SUFDbkIsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLElBQUk7SUFDOUIsSUFBSSxFQUFFLEtBQUs7Q0FDZCxDQUFDLENBQUE7QUFLRixHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxJQUFJLGNBQWMsQ0FBQyxDQUFDLENBQUM7SUFDL0IsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksR0FBRyxNQUFNLEdBQUcsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQztJQUNqRSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQTtBQUM1QyxDQUFDO0FBRUQsQUFDQSw2QkFENkI7QUFDN0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDZCxNQUFNLEVBQUUsS0FBSztJQUNiLElBQUksRUFBRSxNQUFNO0lBQ1osT0FBTyxFQUFFLFVBQUMsT0FBTyxFQUFFLEtBQUs7UUFDcEIsSUFBSSxNQUFNLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUVqQyxJQUFJLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDakIsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQyxPQUFPO1lBQ3JCLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDckIsT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRztnQkFDM0IsSUFBSSxFQUFFLE9BQU8sQ0FBQyxJQUFJO2dCQUNsQixNQUFNLEVBQUUsT0FBTyxDQUFDLE1BQU07YUFDekIsQ0FBQTtRQUNMLENBQUMsQ0FBQyxDQUFBO1FBQ0YsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ25CLENBQUM7Q0FDSixDQUFDLENBQUE7QUFFRixBQUNBLDREQUQ0RDtBQUM1RCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztJQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxHQUFHLEtBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3BELENBQUMsQ0FBQyxDQUFBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi90eXBpbmdzL2hhcGkvaGFwaS5kLnRzJyAvPlxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgaGFwaSA9IHJlcXVpcmUoXCJoYXBpXCIpO1xuaW1wb3J0IFByb2R1Y3RzUm91dGVzID0gcmVxdWlyZShcIi4vbW9kdWxlcy9wcm9kdWN0cy9wcm9kdWN0cy5yb3V0ZXNcIik7XG5cbnRoaXMuc2VydmVyID0gbmV3IGhhcGkuU2VydmVyKCk7XG5cbnZhciBfaG9zdDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9ICdkZXZlbG9wbWVudCcpIHtcbiAgICBfaG9zdCA9ICcwLjAuMC4wJztcbn0gZWxzZSB7XG4gICAgX2hvc3QgPSAnbG9jYWxob3N0Jztcbn1cblxuXG5cbnRoaXMuc2VydmVyLmNvbm5lY3Rpb24oe1xuICAgIHBvcnQ6IHByb2Nlc3MuZW52LlBPUlQgfHwgOTAwMCxcbiAgICBob3N0OiBfaG9zdFxufSlcblxuXG5cbi8vIGFkZCBwcm9kdWN0cyBhcGkgcm91dGVzXG5mb3IgKHZhciByb3V0ZSBpbiBQcm9kdWN0c1JvdXRlcykge1xuICAgIFByb2R1Y3RzUm91dGVzW3JvdXRlXS5wYXRoID0gJy9hcGknICsgUHJvZHVjdHNSb3V0ZXNbcm91dGVdLnBhdGg7XG4gICAgdGhpcy5zZXJ2ZXIucm91dGUoUHJvZHVjdHNSb3V0ZXNbcm91dGVdKVxufVxuXG4vL2hlbHAgZm9yIHNlZSBhbGwgdGhlIHJvdXRlc1xudGhpcy5zZXJ2ZXIucm91dGUoe1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgcGF0aDogJy9hcGknLFxuICAgIGhhbmRsZXI6IChyZXF1ZXN0LCByZXBseSkgPT4ge1xuICAgICAgICB2YXIgX3RhYmxlID0gdGhpcy5zZXJ2ZXIudGFibGUoKTtcbiAgICAgIFxuICAgICAgICB2YXIgX2Fuc3dlciA9IHt9O1xuICAgICAgICBfdGFibGUudGFibGUubWFwKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlbGVtZW50KTtcbiAgICAgICAgICAgIF9hbnN3ZXJbZWxlbWVudC5maW5nZXJwcmludF0gPSB7XG4gICAgICAgICAgICAgICAgcGF0aDogZWxlbWVudC5wYXRoLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogZWxlbWVudC5tZXRob2RcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmVwbHkoX2Fuc3dlcik7XG4gICAgfVxufSlcblxuLy90aGlzLnNlcnZlci5jb25uZWN0aW9uKHsgcG9ydDogcHJvY2Vzcy5lbnYuUE9SVCB8fDMwMDAgfSk7XG50aGlzLnNlcnZlci5zdGFydCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1N0YXJ0ZWQ6ICcgKyB0aGlzLnNlcnZlci5pbmZvLnVyaSk7XG59KVxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=